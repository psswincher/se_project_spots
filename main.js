!function(){"use strict";const e={formSelector:".modal__form",inputSelector:".modal__input",inputErrorStyle:"modal__input_type_error",submitButtonSelector:".modal__submit-button",submitButtonName:"modal__submit-button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:".modal__input_type_error",errorClass:"modal__error_visible",debugging:!0},t="modal_open";class i{constructor(e){let{title:t,imageLink:i,imageClickManager:s}=e;this._cardTemplate=document.querySelector("#card"),this._cardElement=this._cardTemplate.content.querySelector(".card").cloneNode(!0),this._cardImage=this._cardElement.querySelector(".card__image"),this._likeButton=this._cardElement.querySelector(".card__like-button"),this._deleteButton=this._cardElement.querySelector(".card__delete-button"),this._titleElement=this._cardElement.querySelector(".card__title"),this._cardUnlikedImage=this._cardElement.querySelector(".card__unliked-image"),this._cardLikedImage=this._cardElement.querySelector(".card__liked-image"),this._onDeleteClick=this._onDeleteClick.bind(this),this._imageClickManager=s,this.setTitle(t),this.setCardImage(i),this.setCardImageAlt(t),this._setEventListeners()}_setEventListeners(){this._cardImage.addEventListener("click",(()=>this.onImageClick())),this._likeButton.addEventListener("click",(()=>this.onLikeClick())),this._deleteButton.addEventListener("click",(()=>this._onDeleteClick()))}setTitle(e){"string"==typeof e?(this.titleText=e,this._titleElement.textContent=this._titleText):(console.log("New card title is not a string. Setting to default."),this.titleText="unnamed card",this._titleElement.textContent=this.titleText)}setCardImage(e){this.imageLink=e,this._cardImage.setAttribute("src",this.imageLink)}setCardImageAlt(e){this.imageAltText=e||this.titleText,this._cardImage.setAttribute("alt",this.imageAltText)}onLikeClick(){this.isLikeActive()?this.deactivateLikeButton():this.activateLikeButton()}isLikeActive(){return!this._cardLikedImage.classList.contains("card__liked-image__inactive")}activateLikeButton(){this._cardLikedImage.classList.remove("card__liked-image__inactive"),this._cardUnlikedImage.classList.add("card__unliked-image__inactive")}deactivateLikeButton(){this._cardLikedImage.classList.add("card__liked-image__inactive"),this._cardUnlikedImage.classList.remove("card__unliked-image__inactive")}_remove(){console.log(this._cardElement),this._cardElement.remove()}_onDeleteClick(){this._remove()}onImageClick(){this._imageClickManager()}getView(){return this._cardElement}}class s{constructor(e){let{modalSelector:t}=e;this._modalElement=document.querySelector(t),this._modalSelector=t,this._handleEscapeClose=this._handleEscapeClose.bind(this),this._closeButton=this._modalElement.querySelector(".modal__close-button"),this._setEventListeners()}open(){this._modalElement.classList.add(t),this._setEscapeListener(!0)}close(){this._modalElement.classList.remove(t),this._setEscapeListener(!1)}_handleEscapeClose(e){"Escape"===e.key&&this.close()}_setEscapeListener(e){e?document.addEventListener("keydown",this._handleEscapeClose):document.removeEventListener("keydown",this._handleEscapeClose)}_setEventListeners(){this._closeButton.addEventListener("click",(()=>this.close())),this._modalElement.addEventListener("click",(e=>this._handleModalOverlayClick(e)))}_handleModalOverlayClick(e){e.target.classList.contains("modal")&&this.close()}}class n extends s{constructor(e){let{modalSelector:t,onSubmitCallback:i}=e;super({modalSelector:t}),this._onSubmitCallback=i,this._submitButton=this._modalElement.querySelector(".modal__submit-button"),this._inputFields=this._modalElement.querySelectorAll(".modal__input"),this._form=this._modalElement.querySelector(".modal__form"),this._currentProfileName=document.querySelector(".profile__name"),this._currentProfileDescription=document.querySelector(".profile__description")}getFormElement(){return this._form}_reset(){this._inputFields.forEach((e=>{e.value=""}))}_setEventListeners(){super._setEventListeners(),this._modalElement.addEventListener("submit",(e=>this._onSubmit(e)))}_getInputValues(){const e={};return this._inputFields.forEach((t=>{e[t.name]=t.value})),e}_onSubmit(e){e.preventDefault(),this._onSubmitCallback(this._getInputValues()),this._reset(),this.close()}setDefaultInputs(e){this._inputFields.forEach((t=>{e[t.name]&&(t.value=e[t.name])}))}setPlaceholderInputs(e){this._inputFields.forEach((t=>{console.log(t.name),e[t.name]&&t.setAttribute("placeholder",e[t.name])}))}}class l{constructor(e,t){this._settings=e,this._formElement=t,this._setFormInputElements(),this._setFormButtons()}enableValidation(){this._formElement.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}resetValidation(){this._disableButton(),this._clearFormInputElements()}_showInputError=e=>{const t=this._getErrorElement(e);e.classList.add(this._settings.inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._settings.errorClass)};_hideInputError=e=>{const t=this._getErrorElement(e);e.classList.remove(this._settings.inputErrorClass),t.classList.remove(this._settings.errorClass),t.textContent=""};_checkFieldValidity=e=>{e.validity.valid?this._hideInputError(e):this._showInputError(e,e.validationMessage)};_getErrorElement(e){return document.querySelector(`#${e.id}-input-error`)}_checkInvalidInput(){return this._formInputElements.every((e=>0!==e.value.length&&e.validity.valid))}_setFormInputElements(){this._formInputElements=Array.from(this._formElement.querySelectorAll(this._settings.inputSelector))}_clearFormInputElements(){this._formInputElements.forEach((e=>{e.value=""}))}_setFormButtons(){this._buttonElement=this._formElement.querySelector(this._settings.submitButtonSelector)}_toggleSubmitButton(){this._checkInvalidInput()?this._enableButton():this._disableButton()}_disableButton(){this._buttonElement.classList.add(this._settings.inactiveButtonClass),this._buttonElement.disabled=!0}_enableButton(){this._buttonElement.classList.remove(this._settings.inactiveButtonClass),this._buttonElement.disabled=!1}_setEventListeners(){this._toggleSubmitButton(),this._formInputElements.forEach((e=>{e.addEventListener("input",(()=>{this._checkFieldValidity(e),this._toggleSubmitButton()}))}))}}const r=document.querySelector(".profile__name"),a=document.querySelector(".profile__description"),o=new n({modalSelector:"#edit-profile-modal",onSubmitCallback:e=>{r.textContent=e["profile-name"],a.textContent=e["profile-description"]}});o.setDefaultInputs({"profile-name":r.textContent,"profile-description":a.textContent}),new l(e,o.getFormElement()).enableValidation();const c=new n({modalSelector:"#post-modal",onSubmitCallback:e=>{const t=d({title:e["post-title"],imageLink:e["post-image-link"]});_.addItem(t)}});c.setPlaceholderInputs({"post-image-link":"Paste a link to the picture","post-caption":"Type your caption"}),new l(e,c.getFormElement()).enableValidation();const m=new class extends s{constructor(e){let{modalSelector:t}=e;super({modalSelector:t}),this._previewImage=document.querySelector(".modal__preview-image"),this._previewTitle=document.querySelector("#preview-title"),this._previewTitleText=""}populatePreview(e){let{imageUrl:t,imageAlt:i,titleText:s}=e;this._setPreviewTitle(s),this._setPreviewImage(t),this._setPreviewImageAlt(i)}_setPreviewImage(e){this.imageUrl=e,this._previewImage.setAttribute("src",e)}_setPreviewTitle(e){this._previewTitleText=e,this._previewTitle.textContent=this._previewTitleText}_setPreviewImageAlt(e){e?this._previewImage.setAttribute("alt",e):this._previewImage.setAttribute("alt",this._previewTitleText)}clear(){this.setPreviewImage({imageUrl:"",imageAlt:""}),this.setPreviewTitle("")}}({modalSelector:"#preview-modal"}),_=new class{constructor(e){let{items:t,renderer:i,containerSelector:s}=e;this._items=t,this._renderer=i,this._containerSelector=s,this._container=document.querySelector(this._containerSelector)}renderItems(){this._items.forEach((e=>{this._renderer(e)}))}addItem(e){console.log(e),this._items.push(e),this._container.append(e)}_clear(){this._items.internalHTML=""}getLastElement(){return console.log(this._container),console.log(this._items[this._items.length-1]),this._items[this._items.length-1]}}({items:[{title:"5-minute Dungeon",imageLink:"https://vigilantebar.com/wp-content/uploads/2022/08/5-Minute-Dungeon-scaled.jpg"},{title:"7 Wonders",imageLink:"https://vigilantebar.com/wp-content/uploads/2020/06/pic860217.jpg"},{title:"Abduction",imageLink:"https://vigilantebar.com/wp-content/uploads/2023/08/71Z8QTM8qXL._AC_UF8941000_QL80_.jpg"},{title:"Agricola",imageLink:"https://vigilantebar.com/wp-content/uploads/2022/08/Agricola.jpg"},{title:"Black Fleet",imageLink:"https://vigilantebar.com/wp-content/uploads/2022/08/Black-Fleet.jpg"},{title:"Call to Adventure",imageLink:"https://vigilantebar.com/wp-content/uploads/2022/08/Call-to-Adventure-scaled.jpg"}],renderer:e=>{const t=d(e);_.addItem(t)},containerSelector:".cards__list"});function d(e){let{title:t,imageLink:s}=e;const n=new i({title:t,imageLink:s,imageClickManager:()=>{m.populatePreview({imageUrl:n.imageLink,imageAlt:n.imageAltText,titleText:n.titleText}),m.open()}});return n.getView()}_.renderItems(),document.querySelector(".profile__edit-button").addEventListener("click",(function(){o.open()})),document.querySelector(".profile__add-button").addEventListener("click",(function(){c.open()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QXZCQTRFLEVBQVl3QixjQUtSekksU0FBU0MsY0FBYyx5QkFBeUJpQixpQkFBaUIsU0FJckUsV0FDSTJGLEVBQWdCakUsTUFDcEIsSUFMSTVDLFNBQVNDLGNBQWMsd0JBQXdCaUIsaUJBQWlCLFNBT3BFLFdBQ0k0RixFQUFZbEUsTUFDaEIsRyIsInNvdXJjZXMiOlsid2VicGFjazovL3Nwb3RzLy4vc3JjL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly9zcG90cy8uL3NyYy9jb21wb25lbnRzL0NhcmRFbGVtZW50LmpzIiwid2VicGFjazovL3Nwb3RzLy4vc3JjL2NvbXBvbmVudHMvTW9kYWwuanMiLCJ3ZWJwYWNrOi8vc3BvdHMvLi9zcmMvY29tcG9uZW50cy9Nb2RhbFdpdGhGb3JtLmpzIiwid2VicGFjazovL3Nwb3RzLy4vc3JjL3NjcmlwdHMvdmFsaWRhdGlvbi5qcyIsIndlYnBhY2s6Ly9zcG90cy8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly9zcG90cy8uL3NyYy9jb21wb25lbnRzL01vZGFsUHJldmlld0ltYWdlLmpzIiwid2VicGFjazovL3Nwb3RzLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY29uc3QgdmFsaWRhdGlvblNldHRpbmdzID0ge1xyXG4gICAgZm9ybVNlbGVjdG9yOiBcIi5tb2RhbF9fZm9ybVwiLFxyXG4gICAgaW5wdXRTZWxlY3RvcjogXCIubW9kYWxfX2lucHV0XCIsXHJcbiAgICBpbnB1dEVycm9yU3R5bGU6IFwibW9kYWxfX2lucHV0X3R5cGVfZXJyb3JcIixcclxuICAgIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5tb2RhbF9fc3VibWl0LWJ1dHRvblwiLFxyXG4gICAgc3VibWl0QnV0dG9uTmFtZTogXCJtb2RhbF9fc3VibWl0LWJ1dHRvblwiLFxyXG4gICAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJtb2RhbF9fYnV0dG9uX2Rpc2FibGVkXCIsXHJcbiAgICBpbnB1dEVycm9yQ2xhc3M6IFwiLm1vZGFsX19pbnB1dF90eXBlX2Vycm9yXCIsXHJcbiAgICBlcnJvckNsYXNzOiBcIm1vZGFsX19lcnJvcl92aXNpYmxlXCIsXHJcbiAgICBkZWJ1Z2dpbmc6IHRydWUsXHJcbiAgfVxyXG5cclxuICBleHBvcnQgY29uc3QgaW5pdGlhbENhcmRzID0gW1xyXG4gICAge3RpdGxlOiBcIjUtbWludXRlIER1bmdlb25cIiwgaW1hZ2VMaW5rOiBcImh0dHBzOi8vdmlnaWxhbnRlYmFyLmNvbS93cC1jb250ZW50L3VwbG9hZHMvMjAyMi8wOC81LU1pbnV0ZS1EdW5nZW9uLXNjYWxlZC5qcGdcIn0sXHJcbiAgICB7dGl0bGU6IFwiNyBXb25kZXJzXCIsIGltYWdlTGluazogXCJodHRwczovL3ZpZ2lsYW50ZWJhci5jb20vd3AtY29udGVudC91cGxvYWRzLzIwMjAvMDYvcGljODYwMjE3LmpwZ1wifSxcclxuICAgIHt0aXRsZTogXCJBYmR1Y3Rpb25cIiwgaW1hZ2VMaW5rOiBcImh0dHBzOi8vdmlnaWxhbnRlYmFyLmNvbS93cC1jb250ZW50L3VwbG9hZHMvMjAyMy8wOC83MVo4UVRNOHFYTC5fQUNfVUY4OTQxMDAwX1FMODBfLmpwZ1wifSxcclxuICAgIHt0aXRsZTogXCJBZ3JpY29sYVwiLCBpbWFnZUxpbms6IFwiaHR0cHM6Ly92aWdpbGFudGViYXIuY29tL3dwLWNvbnRlbnQvdXBsb2Fkcy8yMDIyLzA4L0Fncmljb2xhLmpwZ1wifSxcclxuICAgIHt0aXRsZTogXCJCbGFjayBGbGVldFwiLCBpbWFnZUxpbms6IFwiaHR0cHM6Ly92aWdpbGFudGViYXIuY29tL3dwLWNvbnRlbnQvdXBsb2Fkcy8yMDIyLzA4L0JsYWNrLUZsZWV0LmpwZ1wifSxcclxuICAgIHt0aXRsZTogXCJDYWxsIHRvIEFkdmVudHVyZVwiLCBpbWFnZUxpbms6IFwiaHR0cHM6Ly92aWdpbGFudGViYXIuY29tL3dwLWNvbnRlbnQvdXBsb2Fkcy8yMDIyLzA4L0NhbGwtdG8tQWR2ZW50dXJlLXNjYWxlZC5qcGdcIn1cclxuXVxyXG5cclxuZXhwb3J0IGNvbnN0IGNhcmRTZWxlY3RvcnMgPSB7XHJcbiAgdGVtcGxhdGU6ICcjY2FyZCcsXHJcbiAgaW1hZ2U6ICcuY2FyZF9faW1hZ2UnLCBcclxuICBsaWtlQnV0dG9uOiAnLmNhcmRfX2xpa2UtYnV0dG9uJyxcclxuICBkZWxldGVCdXR0b246ICcuY2FyZF9fZGVsZXRlLWJ1dHRvbicsXHJcbiAgY2FyZFRpdGxlOiAnLmNhcmRfX3RpdGxlJyxcclxuICB1bmxpa2VkSW1hZ2U6ICcuY2FyZF9fdW5saWtlZC1pbWFnZScsXHJcbiAgbGlrZWRJbWFnZTogJy5jYXJkX19saWtlZC1pbWFnZScsXHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBjYXJkU2V0dGluZ3MgPSB7XHJcbiAgZGVmYXVsdFRpdGxlOiBcInVubmFtZWQgY2FyZFwiLFxyXG4gIGRlZmF1bHRJbWFnZUFsdDogXCJhbiBpbWFnZVwiXHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBtb2RhbFNlbGVjdG9ycyA9IHtcclxuICBuZXdQb3N0TW9kYWw6IFwiI3Bvc3QtbW9kYWxcIixcclxuICBlZGl0UHJvZmlsZU1vZGFsOiBcIiNlZGl0LXByb2ZpbGUtbW9kYWxcIixcclxuICBvcGVuTW9kYWxDbGFzczogXCJtb2RhbF9vcGVuXCIsXHJcbiAgbW9kYWxFbGVtZW50Q2xhc3M6IFwibW9kYWxcIixcclxuICBtb2RhbENsb3NlQnV0dG9uOiBcIi5tb2RhbF9fY2xvc2UtYnV0dG9uXCIsXHJcbiAgcHJldmlld01vZGFsSW1hZ2U6IFwiLm1vZGFsX19wcmV2aWV3LWltYWdlXCIsXHJcbiAgcHJldmlld01vZGFsVGl0bGU6IFwiI3ByZXZpZXctdGl0bGVcIixcclxuXHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBuZXdQb3N0TW9kYWxQbGFjZWhvbGRlcnMgPSB7XHJcbiAgXCJwb3N0LWltYWdlLWxpbmtcIjogJ1Bhc3RlIGEgbGluayB0byB0aGUgcGljdHVyZScsXHJcbiAgXCJwb3N0LWNhcHRpb25cIjogJ1R5cGUgeW91ciBjYXB0aW9uJ1xyXG59IiwiaW1wb3J0IHsgY2FyZFNlbGVjdG9ycyB9IGZyb20gXCIuLi91dGlscy9jb25zdGFudHMuanNcIjtcclxuaW1wb3J0IHsgY2FyZFNldHRpbmdzIH0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FyZEVsZW1lbnQge1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHsgdGl0bGUsIGltYWdlTGluaywgaW1hZ2VDbGlja01hbmFnZXIgfSkge1xyXG5cclxuICAgICAgICB0aGlzLl9jYXJkVGVtcGxhdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNhcmRTZWxlY3RvcnMudGVtcGxhdGUpO1xyXG4gICAgICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gdGhpcy5fY2FyZFRlbXBsYXRlLmNvbnRlbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkXCIpLmNsb25lTm9kZSh0cnVlKTtcclxuICAgICAgICB0aGlzLl9jYXJkSW1hZ2UgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKGNhcmRTZWxlY3RvcnMuaW1hZ2UpOyBcclxuICAgICAgICB0aGlzLl9saWtlQnV0dG9uID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihjYXJkU2VsZWN0b3JzLmxpa2VCdXR0b24pO1xyXG4gICAgICAgIHRoaXMuX2RlbGV0ZUJ1dHRvbiA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoY2FyZFNlbGVjdG9ycy5kZWxldGVCdXR0b24pO1xyXG4gICAgICAgIHRoaXMuX3RpdGxlRWxlbWVudCA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoY2FyZFNlbGVjdG9ycy5jYXJkVGl0bGUpO1xyXG5cclxuICAgICAgICB0aGlzLl9jYXJkVW5saWtlZEltYWdlID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihjYXJkU2VsZWN0b3JzLnVubGlrZWRJbWFnZSk7XHJcbiAgICAgICAgdGhpcy5fY2FyZExpa2VkSW1hZ2UgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKGNhcmRTZWxlY3RvcnMubGlrZWRJbWFnZSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgdGhpcy5fb25EZWxldGVDbGljayA9IHRoaXMuX29uRGVsZXRlQ2xpY2suYmluZCh0aGlzKTsgXHJcblxyXG4gICAgICAgIHRoaXMuX2ltYWdlQ2xpY2tNYW5hZ2VyID0gaW1hZ2VDbGlja01hbmFnZXI7XHJcblxyXG4gICAgICAgIHRoaXMuc2V0VGl0bGUodGl0bGUpO1xyXG4gICAgICAgIHRoaXMuc2V0Q2FyZEltYWdlKGltYWdlTGluayk7XHJcbiAgICAgICAgdGhpcy5zZXRDYXJkSW1hZ2VBbHQodGl0bGUpO1xyXG4gICAgICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICAgICAgXHJcbiAgICB9XHJcblxyXG4gICAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgICAgIHRoaXMuX2NhcmRJbWFnZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsKCkgPT4gdGhpcy5vbkltYWdlQ2xpY2soKSk7XHJcbiAgICAgICAgdGhpcy5fbGlrZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsKCkgPT4gdGhpcy5vbkxpa2VDbGljaygpKTtcclxuICAgICAgICB0aGlzLl9kZWxldGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCgpID0+IHRoaXMuX29uRGVsZXRlQ2xpY2soKSk7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0VGl0bGUodGl0bGUpIHtcclxuICAgICAgICBpZih0eXBlb2YgdGl0bGUgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgIHRoaXMudGl0bGVUZXh0ID0gdGl0bGU7XHJcbiAgICAgICAgICAgIHRoaXMuX3RpdGxlRWxlbWVudC50ZXh0Q29udGVudCA9IHRoaXMuX3RpdGxlVGV4dDtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgTmV3IGNhcmQgdGl0bGUgaXMgbm90IGEgc3RyaW5nLiBTZXR0aW5nIHRvIGRlZmF1bHQuYCk7XHJcbiAgICAgICAgICAgIHRoaXMudGl0bGVUZXh0ID0gY2FyZFNldHRpbmdzLmRlZmF1bHRUaXRsZTtcclxuICAgICAgICAgICAgdGhpcy5fdGl0bGVFbGVtZW50LnRleHRDb250ZW50ID0gdGhpcy50aXRsZVRleHQ7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHNldENhcmRJbWFnZShpbWFnZUxpbmspIHtcclxuICAgICAgICB0aGlzLmltYWdlTGluayA9IGltYWdlTGluaztcclxuICAgICAgICB0aGlzLl9jYXJkSW1hZ2Uuc2V0QXR0cmlidXRlKCdzcmMnLCB0aGlzLmltYWdlTGluayk7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0Q2FyZEltYWdlQWx0KGFsdFRleHQpIHtcclxuICAgICAgICB0aGlzLmltYWdlQWx0VGV4dCA9IGFsdFRleHQgPyBhbHRUZXh0IDogdGhpcy50aXRsZVRleHQ7IFxyXG4gICAgICAgIHRoaXMuX2NhcmRJbWFnZS5zZXRBdHRyaWJ1dGUoJ2FsdCcsIHRoaXMuaW1hZ2VBbHRUZXh0KTtcclxuICAgIH1cclxuXHJcbiAgICBvbkxpa2VDbGljaygpIHtcclxuICAgICAgICB0aGlzLmlzTGlrZUFjdGl2ZSgpID8gdGhpcy5kZWFjdGl2YXRlTGlrZUJ1dHRvbigpIDogdGhpcy5hY3RpdmF0ZUxpa2VCdXR0b24oKTtcclxuICAgIH1cclxuXHJcbiAgICBpc0xpa2VBY3RpdmUoKSB7XHJcbiAgICAgICAgcmV0dXJuICF0aGlzLl9jYXJkTGlrZWRJbWFnZS5jbGFzc0xpc3QuY29udGFpbnMoJ2NhcmRfX2xpa2VkLWltYWdlX19pbmFjdGl2ZScpO1xyXG4gICAgfVxyXG5cclxuICAgIGFjdGl2YXRlTGlrZUJ1dHRvbigpIHtcclxuICAgICAgICB0aGlzLl9jYXJkTGlrZWRJbWFnZS5jbGFzc0xpc3QucmVtb3ZlKCdjYXJkX19saWtlZC1pbWFnZV9faW5hY3RpdmUnKTtcclxuICAgICAgICB0aGlzLl9jYXJkVW5saWtlZEltYWdlLmNsYXNzTGlzdC5hZGQoJ2NhcmRfX3VubGlrZWQtaW1hZ2VfX2luYWN0aXZlJyk7XHJcbiAgICB9XHJcblxyXG4gICAgZGVhY3RpdmF0ZUxpa2VCdXR0b24oKSB7XHJcbiAgICAgICAgdGhpcy5fY2FyZExpa2VkSW1hZ2UuY2xhc3NMaXN0LmFkZCgnY2FyZF9fbGlrZWQtaW1hZ2VfX2luYWN0aXZlJyk7XHJcbiAgICAgICAgdGhpcy5fY2FyZFVubGlrZWRJbWFnZS5jbGFzc0xpc3QucmVtb3ZlKCdjYXJkX191bmxpa2VkLWltYWdlX19pbmFjdGl2ZScpO1xyXG4gICAgfVxyXG5cclxuICAgIF9yZW1vdmUoKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2codGhpcy5fY2FyZEVsZW1lbnQpO1xyXG4gICAgICAgIHRoaXMuX2NhcmRFbGVtZW50LnJlbW92ZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIF9vbkRlbGV0ZUNsaWNrKCkge1xyXG4gICAgICAgIHRoaXMuX3JlbW92ZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIG9uSW1hZ2VDbGljaygpIHtcclxuICAgICAgICB0aGlzLl9pbWFnZUNsaWNrTWFuYWdlcigpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFZpZXcoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NhcmRFbGVtZW50O1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCB7IG1vZGFsU2VsZWN0b3JzIH0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xyXG5pbXBvcnQgeyBjYXJkU2V0dGluZ3MgfSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNb2RhbCB7XHJcbiAgICBjb25zdHJ1Y3RvciggeyBtb2RhbFNlbGVjdG9yIH0gKSB7XHJcbiAgICAgICAgdGhpcy5fbW9kYWxFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihtb2RhbFNlbGVjdG9yKTtcclxuICAgICAgICB0aGlzLl9tb2RhbFNlbGVjdG9yID0gbW9kYWxTZWxlY3RvcjtcclxuICAgICAgICB0aGlzLl9oYW5kbGVFc2NhcGVDbG9zZSA9IHRoaXMuX2hhbmRsZUVzY2FwZUNsb3NlLmJpbmQodGhpcyk7IFxyXG4gICAgICAgIHRoaXMuX2Nsb3NlQnV0dG9uID0gdGhpcy5fbW9kYWxFbGVtZW50LnF1ZXJ5U2VsZWN0b3IobW9kYWxTZWxlY3RvcnMubW9kYWxDbG9zZUJ1dHRvbik7XHJcblxyXG4gICAgICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgb3BlbigpIHtcclxuICAgICAgICB0aGlzLl9tb2RhbEVsZW1lbnQuY2xhc3NMaXN0LmFkZChtb2RhbFNlbGVjdG9ycy5vcGVuTW9kYWxDbGFzcyk7XHJcbiAgICAgICAgdGhpcy5fc2V0RXNjYXBlTGlzdGVuZXIodHJ1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgY2xvc2UoKSB7XHJcbiAgICAgICAgdGhpcy5fbW9kYWxFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUobW9kYWxTZWxlY3RvcnMub3Blbk1vZGFsQ2xhc3MpO1xyXG4gICAgICAgIHRoaXMuX3NldEVzY2FwZUxpc3RlbmVyKGZhbHNlKTtcclxuICAgIH1cclxuXHJcbiAgICBfaGFuZGxlRXNjYXBlQ2xvc2UoZXZ0KSB7XHJcbiAgICAgICAgaWYoZXZ0LmtleSA9PT0gJ0VzY2FwZScpIHtcclxuICAgICAgICAgICAgdGhpcy5jbG9zZSgpOyBcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIF9zZXRFc2NhcGVMaXN0ZW5lcihib29sKSB7XHJcbiAgICAgICAgYm9vbCA/IGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLHRoaXMuX2hhbmRsZUVzY2FwZUNsb3NlKSA6IGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLHRoaXMuX2hhbmRsZUVzY2FwZUNsb3NlKTtcclxuICAgIH1cclxuXHJcbiAgICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICAgICAgdGhpcy5fY2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLmNsb3NlKCkpO1xyXG4gICAgICAgIHRoaXMuX21vZGFsRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsKGV2dCkgPT4gdGhpcy5faGFuZGxlTW9kYWxPdmVybGF5Q2xpY2soZXZ0KSk7XHJcbiAgICAgICAgXHJcbiAgICB9XHJcblxyXG4gICAgX2hhbmRsZU1vZGFsT3ZlcmxheUNsaWNrKGV2dCkge1xyXG4gICAgICAgIGlmKGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKG1vZGFsU2VsZWN0b3JzLm1vZGFsRWxlbWVudENsYXNzKSkgdGhpcy5jbG9zZSgpO1xyXG4gICAgfVxyXG5cclxufSIsImltcG9ydCBNb2RhbCBmcm9tIFwiLi9Nb2RhbC5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTW9kYWxXaXRoRm9ybSBleHRlbmRzIE1vZGFsIHtcclxuICAgIGNvbnN0cnVjdG9yKHsgbW9kYWxTZWxlY3Rvciwgb25TdWJtaXRDYWxsYmFjayB9ICkge1xyXG4gICAgICAgIHN1cGVyKHsgbW9kYWxTZWxlY3RvciB9KTtcclxuICAgICAgICB0aGlzLl9vblN1Ym1pdENhbGxiYWNrID0gb25TdWJtaXRDYWxsYmFjaztcclxuICAgICAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSB0aGlzLl9tb2RhbEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fc3VibWl0LWJ1dHRvblwiKTtcclxuICAgICAgICB0aGlzLl9pbnB1dEZpZWxkcyA9IHRoaXMuX21vZGFsRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcubW9kYWxfX2lucHV0Jyk7XHJcbiAgICAgICAgdGhpcy5fZm9ybSA9IHRoaXMuX21vZGFsRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtXCIpO1xyXG4gICAgICAgIHRoaXMuX2N1cnJlbnRQcm9maWxlTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19uYW1lJyk7XHJcbiAgICAgICAgdGhpcy5fY3VycmVudFByb2ZpbGVEZXNjcmlwdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19kZXNjcmlwdGlvbicpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldEZvcm1FbGVtZW50KCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9mb3JtO1xyXG4gICAgfVxyXG5cclxuICAgIF9yZXNldCgpIHtcclxuICAgICAgICB0aGlzLl9pbnB1dEZpZWxkcy5mb3JFYWNoKChmaWVsZCkgPT4ge1xyXG4gICAgICAgICAgICBmaWVsZC52YWx1ZSA9IFwiXCI7XHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICAgICAgc3VwZXIuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICAgICAgdGhpcy5fbW9kYWxFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4gdGhpcy5fb25TdWJtaXQoZXZ0KSk7XHJcbiAgICB9XHJcblxyXG4gICAgX2dldElucHV0VmFsdWVzKCkge1xyXG4gICAgICAgIGNvbnN0IGlucHV0VmFsdWVzID0ge307IFxyXG4gICAgICAgIHRoaXMuX2lucHV0RmllbGRzLmZvckVhY2goKGZpZWxkKSA9PiB7XHJcbiAgICAgICAgICAgIGlucHV0VmFsdWVzW2ZpZWxkLm5hbWVdID0gZmllbGQudmFsdWU7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXR1cm4gaW5wdXRWYWx1ZXM7XHJcbiAgICB9XHJcblxyXG4gICAgX29uU3VibWl0KGV2dCkge1xyXG4gICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIHRoaXMuX29uU3VibWl0Q2FsbGJhY2sodGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSk7XHJcbiAgICAgICAgdGhpcy5fcmVzZXQoKTtcclxuICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHNldERlZmF1bHRJbnB1dHMoZGVmYXVsdHNPYmplY3QpIHtcclxuICAgICAgICB0aGlzLl9pbnB1dEZpZWxkcy5mb3JFYWNoKChmaWVsZCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoZGVmYXVsdHNPYmplY3RbZmllbGQubmFtZV0pIGZpZWxkLnZhbHVlID0gZGVmYXVsdHNPYmplY3RbZmllbGQubmFtZV07XHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICBzZXRQbGFjZWhvbGRlcklucHV0cyhkZWZhdWx0c09iamVjdCkge1xyXG4gICAgICAgIHRoaXMuX2lucHV0RmllbGRzLmZvckVhY2goKGZpZWxkKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGZpZWxkLm5hbWUpO1xyXG4gICAgICAgICAgICBpZiAoZGVmYXVsdHNPYmplY3RbZmllbGQubmFtZV0pIGZpZWxkLnNldEF0dHJpYnV0ZSgncGxhY2Vob2xkZXInLCBkZWZhdWx0c09iamVjdFtmaWVsZC5uYW1lXSk7XHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuXHJcbn0iLCJcclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XHJcbiAgY29uc3RydWN0b3Ioc2V0dGluZ3MsIGZvcm1FbGVtZW50KSB7XHJcbiAgICAgIHRoaXMuX3NldHRpbmdzID0gc2V0dGluZ3M7XHJcbiAgICAgIHRoaXMuX2Zvcm1FbGVtZW50ID0gZm9ybUVsZW1lbnQ7XHJcbiAgICAgIHRoaXMuX3NldEZvcm1JbnB1dEVsZW1lbnRzKCk7XHJcbiAgICAgIHRoaXMuX3NldEZvcm1CdXR0b25zKCk7XHJcblxyXG4gIH1cclxuXHJcbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcclxuICAgICAgdGhpcy5fZm9ybUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiB7XHJcbiAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIH0pO1xyXG4gICAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG4gIH1cclxuXHJcbiAgcmVzZXRWYWxpZGF0aW9uKCkge1xyXG4gICAgICB0aGlzLl9kaXNhYmxlQnV0dG9uKCk7XHJcbiAgICAgIHRoaXMuX2NsZWFyRm9ybUlucHV0RWxlbWVudHMoKTtcclxuICB9XHJcblxyXG4gIF9zaG93SW5wdXRFcnJvciA9IChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZ2V0RXJyb3JFbGVtZW50KGlucHV0RWxlbWVudCk7XHJcbiAgICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX3NldHRpbmdzLmlucHV0RXJyb3JDbGFzcyk7XHJcbiAgICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZTtcclxuICAgICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fc2V0dGluZ3MuZXJyb3JDbGFzcyk7XHJcbiAgICB9O1xyXG5cclxuICBfaGlkZUlucHV0RXJyb3IgPSAoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2dldEVycm9yRWxlbWVudChpbnB1dEVsZW1lbnQpO1xyXG4gICAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9zZXR0aW5ncy5pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9zZXR0aW5ncy5lcnJvckNsYXNzKTtcclxuICAgICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gXCJcIjtcclxuICAgIH07XHJcblxyXG4gICAgX2NoZWNrRmllbGRWYWxpZGl0eSA9IChpbnB1dEVsZW1lbnQpID0+ICB7XHJcbiAgICAgIGlmICghaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKSB7XHJcbiAgICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoXHJcbiAgICAgICAgICBpbnB1dEVsZW1lbnQsXHJcbiAgICAgICAgICBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2UsXHJcbiAgICAgICAgKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICBfZ2V0RXJyb3JFbGVtZW50KGlucHV0RWxlbWVudCkge1xyXG4gICAgcmV0dXJuIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0RWxlbWVudC5pZH0taW5wdXQtZXJyb3JgKTtcclxuICB9XHJcblxyXG4gIF9jaGVja0ludmFsaWRJbnB1dCgpIHtcclxuICAgICAgcmV0dXJuIHRoaXMuX2Zvcm1JbnB1dEVsZW1lbnRzLmV2ZXJ5KChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgICBpZihpbnB1dEVsZW1lbnQudmFsdWUubGVuZ3RoID09PSAwKSB7cmV0dXJuIGZhbHNlfTtcclxuICAgICAgICAgIHJldHVybiBpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQ7ICAgICAgICAgXHJcbiAgICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgX3NldEZvcm1JbnB1dEVsZW1lbnRzKCkge1xyXG4gICAgICB0aGlzLl9mb3JtSW5wdXRFbGVtZW50cyA9IEFycmF5LmZyb20oXHJcbiAgICAgICAgICB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX3NldHRpbmdzLmlucHV0U2VsZWN0b3IpLFxyXG4gICAgICApO1xyXG4gIH1cclxuXHJcbiAgX2NsZWFyRm9ybUlucHV0RWxlbWVudHMoKSB7XHJcbiAgICAgIHRoaXMuX2Zvcm1JbnB1dEVsZW1lbnRzLmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICAgICAgaW5wdXRFbGVtZW50LnZhbHVlID0gXCJcIjtcclxuICAgICAgfSk7XHJcbiAgfVxyXG5cclxuICBfc2V0Rm9ybUJ1dHRvbnMoKSB7XHJcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICAgICAgdGhpcy5fc2V0dGluZ3Muc3VibWl0QnV0dG9uU2VsZWN0b3IsXHJcbiAgICAgICAgKTtcclxuICB9XHJcblxyXG4gIF90b2dnbGVTdWJtaXRCdXR0b24oKSB7XHJcbiAgICAgIHRoaXMuX2NoZWNrSW52YWxpZElucHV0KCkgPyB0aGlzLl9lbmFibGVCdXR0b24oKSA6IHRoaXMuX2Rpc2FibGVCdXR0b24oKTtcclxuICB9XHJcblxyXG4gIF9kaXNhYmxlQnV0dG9uKCkge1xyXG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fc2V0dGluZ3MuaW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSB0cnVlO1xyXG4gIH1cclxuXHJcbiAgX2VuYWJsZUJ1dHRvbigpIHtcclxuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX3NldHRpbmdzLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmRpc2FibGVkID0gZmFsc2U7XHJcbiAgfVxyXG5cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7ICAgXHJcbiAgICAgIHRoaXMuX3RvZ2dsZVN1Ym1pdEJ1dHRvbigpO1xyXG4gICAgXHJcbiAgICAgIHRoaXMuX2Zvcm1JbnB1dEVsZW1lbnRzLmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xyXG4gICAgICAgICAgdGhpcy5fY2hlY2tGaWVsZFZhbGlkaXR5KGlucHV0RWxlbWVudCk7XHJcbiAgICAgICAgICB0aGlzLl90b2dnbGVTdWJtaXRCdXR0b24oKTtcclxuICAgICAgICB9KTtcclxuICAgICAgfSk7XHJcbiAgICB9O1xyXG59XHJcblxyXG5cclxuLy8gZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZW5hYmxlVmFsaWRhdGlvbihzZXR0aW5ncykge1xyXG4vLyAgIGNvbnN0IGZvcm1zQXJyYXkgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoc2V0dGluZ3MuZm9ybVNlbGVjdG9yKSk7XHJcbi8vICAgY29uc3QgaW5wdXRGaWVsZHMgPSBnZXRJbnB1dEZpZWxkc0Zyb21Gb3Jtcyhmb3Jtc0FycmF5KTtcclxuLy8gICBzZXRBbGxGaWVsZFZhbGlkYXRpb25MaXN0ZW5lcnMoaW5wdXRGaWVsZHMpO1xyXG4vLyB9O1xyXG5cclxuLy8gZnVuY3Rpb24gb25GaWVsZElucHV0KGV2ZW50KSB7XHJcbi8vICAgdmFsaWRhdGlvbkRlYnVnKGV2ZW50LCBhcmd1bWVudHMuY2FsbGVlLm5hbWUpO1xyXG4vLyAgIGNvbnN0IGlucHV0VmFsaWRpdHkgPSBjaGVja0lucHV0VmFsaWRpdHkoZXZlbnQpO1xyXG4vLyAgIGNvbnN0IGlucHV0RmllbGQgPSBldmVudC50YXJnZXQ7XHJcbi8vICAgY29uc3Qgc3VibWl0QnV0dG9uID0gZ2V0U3VibWl0QnV0dG9uRnJvbUlucHV0RmllbGQoaW5wdXRGaWVsZCk7XHJcbi8vICAgY29uc3QgaW5wdXRGb3JtID0gaW5wdXRGaWVsZC5jbG9zZXN0KCdmb3JtJyk7XHJcbi8vICAgY2hlY2tGaWVsZElucHV0RXJyb3JzKGlucHV0RmllbGQsIGlucHV0VmFsaWRpdHkpOyBcclxuLy8gICBzdWJtaXRCdXR0b25TdGF0ZUhhbmRsZXIoc3VibWl0QnV0dG9uLCBjaGVja0Zvcm1JbnB1dEZpZWxkVmFsaWRpdHkoaW5wdXRGb3JtKSk7XHJcbi8vIH1cclxuXHJcbi8vIGZ1bmN0aW9uIHJlc2V0TW9kYWxGb3JtKG1vZGFsKSB7XHJcbi8vICAgY29uc3QgaW5wdXRGaWVsZHMgPSBnZXRGb3JtSW5wdXRGaWVsZHNBcnJheShtb2RhbC5xdWVyeVNlbGVjdG9yKHNldHRpbmdzLmZvcm1TZWxlY3RvcikpO1xyXG4vLyAgIGlucHV0RmllbGRzLmZvckVhY2goaW5wdXRGaWVsZCA9PiByZXNldElucHV0RmllbGQoaW5wdXRGaWVsZCkpO1xyXG4vLyAgIGRpc2FibGVTdWJtaXRCdXR0b24obW9kYWwucXVlcnlTZWxlY3RvcihzZXR0aW5ncy5zdWJtaXRCdXR0b25TZWxlY3RvcikpO1xyXG4vLyB9XHJcblxyXG4vLyBmdW5jdGlvbiByZXNldElucHV0RmllbGQoaW5wdXRGaWVsZCkge1xyXG4vLyAgIGlucHV0RmllbGQudGV4dENvbnRlbnQgPSBcIlwiO1xyXG4vLyAgIGRlYWN0aXZhdGVWYWxpZGF0aW9uRXJyb3IoaW5wdXRGaWVsZCk7XHJcbi8vIH1cclxuXHJcbi8vIGZ1bmN0aW9uIGNoZWNrRm9ybUZpZWxkSW5wdXRFcnJvcnMoZm9ybSkge1xyXG4vLyAgIGdldEZvcm1JbnB1dEZpZWxkc0FycmF5KGZvcm0pLmZvckVhY2goZmllbGQgPT4gY2hlY2tGaWVsZElucHV0RXJyb3JzKGZpZWxkKSk7XHJcbi8vIH1cclxuXHJcbi8vIGZ1bmN0aW9uIGNoZWNrRmllbGRJbnB1dEVycm9ycyhpbnB1dEZpZWxkLCBpbnB1dFZhbGlkaXR5KSB7XHJcbi8vICAgaW5wdXRWYWxpZGl0eSA/IGRlYWN0aXZhdGVWYWxpZGF0aW9uRXJyb3IoaW5wdXRGaWVsZCkgOiBhY3RpdmF0ZVZhbGlkYXRpb25FcnJvcihpbnB1dEZpZWxkKTtcclxuLy8gfVxyXG5cclxuLy8gZnVuY3Rpb24gc3VibWl0QnV0dG9uU3RhdGVIYW5kbGVyKHN1Ym1pdEJ1dHRvbiwgc3RhdGVCb29sKSB7XHJcbi8vICAgc3RhdGVCb29sID8gZW5hYmxlU3VibWl0QnV0dG9uKHN1Ym1pdEJ1dHRvbikgOiBkaXNhYmxlU3VibWl0QnV0dG9uKHN1Ym1pdEJ1dHRvbik7IFxyXG4vLyB9XHJcblxyXG4vLyBmdW5jdGlvbiB1cGRhdGVTdWJtaXRCdXR0b25Gcm9tRm9ybVZhbGlkaXR5KGZvcm0pIHtcclxuLy8gICAvLyB2YWxpZGF0aW9uRGVidWcoZm9ybSwgYXJndW1lbnRzLmNhbGxlZS5uYW1lKTtcclxuLy8gICBjb25zb2xlLmxvZyhjaGVja0Zvcm1JbnB1dEZpZWxkVmFsaWRpdHkoZm9ybSkpO1xyXG4vLyAgIHN1Ym1pdEJ1dHRvblN0YXRlSGFuZGxlcihnZXRTdWJtaXRCdXR0b25Gcm9tRm9ybShmb3JtKSwgY2hlY2tGb3JtSW5wdXRGaWVsZFZhbGlkaXR5KGZvcm0pKTtcclxuLy8gfVxyXG5cclxuLy8gZnVuY3Rpb24gY2hlY2tGb3JtSW5wdXRGaWVsZFZhbGlkaXR5KGZvcm0pIHtcclxuLy8gICBjb25zdCBpbnB1dEZpZWxkQXJyYXkgPSBnZXRGb3JtSW5wdXRGaWVsZHNBcnJheShmb3JtKTtcclxuLy8gICAvLyB2YWxpZGF0aW9uRGVidWcoY2hlY2tJbnB1dEZpZWxkVmFsaWRpdHkoaW5wdXRGaWVsZEFycmF5KSAmJiBjaGVja0lucHV0RmllbGRzRmlsbGVkKGlucHV0RmllbGRBcnJheSksIGFyZ3VtZW50cy5jYWxsZWUubmFtZSk7XHJcbi8vICAgaWYoIWNoZWNrSW5wdXRGaWVsZHNGaWxsZWQpIHtcclxuLy8gICAgIHJldHVybiBmYWxzZTtcclxuLy8gICB9XHJcbi8vICAgcmV0dXJuIGNoZWNrSW5wdXRGaWVsZFZhbGlkaXR5KGlucHV0RmllbGRBcnJheSk7XHJcbi8vIH1cclxuXHJcbi8vIGZ1bmN0aW9uIGNoZWNrSW5wdXRGaWVsZFZhbGlkaXR5KGlucHV0RmllbGRBcnJheSkge1xyXG4vLyAgIHJldHVybiBpbnB1dEZpZWxkQXJyYXkuZXZlcnkoKGlucHV0RmllbGQpID0+IHtcclxuLy8gICAgIHJldHVybiBpbnB1dEZpZWxkLnZhbGlkaXR5LnZhbGlkO1xyXG4vLyAgIH0pO1xyXG4vLyB9XHJcblxyXG4vLyBmdW5jdGlvbiBjaGVja0lucHV0RmllbGRzRmlsbGVkKGlucHV0RmllbGRBcnJheSkge1xyXG4vLyAgIHJldHVybiBpbnB1dEZpZWxkQXJyYXkuZXZlcnkoKGlucHV0RmllbGQpID0+IHtcclxuLy8gICAgIGNvbnNvbGUubG9nKGlucHV0RmllbGQudmFsdWUpO1xyXG4vLyAgICAgcmV0dXJuICEhaW5wdXRGaWVsZC52YWx1ZTtcclxuLy8gICB9KTtcclxuLy8gfVxyXG5cclxuLy8gZnVuY3Rpb24gZ2V0U3VibWl0QnV0dG9uRnJvbUZvcm0oZm9ybSkge1xyXG4vLyAgIHJldHVybiBmb3JtW3NldHRpbmdzLnN1Ym1pdEJ1dHRvbk5hbWVdO1xyXG4vLyB9XHJcblxyXG4vLyBmdW5jdGlvbiBnZXRTdWJtaXRCdXR0b25Gcm9tSW5wdXRGaWVsZChpbnB1dEZpZWxkKSB7XHJcbi8vICAgdmFsaWRhdGlvbkRlYnVnKGlucHV0RmllbGQuY2xvc2VzdChzZXR0aW5ncy5mb3JtU2VsZWN0b3IpLmlkLCBhcmd1bWVudHMuY2FsbGVlLm5hbWUpO1xyXG4vLyAgIHJldHVybiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAuJHtpbnB1dEZpZWxkLmNsb3Nlc3Qoc2V0dGluZ3MuZm9ybVNlbGVjdG9yKS5pZH0tc3VibWl0LWJ1dHRvbmApO1xyXG4vLyB9XHJcblxyXG4vLyBmdW5jdGlvbiBlbmFibGVTdWJtaXRCdXR0b24oc3VibWl0QnV0dG9uKSB7XHJcbi8vICAgY29uc29sZS5sb2coc3VibWl0QnV0dG9uKTtcclxuLy8gICBzdWJtaXRCdXR0b24uY2xhc3NMaXN0LnJlbW92ZShzZXR0aW5ncy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuLy8gICBzdWJtaXRCdXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcclxuLy8gfVxyXG5cclxuLy8gZnVuY3Rpb24gZGlzYWJsZVN1Ym1pdEJ1dHRvbihzdWJtaXRCdXR0b24pIHtcclxuLy8gICBzdWJtaXRCdXR0b24uY2xhc3NMaXN0LmFkZChzZXR0aW5ncy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuLy8gICBzdWJtaXRCdXR0b24uZGlzYWJsZWQgPSB0cnVlO1xyXG4vLyB9XHJcblxyXG4vLyBmdW5jdGlvbiBjaGVja0lucHV0VmFsaWRpdHkoZXZlbnQpIHtcclxuLy8gICB2YWxpZGF0aW9uRGVidWcoYCR7ZXZlbnQudGFyZ2V0LnZhbGlkaXR5LnZhbGlkfWAsIGFyZ3VtZW50cy5jYWxsZWUubmFtZSk7XHJcbi8vICAgcmV0dXJuIGV2ZW50LnRhcmdldC52YWxpZGl0eS52YWxpZDtcclxuLy8gfVxyXG5cclxuLy8gZnVuY3Rpb24gYWN0aXZhdGVWYWxpZGF0aW9uRXJyb3IoaW5wdXRGaWVsZCkge1xyXG4vLyAgIGNvbnN0IGVycm9yRWxlbWVudCA9IGdldFZhbGlkYXRpb25FcnJvckVsZW1lbnQoaW5wdXRGaWVsZCk7XHJcbi8vICAgY29uc3QgZXJyb3JWYWxpZGF0aW9uTWVzc2FnZSA9IGdldFZhbGlkYXRpb25FcnJvck1lc3NhZ2UoaW5wdXRGaWVsZCk7XHJcbiAgXHJcbi8vICAgYWN0aXZhdGVFcnJvckZpZWxkU3R5bGUoaW5wdXRGaWVsZCk7XHJcbi8vICAgc2V0RXJyb3JFbGVtZW50TWVzc2FnZShlcnJvckVsZW1lbnQsIGVycm9yVmFsaWRhdGlvbk1lc3NhZ2UpO1xyXG4vLyAgIHNob3dFcnJvckVsZW1lbnRNZXNzYWdlKGVycm9yRWxlbWVudCk7XHJcbi8vIH1cclxuXHJcbi8vIGZ1bmN0aW9uIGRlYWN0aXZhdGVWYWxpZGF0aW9uRXJyb3IoaW5wdXRGaWVsZCkge1xyXG4vLyAgIC8vdmFsaWRhdGlvbkRlYnVnKGAke2V2ZW50fWAsIGFyZ3VtZW50cy5jYWxsZWUubmFtZSk7XHJcbi8vICAgY29uc3QgZXJyb3JFbGVtZW50ID0gZ2V0VmFsaWRhdGlvbkVycm9yRWxlbWVudChpbnB1dEZpZWxkKTtcclxuXHJcbi8vICAgZGVhY3RpdmF0ZUVycm9yRmllbGRTdHlsZShpbnB1dEZpZWxkKTtcclxuLy8gICBzZXRFcnJvckVsZW1lbnRNZXNzYWdlKGVycm9yRWxlbWVudCwgXCJcIik7XHJcbi8vICAgaGlkZUVycm9yRWxlbWVudE1lc3NhZ2UoZXJyb3JFbGVtZW50KTtcclxuLy8gfVxyXG5cclxuLy8gZnVuY3Rpb24gYWN0aXZhdGVFcnJvckZpZWxkU3R5bGUoaW5wdXRGaWVsZCkge1xyXG4vLyAgIGlucHV0RmllbGQuY2xhc3NMaXN0LmFkZChzZXR0aW5ncy5pbnB1dEVycm9yU3R5bGUpO1xyXG4vLyB9XHJcblxyXG4vLyBmdW5jdGlvbiBkZWFjdGl2YXRlRXJyb3JGaWVsZFN0eWxlKGlucHV0RmllbGQpIHtcclxuLy8gICBpbnB1dEZpZWxkLmNsYXNzTGlzdC5yZW1vdmUoc2V0dGluZ3MuaW5wdXRFcnJvclN0eWxlKTtcclxuLy8gfVxyXG5cclxuLy8gZnVuY3Rpb24gc2hvd0Vycm9yRWxlbWVudE1lc3NhZ2UoZXJyb3JFbGVtZW50KSB7XHJcbi8vICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQoc2V0dGluZ3MuZXJyb3JDbGFzcyk7XHJcbi8vIH1cclxuXHJcbi8vIGZ1bmN0aW9uIGhpZGVFcnJvckVsZW1lbnRNZXNzYWdlKGVycm9yRWxlbWVudCkge1xyXG4vLyAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHNldHRpbmdzLmVycm9yQ2xhc3MpO1xyXG4vLyB9XHJcblxyXG4vLyBmdW5jdGlvbiBzZXRFcnJvckVsZW1lbnRNZXNzYWdlKGVycm9yRWxlbWVudCwgbWVzc2FnZSkge1xyXG4vLyAgIHJldHVybiBlcnJvckVsZW1lbnQgJiYgbWVzc2FnZSA/IGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IG1lc3NhZ2UgOiBmYWxzZTtcclxuLy8gfVxyXG5cclxuLy8gZnVuY3Rpb24gZ2V0VmFsaWRhdGlvbkVycm9yRWxlbWVudChpbnB1dEZpZWxkKSB7XHJcbi8vICAgcmV0dXJuIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYC4ke2lucHV0RmllbGQuaWR9LWlucHV0LWVycm9yYCk7XHJcbi8vIH1cclxuXHJcbi8vIGZ1bmN0aW9uIGdldFZhbGlkYXRpb25FcnJvck1lc3NhZ2UoaW5wdXRGaWVsZCkge1xyXG4vLyAgIC8vdmFsaWRhdGlvbkRlYnVnKGBnZXRWYWxpZGF0aW9uRXJyb3I6ICR7ZXZlbnQudGFyZ2V0LnZhbGlkYXRpb25NZXNzYWdlfWAsIGFyZ3VtZW50cy5jYWxsZWUubmFtZSk7XHJcbi8vICAgcmV0dXJuIGlucHV0RmllbGQudmFsaWRhdGlvbk1lc3NhZ2UgPyBpbnB1dEZpZWxkLnZhbGlkYXRpb25NZXNzYWdlIDogXCJVbmtub3duIHZhbGlkYXRpb24gZXJyb3JcIjtcclxuLy8gfVxyXG5cclxuLy8gZnVuY3Rpb24gc2V0QWxsRmllbGRWYWxpZGF0aW9uTGlzdGVuZXJzKGlucHV0RmllbGRzKSB7XHJcbi8vICAgaW5wdXRGaWVsZHMuZm9yRWFjaChmaWVsZCA9PiBzZXRGaWVsZFZhbGlkYXRpb25MaXN0ZW5lcnMoZmllbGQpKTtcclxuLy8gfVxyXG5cclxuLy8gZnVuY3Rpb24gc2V0RmllbGRWYWxpZGF0aW9uTGlzdGVuZXJzKGlucHV0RmllbGQpIHtcclxuLy8gICAgIGlucHV0RmllbGQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLG9uRmllbGRJbnB1dCk7XHJcbi8vICAgICBpbnB1dEZpZWxkLmFkZEV2ZW50TGlzdGVuZXIoJ3Bhc3RlJyxvbkZpZWxkSW5wdXQpO1xyXG4vLyB9XHJcblxyXG4vLyBmdW5jdGlvbiBnZXRJbnB1dEZpZWxkc0Zyb21Gb3Jtcyhmb3Jtc0FycmF5KSB7XHJcbi8vICAgbGV0IGlucHV0RmllbGRzQXJyYXkgPSBbXTtcclxuLy8gICBmb3Jtc0FycmF5LmZvckVhY2goKGZvcm0pID0+IGdldEZvcm1JbnB1dEZpZWxkc0FycmF5KGZvcm0pXHJcbi8vICAgICAuZm9yRWFjaChpbnB1dEZpZWxkID0+IGlucHV0RmllbGRzQXJyYXkucHVzaChpbnB1dEZpZWxkKSkpO1xyXG4vLyAgIHJldHVybiBpbnB1dEZpZWxkc0FycmF5O1xyXG4vLyB9XHJcblxyXG4vLyBmdW5jdGlvbiBnZXRGb3JtSW5wdXRGaWVsZHNBcnJheShmb3JtRWxlbWVudCkge1xyXG4vLyAgIHJldHVybiBBcnJheS5mcm9tKGZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoc2V0dGluZ3MuaW5wdXRTZWxlY3RvcikpO1xyXG4vLyB9XHJcblxyXG4vLyBmdW5jdGlvbiB2YWxpZGF0aW9uRGVidWcobG9nTWVzc2FnZSwgY2FsbGVkRnVuYyA9IFwidW5sYWJlbGVkIGZ1bmN0aW9uXCIpIHtcclxuLy8gICBpZihzZXR0aW5ncy5kZWJ1Z2dpbmcpIHtcclxuLy8gICAgIGlmICh0eXBlb2YgbG9nTWVzc2FnZSA9PT0gJ29iamVjdCcgfHwgQXJyYXkuaXNBcnJheShsb2dNZXNzYWdlKSkge1xyXG4vLyAgICAgICBjb25zb2xlLmxvZyhgPT09ZGVidWcgbG9nOiAke2NhbGxlZEZ1bmN9PT09YCk7XHJcbi8vICAgICAgIGNvbnNvbGUubG9nKGxvZ01lc3NhZ2UpO1xyXG4vLyAgICAgfSBlbHNlIHtcclxuLy8gICAgICAgY29uc29sZS5sb2coYGRlYnVnIGxvZzogJHtjYWxsZWRGdW5jfSA6OiAke2xvZ01lc3NhZ2V9YCk7XHJcbi8vICAgfVxyXG4vLyB9XHJcbi8vIH1cclxuXHJcblxyXG5cclxuXHJcbi8qXHJcbmh0dHBzOi8vdHJpcGxldGVuLmNvbS90cmFpbmVyL3dlYi9sZXNzb24vNzg3N2ZhZWYtYTA1NC00NmQ0LWJjZDUtYTQ2MDEzNzYyMWVmL3Rhc2svZTEyN2ZjOGMtMzY5NS00OTc1LWFlZTYtOTQwNTFkMGZlYmU5L1xyXG5cclxuQW5kIGF0IGxhc3QsIHdlIGFyZSByZWFkeSB0byBsZXQgeW91IGluIG9uIGEgbGl0dGxlIHNlY3JldC4gRm9ybSBmaWVsZHMgaGF2ZSBhbm90aGVyIHZhbGlkYXRpb24gYXR0cmlidXRlIGNhbGxlZCBwYXR0ZXJuLiBUaGlzIGF0dHJpYnV0ZSBhbGxvd3MgeW91IHRvIHB1dC8gYSByZWd1bGFyIGV4cHJlc3Npb24gZGlyZWN0bHkgaW50byBhIGZvcm0gZmllbGQuXHJcbjxpbnB1dCB0eXBlPVwidGV4dFwiIHBhdHRlcm49XCJeW2EtekEtWl0rJFwiPlxyXG5cclxuY29uc3Qgc2hvd0lucHV0RXJyb3IgPSAoZm9ybUVsZW1lbnQsIGlucHV0RWxlbWVudCwgZXJyb3JNZXNzYWdlKSA9PiB7XHJcbiAgY29uc3QgZXJyb3JFbGVtZW50ID0gZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xyXG4gIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiZm9ybV9faW5wdXRfdHlwZV9lcnJvclwiKTtcclxuICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBlcnJvck1lc3NhZ2U7XHJcbiAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJmb3JtX19pbnB1dC1lcnJvcl9hY3RpdmVcIik7XHJcbn07XHJcblxyXG5jb25zdCBoaWRlSW5wdXRFcnJvciA9IChmb3JtRWxlbWVudCwgaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgY29uc3QgZXJyb3JFbGVtZW50ID0gZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xyXG4gIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwiZm9ybV9faW5wdXRfdHlwZV9lcnJvclwiKTtcclxuICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcImZvcm1fX2lucHV0LWVycm9yX2FjdGl2ZVwiKTtcclxuICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBcIlwiO1xyXG59O1xyXG5cclxuY29uc3QgY2hlY2tJbnB1dFZhbGlkaXR5ID0gKGZvcm1FbGVtZW50LCBpbnB1dEVsZW1lbnQpID0+IHtcclxuICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xyXG4gICAgc2hvd0lucHV0RXJyb3IoZm9ybUVsZW1lbnQsIGlucHV0RWxlbWVudCwgaW5wdXRFbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlKTtcclxuICB9IGVsc2Uge1xyXG4gICAgaGlkZUlucHV0RXJyb3IoZm9ybUVsZW1lbnQsIGlucHV0RWxlbWVudCk7XHJcbiAgfVxyXG59O1xyXG5cclxuY29uc3QgaGFzSW52YWxpZElucHV0ID0gKGlucHV0TGlzdCkgPT4ge1xyXG4gIHJldHVybiBpbnB1dExpc3Quc29tZSgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICByZXR1cm4gIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZDtcclxuICB9KTtcclxufTtcclxuXHJcbmNvbnN0IHRvZ2dsZUJ1dHRvblN0YXRlID0gKGlucHV0TGlzdCwgYnV0dG9uRWxlbWVudCkgPT4ge1xyXG4gIGNvbnNvbGUubG9nKGhhc0ludmFsaWRJbnB1dChpbnB1dExpc3QpKTtcclxuICBpZiAoaGFzSW52YWxpZElucHV0KGlucHV0TGlzdCkpIHtcclxuICAgIGJ1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImJ1dHRvbl9pbmFjdGl2ZVwiKTtcclxuICB9IGVsc2Uge1xyXG4gICAgYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwiYnV0dG9uX2luYWN0aXZlXCIpO1xyXG4gIH1cclxufTtcclxuXHJcbmNvbnN0IHNldEV2ZW50TGlzdGVuZXJzID0gKGZvcm1FbGVtZW50KSA9PiB7XHJcbiAgY29uc3QgaW5wdXRMaXN0ID0gQXJyYXkuZnJvbShmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmZvcm1fX2lucHV0XCIpKTtcclxuICBjb25zdCBidXR0b25FbGVtZW50ID0gZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5mb3JtX19zdWJtaXRcIik7XHJcblxyXG4gIHRvZ2dsZUJ1dHRvblN0YXRlKGlucHV0TGlzdCwgYnV0dG9uRWxlbWVudCk7XHJcblxyXG4gIGlucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgICBjaGVja0lucHV0VmFsaWRpdHkoZm9ybUVsZW1lbnQsIGlucHV0RWxlbWVudCk7XHJcbiAgICAgIHRvZ2dsZUJ1dHRvblN0YXRlKGlucHV0TGlzdCwgYnV0dG9uRWxlbWVudCk7XHJcbiAgICB9KTtcclxuICB9KTtcclxufTtcclxuXHJcbmNvbnN0IGVuYWJsZVZhbGlkYXRpb24gPSAoKSA9PiB7XHJcbiAgY29uc3QgZm9ybUxpc3QgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuZm9ybVwiKSk7XHJcbiAgZm9ybUxpc3QuZm9yRWFjaCgoZm9ybUVsZW1lbnQpID0+IHtcclxuICAgIGZvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgZnVuY3Rpb24gKGV2dCkge1xyXG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGNvbnN0IGZpZWxkc2V0TGlzdCA9IEFycmF5LmZyb20oZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5mb3JtX19zZXRcIikpO1xyXG5cclxuICAgIGZpZWxkc2V0TGlzdC5mb3JFYWNoKChmaWVsZHNldCkgPT4ge1xyXG4gICAgICBzZXRFdmVudExpc3RlbmVycyhmaWVsZHNldCk7XHJcbiAgICB9KTtcclxuICB9KTtcclxufTtcclxuXHJcbmVuYWJsZVZhbGlkYXRpb24oKTtcclxuXHJcbjwhZG9jdHlwZSBodG1sPlxyXG48aHRtbCBsYW5nPVwiZW5cIj5cclxuPGhlYWQ+XHJcbiAgPG1ldGEgY2hhcnNldD1cIlVURi04XCI+XHJcbiAgPG1ldGEgbmFtZT1cInZpZXdwb3J0XCJcclxuICAgICAgICBjb250ZW50PVwid2lkdGg9ZGV2aWNlLXdpZHRoLCB1c2VyLXNjYWxhYmxlPW5vLCBpbml0aWFsLXNjYWxlPTEuMCwgbWF4aW11bS1zY2FsZT0xLjAsIG1pbmltdW0tc2NhbGU9MS4wXCI+XHJcbiAgPG1ldGEgaHR0cC1lcXVpdj1cIlgtVUEtQ29tcGF0aWJsZVwiIGNvbnRlbnQ9XCJpZT1lZGdlXCI+XHJcbiAgPHRpdGxlPkZlZWRiYWNrIEZvcm08L3RpdGxlPlxyXG4gIDxsaW5rIHJlbD1cInN0eWxlc2hlZXRcIiBocmVmPVwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS93ZWItY29kZS9tb3ZlZF9ub3JtYWxpemUuY3NzXCI+XHJcbiAgPGxpbmsgcmVsPVwic3R5bGVzaGVldFwiIGhyZWY9XCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3dlYi1jb2RlL2Zvcm0tdmFsaWRhdGlvbi9sZXNzb24tNi9tb3ZlZF9pbmRleC5jc3NcIj5cclxuPC9oZWFkPlxyXG5cclxuPGJvZHkgY2xhc3M9XCJwYWdlXCI+XHJcbjxkaXYgY2xhc3M9XCJwYWdlX19jb250ZW50XCI+XHJcbiAgPG1haW4gY2xhc3M9XCJwYWdlX19zZWN0aW9uIGNvbnRlbnRcIj5cclxuICAgIDxoMSBjbGFzcz1cImNvbnRlbnRfX3RpdGxlXCI+XHJcbiAgICAgIEZlZWRiYWNrIEZvcm1cclxuICAgIDwvaDE+XHJcbiAgICA8cCBjbGFzcz1cImNvbnRlbnRfX3N1YnRpdGxlXCI+XHJcbiAgICAgIEZpbGwgaW4gdGhlIHJlcXVpcmVkIGZpZWxkc1xyXG4gICAgPC9wPlxyXG4gICAgPGZvcm0gY2xhc3M9XCJmb3JtXCIgbm92YWxpZGF0ZT5cclxuICAgICAgPGZpZWxkc2V0IGNsYXNzPVwiZm9ybV9fc2V0XCI+XHJcbiAgICAgICAgPGxhYmVsIGNsYXNzPVwiZm9ybV9fZmllbGRcIj5cclxuICAgICAgICAgIDxpbnB1dCB0eXBlPVwiZW1haWxcIiBjbGFzcz1cImZvcm1fX2lucHV0XCIgaWQ9XCJlbWFpbC1pbnB1dFwiIHJlcXVpcmVkIG1pbmxlbmd0aD1cIjdcIj5cclxuICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZm9ybV9fcGxhY2Vob2xkZXIgZW1haWwtaW5wdXQtcGxhY2Vob2xkZXJcIj5cclxuICAgICAgICAgICAgRW1haWw6XHJcbiAgICAgICAgICA8L3NwYW4+XHJcbiAgICAgICAgICA8c3BhbiBjbGFzcz1cImZvcm1fX2lucHV0LWVycm9yIGVtYWlsLWlucHV0LWVycm9yXCI+PC9zcGFuPlxyXG4gICAgICAgIDwvbGFiZWw+XHJcbiAgICAgICAgPGxhYmVsIGNsYXNzPVwiZm9ybV9fZmllbGRcIj5cclxuICAgICAgICAgIDxpbnB1dCB0eXBlPVwicGFzc3dvcmRcIiBjbGFzcz1cImZvcm1fX2lucHV0XCIgaWQ9XCJwYXNzd29yZC1pbnB1dFwiIHJlcXVpcmVkIG1pbmxlbmd0aD1cIjdcIj5cclxuICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZm9ybV9fcGxhY2Vob2xkZXIgcGFzc3dvcmQtaW5wdXQtcGxhY2Vob2xkZXJcIj5cclxuICAgICAgICAgICAgUGFzc3dvcmQ6XHJcbiAgICAgICAgICA8L3NwYW4+XHJcbiAgICAgICAgICA8c3BhbiBjbGFzcz1cImZvcm1fX2lucHV0LWVycm9yIHBhc3N3b3JkLWlucHV0LWVycm9yXCI+PC9zcGFuPlxyXG4gICAgICAgIDwvbGFiZWw+XHJcbiAgICAgICAgPGxhYmVsIGNsYXNzPVwiZm9ybV9fZmllbGQgZm9ybV9fZmllbGRfdHlwZV9yb3dcIj5cclxuICAgICAgICAgIDxpbnB1dCBjbGFzcz1cImZvcm1fX2NoZWNrYm94IGZvcm1fX2lucHV0XCIgaWQ9XCJjaGVja2JveC1pbnB1dFwiIHR5cGU9XCJjaGVja2JveFwiIGNoZWNrZWQgcmVxdWlyZWQ+XHJcbiAgICAgICAgICA8c3BhbiBjbGFzcz1cImZvcm1fX2NoZWNrYm94LWl0ZW1cIj48L3NwYW4+XHJcbiAgICAgICAgICA8c3BhbiBjbGFzcz1cImZvcm1fX3RleHRcIj5Db25zZW50IHRvIHRoZSBwcm9jZXNzaW5nIG9mIHBlcnNvbmFsIGRhdGE8L3NwYW4+XHJcbiAgICAgICAgICA8c3BhbiBjbGFzcz1cImZvcm1fX2lucHV0LWVycm9yIGNoZWNrYm94LWlucHV0LWVycm9yXCI+PC9zcGFuPlxyXG4gICAgICAgICAgPHNwYW4gY2xhc3M9XCJmb3JtX19wbGFjZWhvbGRlciBjaGVja2JveC1pbnB1dC1wbGFjZWhvbGRlclwiPjwvc3Bhbj5cclxuICAgICAgICA8L2xhYmVsPlxyXG4gICAgICAgIDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiZm9ybV9fc3VibWl0IGZvcm1fX2J1dHRvbiBidXR0b25cIj5cclxuICAgICAgICAgIE5leHRcclxuICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgPC9maWVsZHNldD5cclxuICAgICAgPGZpZWxkc2V0IGNsYXNzPVwiZm9ybV9fc2V0XCI+XHJcbiAgICAgICAgPGJ1dHRvbiBjbGFzcz1cInRleHQtYnV0dG9uIGZvcm1fX3ByZXZpb3VzXCI+JmxhcnI7IEJhY2s8L2J1dHRvbj5cclxuICAgICAgICA8bGFiZWwgY2xhc3M9XCJmb3JtX19maWVsZFwiPlxyXG4gICAgICAgICAgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgY2xhc3M9XCJmb3JtX19pbnB1dFwiIGlkPVwibmFtZS1pbnB1dFwiIHJlcXVpcmVkIG1pbmxlbmd0aD1cIjJcIj5cclxuICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZm9ybV9fcGxhY2Vob2xkZXIgbmFtZS1pbnB1dC1wbGFjZWhvbGRlclwiPlxyXG4gICAgICAgICAgICBXaGF0IGlzIHlvdXIgbmFtZT8/XHJcbiAgICAgICAgICA8L3NwYW4+XHJcbiAgICAgICAgICA8c3BhbiBjbGFzcz1cImZvcm1fX2lucHV0LWVycm9yIG5hbWUtaW5wdXQtZXJyb3JcIj48L3NwYW4+XHJcbiAgICAgICAgPC9sYWJlbD5cclxuICAgICAgICA8bGFiZWwgY2xhc3M9XCJmb3JtX19maWVsZFwiPlxyXG4gICAgICAgICAgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgY2xhc3M9XCJmb3JtX19pbnB1dFwiIGlkPVwiaGFwcGluZXNzLWlucHV0XCIgcmVxdWlyZWQgbWlubGVuZ3RoPVwiNFwiPlxyXG4gICAgICAgICAgPHNwYW4gY2xhc3M9XCJmb3JtX19wbGFjZWhvbGRlciBoYXBwaW5lc3MtaW5wdXQtcGxhY2Vob2xkZXJcIj5cclxuICAgICAgICAgICAgSG93IGFyZSB5b3UgZmVlbGluZz8/XHJcbiAgICAgICAgICA8L3NwYW4+XHJcbiAgICAgICAgICA8c3BhbiBjbGFzcz1cImZvcm1fX2lucHV0LWVycm9yIGhhcHBpbmVzcy1pbnB1dC1lcnJvclwiPjwvc3Bhbj5cclxuICAgICAgICA8L2xhYmVsPlxyXG4gICAgICAgIDxsYWJlbCBjbGFzcz1cImZvcm1fX2ZpZWxkXCI+XHJcbiAgICAgICAgICA8aW5wdXQgdHlwZT1cInRleHRcIiBjbGFzcz1cImZvcm1fX2lucHV0XCIgaWQ9XCJqYXZhc2NyaXB0LXJhdGluZy1pbnB1dFwiIHJlcXVpcmVkIG1pbmxlbmd0aD1cIjVcIj5cclxuICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZm9ybV9fcGxhY2Vob2xkZXIgamF2YXNjcmlwdC1yYXRpbmctaW5wdXQtcGxhY2Vob2xkZXJcIj5cclxuICAgICAgICAgICAgSXMgSmF2YVNjcmlwdCB0aGF0IGhhcmQ/P1xyXG4gICAgICAgICAgPC9zcGFuPlxyXG4gICAgICAgICAgPHNwYW4gY2xhc3M9XCJmb3JtX19pbnB1dC1lcnJvciBqYXZhc2NyaXB0LXJhdGluZy1pbnB1dC1lcnJvclwiPjwvc3Bhbj5cclxuICAgICAgICA8L2xhYmVsPlxyXG4gICAgICAgIDxsYWJlbCBjbGFzcz1cImZvcm1fX2ZpZWxkXCI+XHJcbiAgICAgICAgICA8aW5wdXQgdHlwZT1cInRleHRcIiBjbGFzcz1cImZvcm1fX2lucHV0XCIgaWQ9XCJzdWdnZXN0aW9uLWlucHV0XCIgcmVxdWlyZWQgbWlubGVuZ3RoPVwiNVwiPlxyXG4gICAgICAgICAgPHNwYW4gY2xhc3M9XCJmb3JtX19wbGFjZWhvbGRlciBzdWdnZXN0aW9uLWlucHV0LXBsYWNlaG9sZGVyXCI+XHJcbiAgICAgICAgICAgIEhvdyBtYW55IGludGVyZXN0aW5nIHF1ZXN0aW9ucyBjYW4gb25lIG1ha2UgdXA/P1xyXG4gICAgICAgICAgPC9zcGFuPlxyXG4gICAgICAgICAgPHNwYW4gY2xhc3M9XCJmb3JtX19pbnB1dC1lcnJvciBzdWdnZXN0aW9uLWlucHV0LWVycm9yXCI+PC9zcGFuPlxyXG4gICAgICAgIDwvbGFiZWw+XHJcbiAgICAgICAgPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJmb3JtX19zdWJtaXQgZm9ybV9fYnV0dG9uIGJ1dHRvblwiPlxyXG4gICAgICAgICAgTmV4dFxyXG4gICAgICAgIDwvYnV0dG9uPlxyXG4gICAgICA8L2ZpZWxkc2V0PlxyXG4gICAgICA8ZmllbGRzZXQgY2xhc3M9XCJmb3JtX19zZXRcIj5cclxuICAgICAgICA8YnV0dG9uIGNsYXNzPVwidGV4dC1idXR0b24gZm9ybV9fcHJldmlvdXNcIj4mbGFycjsgQmFjazwvYnV0dG9uPlxyXG4gICAgICAgIDxwIGNsYXNzPVwiZm9ybV9fcGFyYWdyYXBoXCI+XHJcbiAgICAgICAgICBTdWNjZXNzZnVsbHkgc3VibWl0dGVkIVxyXG4gICAgICAgIDwvcD5cclxuICAgICAgICA8YnV0dG9uIHR5cGU9XCJzdWJtaXRcIiBjbGFzcz1cImZvcm1fX3N1Ym1pdCBidXR0b25cIj5cclxuICAgICAgICAgIFRoYXQncyBhbGwsIGZvbGtzIVxyXG4gICAgICAgIDwvYnV0dG9uPlxyXG4gICAgICA8L2ZpZWxkc2V0PlxyXG4gICAgPC9mb3JtPlxyXG4gIDwvbWFpbj5cclxuPC9kaXY+XHJcbjxzY3JpcHQgc3JjPVwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS93ZWItY29kZS9mb3JtLXZhbGlkYXRpb24vbGVzc29uLTYvbW92ZWRfaW5kZXguanNcIj48L3NjcmlwdD5cclxuPHNjcmlwdCBzcmM9XCJzY3JpcHQuanNcIj48L3NjcmlwdD5cclxuPC9ib2R5PlxyXG48L2h0bWw+XHJcblxyXG5cclxuKi8iLCJpbXBvcnQgeyBpbml0aWFsQ2FyZHMsIHZhbGlkYXRpb25TZXR0aW5ncywgbW9kYWxTZWxlY3RvcnMsIG5ld1Bvc3RNb2RhbFBsYWNlaG9sZGVycywgfSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzLmpzXCI7XHJcbmltcG9ydCBDYXJkRWxlbWVudCBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkRWxlbWVudC5qc1wiO1xyXG5pbXBvcnQgXCIuL2luZGV4LmNzc1wiO1xyXG5pbXBvcnQgTW9kYWxXaXRoRm9ybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Nb2RhbFdpdGhGb3JtLmpzXCI7XHJcbmltcG9ydCBNb2RhbFByZXZpZXdJbWFnZSBmcm9tIFwiLi4vY29tcG9uZW50cy9Nb2RhbFByZXZpZXdJbWFnZS5qc1wiO1xyXG5pbXBvcnQgU2VjdGlvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XHJcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuLi9zY3JpcHRzL3ZhbGlkYXRpb24uanNcIjtcclxuXHJcbmNvbnN0IGN1cnJlbnRQcm9maWxlTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19uYW1lJyk7XHJcbmNvbnN0IGN1cnJlbnRQcm9maWxlRGVzY3JpcHRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fZGVzY3JpcHRpb24nKTtcclxuXHJcbmNvbnN0IGVkaXRQcm9maWxlRm9ybSA9IG5ldyBNb2RhbFdpdGhGb3JtKHsgbW9kYWxTZWxlY3RvcjogJyNlZGl0LXByb2ZpbGUtbW9kYWwnLFxyXG4gICAgb25TdWJtaXRDYWxsYmFjazogKGlucHV0VmFsdWVzKSA9PiB7XHJcbiAgICAgICAgY3VycmVudFByb2ZpbGVOYW1lLnRleHRDb250ZW50ID0gaW5wdXRWYWx1ZXNbJ3Byb2ZpbGUtbmFtZSddO1xyXG4gICAgICAgIGN1cnJlbnRQcm9maWxlRGVzY3JpcHRpb24udGV4dENvbnRlbnQgPSBpbnB1dFZhbHVlc1sncHJvZmlsZS1kZXNjcmlwdGlvbiddO1xyXG4gICAgfVxyXG4gfSk7XHJcbmVkaXRQcm9maWxlRm9ybS5zZXREZWZhdWx0SW5wdXRzKGdldEN1cnJlbnRQcm9maWxlSW5mbygpKTtcclxuXHJcbmNvbnN0IGVkaXRQcm9maWxlRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKHZhbGlkYXRpb25TZXR0aW5ncywgZWRpdFByb2ZpbGVGb3JtLmdldEZvcm1FbGVtZW50KCkpO1xyXG5lZGl0UHJvZmlsZUZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5cclxuY29uc3QgbmV3UG9zdEZvcm0gPSBuZXcgTW9kYWxXaXRoRm9ybSh7IG1vZGFsU2VsZWN0b3I6ICcjcG9zdC1tb2RhbCcsIG9uU3VibWl0Q2FsbGJhY2s6IChpbnB1dFZhbHVlcykgPT4ge1xyXG4gICAgICAgIGNvbnN0IG5ld0NhcmQgPSBtYWtlTmV3Q2FyZCh7dGl0bGU6IGlucHV0VmFsdWVzWydwb3N0LXRpdGxlJ10sIGltYWdlTGluazogaW5wdXRWYWx1ZXNbJ3Bvc3QtaW1hZ2UtbGluayddIH0pXHJcbiAgICAgICAgY2FyZFNlY3Rpb24uYWRkSXRlbShuZXdDYXJkKTtcclxuICAgIH1cclxufSk7XHJcbm5ld1Bvc3RGb3JtLnNldFBsYWNlaG9sZGVySW5wdXRzKG5ld1Bvc3RNb2RhbFBsYWNlaG9sZGVycyk7XHJcblxyXG5jb25zdCBuZXdQb3N0Rm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKHZhbGlkYXRpb25TZXR0aW5ncywgbmV3UG9zdEZvcm0uZ2V0Rm9ybUVsZW1lbnQoKSk7XHJcbm5ld1Bvc3RGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuXHJcbmNvbnN0IHByZXZpZXdJbWFnZU1vZGFsID0gbmV3IE1vZGFsUHJldmlld0ltYWdlKHttb2RhbFNlbGVjdG9yOiAnI3ByZXZpZXctbW9kYWwnfSk7XHJcblxyXG5jb25zdCBjYXJkU2VjdGlvbiA9IG5ldyBTZWN0aW9uKHtpdGVtczogaW5pdGlhbENhcmRzLCBcclxuICAgIHJlbmRlcmVyOiAoY2FyZCkgPT4ge1xyXG4gICAgICBjb25zdCBuZXdDYXJkID0gbWFrZU5ld0NhcmQoY2FyZCk7XHJcbiAgICAgIGNhcmRTZWN0aW9uLmFkZEl0ZW0obmV3Q2FyZCk7XHJcbiAgfSwgY29udGFpbmVyU2VsZWN0b3I6ICcuY2FyZHNfX2xpc3QnfSk7XHJcblxyXG5jYXJkU2VjdGlvbi5yZW5kZXJJdGVtcygpO1xyXG5cclxuc2V0UGFnZUxpc3RlbmVycygpO1xyXG5cclxuZnVuY3Rpb24gc2V0UGFnZUxpc3RlbmVycygpIHtcclxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19lZGl0LWJ1dHRvbicpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJyxvbkVkaXRQcm9maWxlQ2xpY2spO1xyXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2FkZC1idXR0b24nKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsb25OZXdQb3N0Q2xpY2spO1xyXG59XHJcblxyXG5mdW5jdGlvbiBvbkVkaXRQcm9maWxlQ2xpY2soKSB7XHJcbiAgICBlZGl0UHJvZmlsZUZvcm0ub3BlbigpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBvbk5ld1Bvc3RDbGljaygpIHsgXHJcbiAgICBuZXdQb3N0Rm9ybS5vcGVuKCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIG1ha2VOZXdDYXJkKHsgdGl0bGUsIGltYWdlTGluayB9KSB7XHJcbiAgICBjb25zdCBuZXdDYXJkID0gbmV3IENhcmRFbGVtZW50KHt0aXRsZTogdGl0bGUsIGltYWdlTGluazogaW1hZ2VMaW5rLCBpbWFnZUNsaWNrTWFuYWdlcjogKCkgPT4ge1xyXG4gICAgICAgIHByZXZpZXdJbWFnZU1vZGFsLnBvcHVsYXRlUHJldmlldyh7IGltYWdlVXJsOiBuZXdDYXJkLmltYWdlTGluaywgaW1hZ2VBbHQ6IG5ld0NhcmQuaW1hZ2VBbHRUZXh0LCB0aXRsZVRleHQ6IG5ld0NhcmQudGl0bGVUZXh0IH0pO1xyXG4gICAgICAgIHByZXZpZXdJbWFnZU1vZGFsLm9wZW4oKTtcclxuICAgIH19KTtcclxuICAgIHJldHVybiBuZXdDYXJkLmdldFZpZXcoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0Q3VycmVudFByb2ZpbGVJbmZvKCkge1xyXG4gICAgcmV0dXJuIHtcInByb2ZpbGUtbmFtZVwiOiBjdXJyZW50UHJvZmlsZU5hbWUudGV4dENvbnRlbnQsIFwicHJvZmlsZS1kZXNjcmlwdGlvblwiOiBjdXJyZW50UHJvZmlsZURlc2NyaXB0aW9uLnRleHRDb250ZW50IH1cclxufSIsImltcG9ydCBNb2RhbCBmcm9tICcuL01vZGFsLmpzJztcclxuaW1wb3J0IHsgbW9kYWxTZWxlY3RvcnMgfSBmcm9tICcuLi91dGlscy9jb25zdGFudHMuanMnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTW9kYWxQcmV2aWV3SW1hZ2UgZXh0ZW5kcyBNb2RhbCB7XHJcbiAgICBjb25zdHJ1Y3Rvcih7IG1vZGFsU2VsZWN0b3IgfSkge1xyXG4gICAgICAgIHN1cGVyKHsgbW9kYWxTZWxlY3RvciB9KSBcclxuICAgICAgICB0aGlzLl9wcmV2aWV3SW1hZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG1vZGFsU2VsZWN0b3JzLnByZXZpZXdNb2RhbEltYWdlKTtcclxuICAgICAgICB0aGlzLl9wcmV2aWV3VGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG1vZGFsU2VsZWN0b3JzLnByZXZpZXdNb2RhbFRpdGxlKTtcclxuICAgICAgICB0aGlzLl9wcmV2aWV3VGl0bGVUZXh0ID0gJyc7XHJcbiAgICB9XHJcblxyXG4gICAgcG9wdWxhdGVQcmV2aWV3KHsgaW1hZ2VVcmwsIGltYWdlQWx0LCB0aXRsZVRleHQgfSkge1xyXG4gICAgICAgIHRoaXMuX3NldFByZXZpZXdUaXRsZSh0aXRsZVRleHQpO1xyXG4gICAgICAgIHRoaXMuX3NldFByZXZpZXdJbWFnZShpbWFnZVVybCk7XHJcbiAgICAgICAgdGhpcy5fc2V0UHJldmlld0ltYWdlQWx0KGltYWdlQWx0KTtcclxuICAgIH1cclxuXHJcbiAgICBfc2V0UHJldmlld0ltYWdlKGltYWdlVXJsKSB7XHJcbiAgICAgICAgdGhpcy5pbWFnZVVybCA9IGltYWdlVXJsO1xyXG4gICAgICAgIHRoaXMuX3ByZXZpZXdJbWFnZS5zZXRBdHRyaWJ1dGUoJ3NyYycsIGltYWdlVXJsKTtcclxuICAgIH1cclxuXHJcbiAgICBfc2V0UHJldmlld1RpdGxlKHRpdGxlU3RyaW5nKSB7XHJcbiAgICAgICAgdGhpcy5fcHJldmlld1RpdGxlVGV4dCA9IHRpdGxlU3RyaW5nO1xyXG4gICAgICAgIHRoaXMuX3ByZXZpZXdUaXRsZS50ZXh0Q29udGVudCA9IHRoaXMuX3ByZXZpZXdUaXRsZVRleHQ7XHJcbiAgICB9XHJcblxyXG4gICAgX3NldFByZXZpZXdJbWFnZUFsdChpbWFnZUFsdCkge1xyXG4gICAgICAgIGltYWdlQWx0ID8gXHJcbiAgICAgICAgdGhpcy5fcHJldmlld0ltYWdlLnNldEF0dHJpYnV0ZSgnYWx0JyxpbWFnZUFsdCkgOiBcclxuICAgICAgICB0aGlzLl9wcmV2aWV3SW1hZ2Uuc2V0QXR0cmlidXRlKCdhbHQnLHRoaXMuX3ByZXZpZXdUaXRsZVRleHQpO1xyXG4gICAgfVxyXG5cclxuICAgIGNsZWFyKCkge1xyXG4gICAgICAgIHRoaXMuc2V0UHJldmlld0ltYWdlKHtpbWFnZVVybDogJycsIGltYWdlQWx0OiAnJ30pO1xyXG4gICAgICAgIHRoaXMuc2V0UHJldmlld1RpdGxlKCcnKTtcclxuICAgIH1cclxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xyXG4gICAgY29uc3RydWN0b3IoeyBpdGVtcywgcmVuZGVyZXIsIGNvbnRhaW5lclNlbGVjdG9yIH0pIHtcclxuICAgICAgICB0aGlzLl9pdGVtcyA9IGl0ZW1zO1xyXG4gICAgICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XHJcbiAgICAgICAgdGhpcy5fY29udGFpbmVyU2VsZWN0b3IgPSBjb250YWluZXJTZWxlY3RvcjtcclxuICAgICAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NvbnRhaW5lclNlbGVjdG9yKTtcclxuICAgIH1cclxuXHJcbiAgICByZW5kZXJJdGVtcygpIHtcclxuICAgICAgICB0aGlzLl9pdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuX3JlbmRlcmVyKGl0ZW0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGFkZEl0ZW0oZWxlbWVudCkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGVsZW1lbnQpO1xyXG4gICAgICAgIHRoaXMuX2l0ZW1zLnB1c2goZWxlbWVudCk7XHJcbiAgICAgICAgdGhpcy5fY29udGFpbmVyLmFwcGVuZChlbGVtZW50KTtcclxuICAgIH1cclxuXHJcbiAgICBfY2xlYXIoKSB7XHJcbiAgICAgICAgdGhpcy5faXRlbXMuaW50ZXJuYWxIVE1MID0gXCJcIlxyXG4gICAgfVxyXG5cclxuICAgIGdldExhc3RFbGVtZW50KCkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKHRoaXMuX2NvbnRhaW5lcik7XHJcbiAgICAgIGNvbnNvbGUubG9nKHRoaXMuX2l0ZW1zW3RoaXMuX2l0ZW1zLmxlbmd0aCAtIDFdKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5faXRlbXNbdGhpcy5faXRlbXMubGVuZ3RoIC0gMV07XHJcbiAgICB9XHJcbn0iXSwibmFtZXMiOlsidmFsaWRhdGlvblNldHRpbmdzIiwiZm9ybVNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsImlucHV0RXJyb3JTdHlsZSIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwic3VibWl0QnV0dG9uTmFtZSIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiZGVidWdnaW5nIiwibW9kYWxTZWxlY3RvcnMiLCJDYXJkRWxlbWVudCIsImNvbnN0cnVjdG9yIiwiX3JlZiIsInRpdGxlIiwiaW1hZ2VMaW5rIiwiaW1hZ2VDbGlja01hbmFnZXIiLCJ0aGlzIiwiX2NhcmRUZW1wbGF0ZSIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsIl9jYXJkRWxlbWVudCIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJfY2FyZEltYWdlIiwiX2xpa2VCdXR0b24iLCJfZGVsZXRlQnV0dG9uIiwiX3RpdGxlRWxlbWVudCIsIl9jYXJkVW5saWtlZEltYWdlIiwiX2NhcmRMaWtlZEltYWdlIiwiX29uRGVsZXRlQ2xpY2siLCJiaW5kIiwiX2ltYWdlQ2xpY2tNYW5hZ2VyIiwic2V0VGl0bGUiLCJzZXRDYXJkSW1hZ2UiLCJzZXRDYXJkSW1hZ2VBbHQiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJhZGRFdmVudExpc3RlbmVyIiwib25JbWFnZUNsaWNrIiwib25MaWtlQ2xpY2siLCJ0aXRsZVRleHQiLCJ0ZXh0Q29udGVudCIsIl90aXRsZVRleHQiLCJjb25zb2xlIiwibG9nIiwic2V0QXR0cmlidXRlIiwiYWx0VGV4dCIsImltYWdlQWx0VGV4dCIsImlzTGlrZUFjdGl2ZSIsImRlYWN0aXZhdGVMaWtlQnV0dG9uIiwiYWN0aXZhdGVMaWtlQnV0dG9uIiwiY2xhc3NMaXN0IiwiY29udGFpbnMiLCJyZW1vdmUiLCJhZGQiLCJfcmVtb3ZlIiwiZ2V0VmlldyIsIk1vZGFsIiwibW9kYWxTZWxlY3RvciIsIl9tb2RhbEVsZW1lbnQiLCJfbW9kYWxTZWxlY3RvciIsIl9oYW5kbGVFc2NhcGVDbG9zZSIsIl9jbG9zZUJ1dHRvbiIsIm9wZW4iLCJfc2V0RXNjYXBlTGlzdGVuZXIiLCJjbG9zZSIsImV2dCIsImtleSIsImJvb2wiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiX2hhbmRsZU1vZGFsT3ZlcmxheUNsaWNrIiwidGFyZ2V0IiwiTW9kYWxXaXRoRm9ybSIsIm9uU3VibWl0Q2FsbGJhY2siLCJzdXBlciIsIl9vblN1Ym1pdENhbGxiYWNrIiwiX3N1Ym1pdEJ1dHRvbiIsIl9pbnB1dEZpZWxkcyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJfZm9ybSIsIl9jdXJyZW50UHJvZmlsZU5hbWUiLCJfY3VycmVudFByb2ZpbGVEZXNjcmlwdGlvbiIsImdldEZvcm1FbGVtZW50IiwiX3Jlc2V0IiwiZm9yRWFjaCIsImZpZWxkIiwidmFsdWUiLCJfb25TdWJtaXQiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJpbnB1dFZhbHVlcyIsIm5hbWUiLCJwcmV2ZW50RGVmYXVsdCIsInNldERlZmF1bHRJbnB1dHMiLCJkZWZhdWx0c09iamVjdCIsInNldFBsYWNlaG9sZGVySW5wdXRzIiwiRm9ybVZhbGlkYXRvciIsInNldHRpbmdzIiwiZm9ybUVsZW1lbnQiLCJfc2V0dGluZ3MiLCJfZm9ybUVsZW1lbnQiLCJfc2V0Rm9ybUlucHV0RWxlbWVudHMiLCJfc2V0Rm9ybUJ1dHRvbnMiLCJlbmFibGVWYWxpZGF0aW9uIiwicmVzZXRWYWxpZGF0aW9uIiwiX2Rpc2FibGVCdXR0b24iLCJfY2xlYXJGb3JtSW5wdXRFbGVtZW50cyIsIl9zaG93SW5wdXRFcnJvciIsImlucHV0RWxlbWVudCIsImVycm9yRWxlbWVudCIsIl9nZXRFcnJvckVsZW1lbnQiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsIl9oaWRlSW5wdXRFcnJvciIsIl9jaGVja0ZpZWxkVmFsaWRpdHkiLCJ2YWxpZGl0eSIsInZhbGlkIiwiaWQiLCJfY2hlY2tJbnZhbGlkSW5wdXQiLCJfZm9ybUlucHV0RWxlbWVudHMiLCJldmVyeSIsImxlbmd0aCIsIkFycmF5IiwiZnJvbSIsIl9idXR0b25FbGVtZW50IiwiX3RvZ2dsZVN1Ym1pdEJ1dHRvbiIsIl9lbmFibGVCdXR0b24iLCJkaXNhYmxlZCIsImN1cnJlbnRQcm9maWxlTmFtZSIsImN1cnJlbnRQcm9maWxlRGVzY3JpcHRpb24iLCJlZGl0UHJvZmlsZUZvcm0iLCJuZXdQb3N0Rm9ybSIsIm5ld0NhcmQiLCJtYWtlTmV3Q2FyZCIsImNhcmRTZWN0aW9uIiwiYWRkSXRlbSIsInByZXZpZXdJbWFnZU1vZGFsIiwiX3ByZXZpZXdJbWFnZSIsIl9wcmV2aWV3VGl0bGUiLCJfcHJldmlld1RpdGxlVGV4dCIsInBvcHVsYXRlUHJldmlldyIsIl9yZWYyIiwiaW1hZ2VVcmwiLCJpbWFnZUFsdCIsIl9zZXRQcmV2aWV3VGl0bGUiLCJfc2V0UHJldmlld0ltYWdlIiwiX3NldFByZXZpZXdJbWFnZUFsdCIsInRpdGxlU3RyaW5nIiwiY2xlYXIiLCJzZXRQcmV2aWV3SW1hZ2UiLCJzZXRQcmV2aWV3VGl0bGUiLCJpdGVtcyIsInJlbmRlcmVyIiwiY29udGFpbmVyU2VsZWN0b3IiLCJfaXRlbXMiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyU2VsZWN0b3IiLCJfY29udGFpbmVyIiwicmVuZGVySXRlbXMiLCJpdGVtIiwiZWxlbWVudCIsInB1c2giLCJhcHBlbmQiLCJfY2xlYXIiLCJpbnRlcm5hbEhUTUwiLCJnZXRMYXN0RWxlbWVudCIsImNhcmQiXSwic291cmNlUm9vdCI6IiJ9