!function(){"use strict";const e={formSelector:".modal__form",inputSelector:".modal__input",inputErrorStyle:"modal__input_type_error",submitButtonSelector:".modal__submit-button",submitButtonName:"modal__submit-button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:".modal__input_type_error",errorClass:"modal__error_visible",debugging:!0},t="modal_open",i={defaultUsername:"Please input name",defaultDescription:"Please input description",defaultProfileImage:"https://www.imdb.com/name/nm1120169/mediaviewer/rm782485249/?ref_=nm_ov_ph",profileNameSelector:".profile__name",profileDescriptionSelector:".profile__description",profileAvatarSelector:".profile__avatar"},s={method:"GET",route:"/users/me"},n={method:"PATCH",route:"/users/me"},r={method:"PATCH",route:"/users/me/avatar"},o={method:"POST",route:"/cards"},a="/cards/",l="PUT",c="/cards/:cardId/likes",m="DELETE",d="/cards/:cardId/likes";class h{constructor(e){let{name:t,link:i,isLiked:s,id:n,imageClickManager:r,onDeleteAPIManager:o,onLikeAPIManager:a,deleteConfirmationManager:l}=e;this.id=n,this._cardTemplate=document.querySelector("#card"),this._cardElement=this._cardTemplate.content.querySelector(".card").cloneNode(!0),this._cardImage=this._cardElement.querySelector(".card__image"),this._likeButton=this._cardElement.querySelector(".card__like-button"),this._deleteButton=this._cardElement.querySelector(".card__delete-button"),this._titleElement=this._cardElement.querySelector(".card__title"),this._cardUnlikedImage=this._cardElement.querySelector(".card__unliked-image"),this._cardLikedImage=this._cardElement.querySelector(".card__liked-image"),this._onDeleteAPIManager=o,this._onLikeAPIManager=a,this.deleteConfirmationManager=l,this._imageClickManager=r,this.setTitle(t),this.setCardImage(i),this.setCardImageAlt(t),this._setEventListeners(),this._setLike(s)}_setEventListeners(){this._cardImage.addEventListener("click",(()=>this.onImageClick())),this._likeButton.addEventListener("click",(()=>this.onLikeClick())),this._deleteButton.addEventListener("click",(()=>this._onDeleteClick()))}setTitle(e){"string"==typeof e?(this.titleText=e,this._titleElement.textContent=this.titleText):(console.log("New card title is not a string. Setting to default."),this.titleText="unnamed card",this._titleElement.textContent=this.titleText)}setCardImage(e){this.imageLink=e,this._cardImage.setAttribute("src",this.imageLink)}setCardImageAlt(e){this.imageAltText=e||this.titleText,this._cardImage.setAttribute("alt",this.imageAltText)}_setLike(e){e?this.activateLikeButton():this.deactivateLikeButton()}onLikeClick(){this.isLikeActive()?this._onLikeAPIManager(this.id,!1).then((e=>{e&&this.deactivateLikeButton()})):this._onLikeAPIManager(this.id,!0).then((e=>{e&&this.activateLikeButton()}))}isLikeActive(){return!this._cardLikedImage.classList.contains("card__liked-image__inactive")}activateLikeButton(){this._cardLikedImage.classList.remove("card__liked-image__inactive"),this._cardUnlikedImage.classList.add("card__unliked-image__inactive")}deactivateLikeButton(){this._cardLikedImage.classList.add("card__liked-image__inactive"),this._cardUnlikedImage.classList.remove("card__unliked-image__inactive")}remove(){this._cardElement.remove()}_onDeleteClick(){this._onDeleteAPIManager(this.deleteConfirmationManager,this.id).then((e=>{e&&this.remove()}))}onImageClick(){this._imageClickManager()}getView(){return this._cardElement}}class _{constructor(e){let{modalSelector:t}=e;this._modalSelector=t,this._modalElement=document.querySelector(t),this._handleEscapeClose=this._handleEscapeClose.bind(this),this._closeButton=this._modalElement.querySelector(".modal__close-button"),this._setEventListeners()}open(){this._modalElement.classList.add(t),this._setEscapeListener(!0)}close(){this._modalElement.classList.remove(t),this._setEscapeListener(!1)}_handleEscapeClose(e){"Escape"===e.key&&this.close()}_setEscapeListener(e){e?document.addEventListener("keydown",this._handleEscapeClose):document.removeEventListener("keydown",this._handleEscapeClose)}_setEventListeners(){this._closeButton.addEventListener("click",(()=>this.close())),this._modalElement.addEventListener("click",(e=>this._handleModalOverlayClick(e)))}_handleModalOverlayClick(e){e.target.classList.contains("modal")&&this.close()}}class u extends _{constructor(e){let{modalSelector:t,onSubmitCallback:i}=e;super({modalSelector:t}),this._onSubmitCallback=i,this._submitButton=this._modalElement.querySelector(".modal__submit-button"),this._inputFields=this._modalElement.querySelectorAll(".modal__input"),this._form=this._modalElement.querySelector(".modal__form"),this._currentProfileName=document.querySelector(".profile__name"),this._currentProfileDescription=document.querySelector(".profile__description")}getFormElement(){return this._form}_resetInputs(){this._inputFields.forEach((e=>{e.value=""}))}_setEventListeners(){super._setEventListeners(),this._modalElement.addEventListener("submit",(e=>this._onSubmit(e)))}_getInputValues(){const e={};return this._inputFields.forEach((t=>{e[t.name]=t.value})),e}_onSubmit(e){e.preventDefault(),this._setSubmitToSubmitting(),this._onSubmitCallback(this._getInputValues()).then((()=>{this._resetInputs(),this._setSubmitToSubmit(),this.close()})).catch((()=>{this._setSubmitToSubmit()}))}_setSubmitToSubmitting(){this._submitButton.textContent="Submitting..."}_setSubmitToSubmit(){this._submitButton.textContent="Submit"}setDefaultInputs(e){this._inputFields.forEach((t=>{e[t.name]&&(t.value=e[t.name])}))}setPlaceholderInputs(e){this._inputFields.forEach((t=>{e[t.name]&&t.setAttribute("placeholder",e[t.name])}))}}class p{constructor(e,t){this._settings=e,this._formElement=t,this._setFormInputElements(),this._setFormButtons()}enableValidation(){this._formElement.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}resetValidation(){this._disableButton(),this._clearFormInputElements()}_showInputError=e=>{const t=this._getErrorElement(e);e.classList.add(this._settings.inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._settings.errorClass)};_hideInputError=e=>{const t=this._getErrorElement(e);e.classList.remove(this._settings.inputErrorClass),t.classList.remove(this._settings.errorClass),t.textContent=""};_checkFieldValidity=e=>{e.validity.valid?this._hideInputError(e):this._showInputError(e,e.validationMessage)};_getErrorElement(e){return document.querySelector(`#${e.id}-input-error`)}_checkInvalidInput(){return this._formInputElements.every((e=>0!==e.value.length&&e.validity.valid))}_setFormInputElements(){this._formInputElements=Array.from(this._formElement.querySelectorAll(this._settings.inputSelector))}_clearFormInputElements(){this._formInputElements.forEach((e=>{e.value=""}))}_setFormButtons(){this._buttonElement=this._formElement.querySelector(this._settings.submitButtonSelector)}_toggleSubmitButton(){this._checkInvalidInput()?this._enableButton():this._disableButton()}_disableButton(){this._buttonElement.classList.add(this._settings.inactiveButtonClass),this._buttonElement.disabled=!0}_enableButton(){this._buttonElement.classList.remove(this._settings.inactiveButtonClass),this._buttonElement.disabled=!1}_setEventListeners(){this._toggleSubmitButton(),this._formInputElements.forEach((e=>{e.addEventListener("input",(()=>{this._checkFieldValidity(e),this._toggleSubmitButton()}))}))}}const g=new class{constructor(e){let{baseUrl:t,headers:i}=e;this._baseUrl=t,this._authorization=i.authorization,this._contentType=i["Content-Type"]}_buildRequest(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;const i=this._baseUrl+e.route,s={method:e.method,headers:{authorization:this._authorization,"Content-Type":this._contentType}};return t&&(s.body=JSON.stringify(t)),{url:i,info:s}}request(e,t){const i=this._buildRequest(e,t);return fetch(i.url,i.info).then((e=>e.ok?e.json():Promise.reject(`API request Error: ${e.status}`))).catch((e=>{console.error(e)}))}requestDelete(e){return fetch(this._baseUrl+a+e,{method:"DELETE",headers:{authorization:"0ba3486c-b117-4196-b741-be8eda3e197d","Content-Type":"application/json"}}).then((e=>e.ok?e.json():Promise.reject(`Error: ${e.status}`))).catch((e=>{console.error(e)}))}requestLikeUpdate(e,t){let i="",s="";return t?(i=this._baseUrl+c,s=l):(i=this._baseUrl+d,s=m),i=i.replace(":cardId",e),fetch(i,{method:s,headers:{authorization:"0ba3486c-b117-4196-b741-be8eda3e197d","Content-Type":"application/json"}}).then((e=>e.ok?e.json():Promise.reject(`Error: ${e.status}`))).catch((e=>{console.error(e)}))}getBatchData(e){return new Promise((t=>{this.request(e).then((e=>{t(Promise.all(e))}))}))}getInitialUserData(){return new Promise((e=>{this.request(s).then((t=>{e(Promise.all(t))}))}))}}({baseUrl:"https://around-api.en.tripleten-services.com/v1",headers:{authorization:"0ba3486c-b117-4196-b741-be8eda3e197d","Content-Type":"application/json"}}),f=new class{constructor(e){let{renderer:t,containerSelector:i,initialize:s}=e;this._items="",this._renderer=t,this._containerSelector=i,this._container=document.querySelector(this._containerSelector),this.initialize=s}renderItems(){this._items?this._items.forEach((e=>{this._renderer(e)})):console.error("No items to render in Section.")}setItems(e){return this._items=e,this._items}addItem(e){this._items.push(e),this._container.append(e)}_clear(){this._items.internalHTML=""}}({containerSelector:".cards__list",renderer:e=>{const t=I(e);f.addItem(t)},initialize:e=>{g.getBatchData(e).then((e=>{f.setItems(e),f.renderItems()}))}});f.initialize({method:"GET",route:"/cards"});const v=new class{constructor(){let{userName:e=i.defaultUsername,profileDescription:t=i.defaultDescription,imageUrl:s=i.defaultProfileImage,initialize:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._userName=document.querySelector(i.profileNameSelector),this._userProfileDescription=document.querySelector(i.profileDescriptionSelector),this._userProfileAvatar=document.querySelector(i.profileAvatarSelector),this.setUserName(e),this.setUserDescription(t),this.setUserImage(s),this.initialize=n}setUserName(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.defaultUsername;this._userName.textContent=e}setUserDescription(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.defaultDescription;this._userProfileDescription.textContent=e}setUserImage(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.defaultProfileImage;this._userProfileAvatar.setAttribute("src",e)}setProfileData(){let{userName:e=i.defaultUsername,profileDescription:t=i.defaultDescription,imageUrl:s=i.defaultProfileImage}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.setUserName(e),this.setUserDescription(t),this.setUserImage(s)}getUserProfile(){return{"profile-name":this._userName.textContent,"profile-description":this._userProfileDescription.textContent}}}({initialize:()=>{g.request(s).then((e=>{v.setProfileData({userName:e.name,profileDescription:e.about,imageUrl:e.avatar}),b.setDefaultInputs(v.getUserProfile())})).catch((e=>{console.error(`Failed to get user data: ${e}`)}))}});v.initialize();const E=new u({modalSelector:"#edit-avatar-modal",onSubmitCallback:e=>new Promise(((t,i)=>{g.request(r,{avatar:e["avatar-link"]}).then((()=>{v.setUserImage(e["avatar-link"]),t()})).catch((()=>i()))}))});new p(e,E.getFormElement()).enableValidation();const b=new u({modalSelector:"#edit-profile-modal",onSubmitCallback:e=>new Promise(((t,i)=>{g.request(n,{name:e["profile-name"],about:e["profile-description"]}).then((()=>{v.setUserName(e["profile-name"]),v.setUserDescription(e["profile-description"]),b.setDefaultInputs(v.getUserProfile()),t()})).catch((e=>{console.error(`Failed to edit profile: ${e}`),i()}))}))});new p(e,b.getFormElement()).enableValidation();const k=new u({modalSelector:"#post-modal",onSubmitCallback:e=>new Promise(((t,i)=>{const s=e["post-caption"],n=e["post-image-link"];g.request(o,{name:s,link:n}).then((()=>{const e=I({name:s,imageLink:n});f.addItem(e),t()})).catch((e=>{console.error(`Failed to create new post: ${e}`),i()}))}))});k.setPlaceholderInputs({"post-image-link":"Paste a link to the picture","post-caption":"Type your caption"}),new p(e,k.getFormElement()).enableValidation();const C=new class extends _{constructor(e){let{modalSelector:t}=e;super({modalSelector:t}),this._previewImage=document.querySelector(".modal__preview-image"),this._previewTitle=document.querySelector("#preview-title"),this._previewTitleText=""}populatePreview(e){let{imageUrl:t,imageAlt:i,titleText:s}=e;this._setPreviewTitle(s),this._setPreviewImage(t),this._setPreviewImageAlt(i)}_setPreviewImage(e){this.imageUrl=e,this._previewImage.setAttribute("src",e)}_setPreviewTitle(e){this._previewTitleText=e,this._previewTitle.textContent=this._previewTitleText}_setPreviewImageAlt(e){e?this._previewImage.setAttribute("alt",e):this._previewImage.setAttribute("alt",this._previewTitleText)}clear(){this.setPreviewImage({imageUrl:"",imageAlt:""}),this.setPreviewTitle("")}}({modalSelector:"#preview-modal"});document.querySelector(".profile__edit-button").addEventListener("click",(function(){b.open()})),document.querySelector(".profile__add-button").addEventListener("click",(function(){k.open()})),document.querySelector(".profile__edit-avatar-button").addEventListener("click",(function(){console.log("edit avatar clicked"),E.open()}));const S=new class extends _{constructor(){let{modalSelector:e,confirmText:t="Confirm",awaitingConfirmText:i="Confirming...",cancelText:s="Cancel"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super({modalSelector:e}),console.log(this._modalElement),this._confirmText=t,this._awaitingConfirmText=i,this._cancelText=s,this._modalConfirmButton=this._modalElement.querySelector(".modal__button-confirm"),this._modalCancelButton=this._modalElement.querySelector(".modal__button-cancel"),this.awaitUserChoice=this.awaitUserChoice.bind(this),this._setConfirmText(this._confirmText),this._setCancelText(this._cancelText)}_setConfirmText(e){console.log(this._modalCinformButton),this._modalConfirmButton.textContent=e}_setCancelText(e){this._modalCancelButton.textContent=e}_setEventListeners(){}_onCancelClick(){return console.log("on cancel clicked"),this._modalElement.removeEventListener("click",this.handler),this.close(),!1}_onConfirmClick(){return console.log("on confirm clicked"),this._modalElement.removeEventListener("click",this.handler),this.close(),!0}_setToConfirming(){this._modalConfirmButton.textContent=this._awaitingConfirmText}setToConfirm(){this._modalConfirmButton.textContent=this._confirmText}awaitUserChoice(){this.open();const e=this;return new Promise((t=>{e._modalElement.addEventListener("click",(function i(s){s.target.classList.contains("modal__button-confirm")&&(e._setToConfirming(),e._modalElement.removeEventListener("click",i),t(!0)),s.target.classList.contains("modal__button-cancel")&&(e._modalElement.removeEventListener("click",i),e.close(),t(!1))}))}))}}({modalSelector:"#confirm-modal",confirmText:"Delete",awaitingConfirmText:"Deleting..."});function I(e){let t,{name:i,link:s,isLiked:n,_id:r}=e;return t=new h({name:i,link:s,isLiked:n,id:r,deleteConfirmationManager:S,imageClickManager:()=>{C.populatePreview({imageUrl:t.imageLink,imageAlt:t.imageAltText,titleText:t.titleText}),C.open()},onDeleteAPIManager:(e,t)=>new Promise(((i,s)=>{e.awaitUserChoice().then((n=>{n&&g.requestDelete(t).then((()=>{e.setToConfirm(),e.close(),i(!0)})).catch((t=>{e.setToConfirm(),console.error(`Card delete request failed ${t}`),s()}))}))})),onLikeAPIManager:(e,t)=>new Promise(((i,s)=>{g.requestLikeUpdate(e,t).then((e=>{i(!0)})).catch((e=>{console.error(`Card like request failed ${e}`),s()}))}))}),t.getView()}}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RDRDLENBQzVDdEcsY0xwR29CLGlCS3FHcEJpSyxZQUFhLFNBQ2JDLG9CQUFxQixnQkFHekIsU0FBU3BDLEVBQVdyTCxHQUErQixJQUMzQ29MLEdBRGEsS0FBRW5MLEVBQUksS0FBRUMsRUFBSSxRQUFFQyxFQUFPLElBQUV5TyxHQUFLNU8sRUFxRDdDLE9BTkFvTCxFQUFVLElBQUl0TCxFQUFZLENBQUNHLEtBQU1BLEVBQU1DLEtBQU1BLEVBQU1DLFFBQVNBLEVBQVNDLEdBQUl3TyxFQUFLcE8sMEJBQTJCK00sRUFDckdsTixrQkE3Q3NCQSxLQUN0Qm9NLEVBQWtCSSxnQkFBZ0IsQ0FBRXBCLFNBQVVMLEVBQVE3SSxVQUFXd0ssU0FBVTNCLEVBQVExSSxhQUFjUCxVQUFXaUosRUFBUWpKLFlBQ3BIc0ssRUFBa0I1SSxNQUFNLEVBNEN4QnZELG1CQXpDdUJBLENBQUNFLEVBQTJCSixJQUk1QyxJQUFJNkksU0FBUSxDQUFDWSxFQUFTWCxLQUN6QjFJLEVBQTBCd04sa0JBQ3pCakwsTUFBSzhMLElBQ0VBLEdBQ0FqSCxFQUFNMEIsY0FBY2xKLEdBQ2YyQyxNQUFLLEtBQ0Z2QyxFQUEwQmlPLGVBQzFCak8sRUFBMEJ1RCxRQUMxQjhGLEdBQVEsRUFBSyxJQUVoQm5FLE9BQU8wRCxJQUNKNUksRUFBMEJpTyxlQUMxQnBNLFFBQVFnSCxNQUFNLDhCQUE4QkQsS0FDNUNGLEdBQVEsR0FHcEIsR0FDRixJQXFCTjNJLGlCQWpCcUJBLENBQUNILEVBQUl1QyxJQUNuQixJQUFJc0csU0FBUSxDQUFDWSxFQUFTWCxLQUNyQnRCLEVBQU02QixrQkFBa0JySixFQUFJdUMsR0FDdkJJLE1BQU0rRixJQUNIZSxHQUFRLEVBQUssSUFFaEJuRSxPQUFPMEQsSUFDSi9HLFFBQVFnSCxNQUFNLDRCQUE0QkQsS0FDMUNGLEdBQVEsR0FDVixNQVdYa0MsRUFBUS9ILFNBQ25CLEMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zcG90cy8uL3NyYy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vc3BvdHMvLi9zcmMvY29tcG9uZW50cy9DYXJkRWxlbWVudC5qcyIsIndlYnBhY2s6Ly9zcG90cy8uL3NyYy9jb21wb25lbnRzL01vZGFsLmpzIiwid2VicGFjazovL3Nwb3RzLy4vc3JjL2NvbXBvbmVudHMvTW9kYWxXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9zcG90cy8uL3NyYy9zY3JpcHRzL3ZhbGlkYXRpb24uanMiLCJ3ZWJwYWNrOi8vc3BvdHMvLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vc3BvdHMvLi9zcmMvY29tcG9uZW50cy9BcGkuanMiLCJ3ZWJwYWNrOi8vc3BvdHMvLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL3Nwb3RzLy4vc3JjL2NvbXBvbmVudHMvVXNlclByb2ZpbGUuanMiLCJ3ZWJwYWNrOi8vc3BvdHMvLi9zcmMvY29tcG9uZW50cy9Nb2RhbFByZXZpZXdJbWFnZS5qcyIsIndlYnBhY2s6Ly9zcG90cy8uL3NyYy9jb21wb25lbnRzL01vZGFsQ29uZmlybS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY29uc3QgdmFsaWRhdGlvblNldHRpbmdzID0ge1xyXG4gICAgZm9ybVNlbGVjdG9yOiBcIi5tb2RhbF9fZm9ybVwiLFxyXG4gICAgaW5wdXRTZWxlY3RvcjogXCIubW9kYWxfX2lucHV0XCIsXHJcbiAgICBpbnB1dEVycm9yU3R5bGU6IFwibW9kYWxfX2lucHV0X3R5cGVfZXJyb3JcIixcclxuICAgIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5tb2RhbF9fc3VibWl0LWJ1dHRvblwiLFxyXG4gICAgc3VibWl0QnV0dG9uTmFtZTogXCJtb2RhbF9fc3VibWl0LWJ1dHRvblwiLFxyXG4gICAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJtb2RhbF9fYnV0dG9uX2Rpc2FibGVkXCIsXHJcbiAgICBpbnB1dEVycm9yQ2xhc3M6IFwiLm1vZGFsX19pbnB1dF90eXBlX2Vycm9yXCIsXHJcbiAgICBlcnJvckNsYXNzOiBcIm1vZGFsX19lcnJvcl92aXNpYmxlXCIsXHJcbiAgICBkZWJ1Z2dpbmc6IHRydWUsXHJcbiAgfVxyXG5cclxuZXhwb3J0IGNvbnN0IGNhcmRTZWxlY3RvcnMgPSB7XHJcbiAgdGVtcGxhdGU6ICcjY2FyZCcsXHJcbiAgaW1hZ2U6ICcuY2FyZF9faW1hZ2UnLCBcclxuICBsaWtlQnV0dG9uOiAnLmNhcmRfX2xpa2UtYnV0dG9uJyxcclxuICBkZWxldGVCdXR0b246ICcuY2FyZF9fZGVsZXRlLWJ1dHRvbicsXHJcbiAgY2FyZFRpdGxlOiAnLmNhcmRfX3RpdGxlJyxcclxuICB1bmxpa2VkSW1hZ2U6ICcuY2FyZF9fdW5saWtlZC1pbWFnZScsXHJcbiAgbGlrZWRJbWFnZTogJy5jYXJkX19saWtlZC1pbWFnZScsXHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBjYXJkU2V0dGluZ3MgPSB7XHJcbiAgZGVmYXVsdFRpdGxlOiBcInVubmFtZWQgY2FyZFwiLFxyXG4gIGRlZmF1bHRJbWFnZUFsdDogXCJhbiBpbWFnZVwiXHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBtb2RhbFNlbGVjdG9ycyA9IHtcclxuICBuZXdQb3N0TW9kYWw6IFwiI3Bvc3QtbW9kYWxcIixcclxuICBlZGl0UHJvZmlsZU1vZGFsOiBcIiNlZGl0LXByb2ZpbGUtbW9kYWxcIixcclxuICBvcGVuTW9kYWxDbGFzczogXCJtb2RhbF9vcGVuXCIsXHJcbiAgbW9kYWxFbGVtZW50Q2xhc3M6IFwibW9kYWxcIixcclxuICBtb2RhbENsb3NlQnV0dG9uOiBcIi5tb2RhbF9fY2xvc2UtYnV0dG9uXCIsXHJcbiAgcHJldmlld01vZGFsSW1hZ2U6IFwiLm1vZGFsX19wcmV2aWV3LWltYWdlXCIsXHJcbiAgcHJldmlld01vZGFsVGl0bGU6IFwiI3ByZXZpZXctdGl0bGVcIixcclxuICBjb25maXJtTW9kYWxTZWxlY3RvcjogXCIjY29uZmlybS1tb2RhbFwiLFxyXG4gIG1vZGFsQ29uZmlybUJ1dHRvblNlbGVjdG9yOiBcIi5tb2RhbF9fYnV0dG9uLWNvbmZpcm1cIixcclxuICBtb2RhbENhbmNlbEJ1dHRvblNlbGVjdG9yOiBcIi5tb2RhbF9fYnV0dG9uLWNhbmNlbFwiLFxyXG4gIGVkaXRBdmF0YXJTZWxlY3RvcjogXCIjZWRpdC1hdmF0YXItbW9kYWxcIixcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IG5ld1Bvc3RNb2RhbFBsYWNlaG9sZGVycyA9IHtcclxuICBcInBvc3QtaW1hZ2UtbGlua1wiOiBcIlBhc3RlIGEgbGluayB0byB0aGUgcGljdHVyZVwiLFxyXG4gIFwicG9zdC1jYXB0aW9uXCI6IFwiVHlwZSB5b3VyIGNhcHRpb25cIlxyXG59XHJcblxyXG5leHBvcnQgY29uc3QgdXNlclByb2ZpbGVTZXR0aW5ncyA9IHtcclxuICBkZWZhdWx0VXNlcm5hbWU6IFwiUGxlYXNlIGlucHV0IG5hbWVcIixcclxuICBkZWZhdWx0RGVzY3JpcHRpb246IFwiUGxlYXNlIGlucHV0IGRlc2NyaXB0aW9uXCIsXHJcbiAgZGVmYXVsdFByb2ZpbGVJbWFnZTogXCJodHRwczovL3d3dy5pbWRiLmNvbS9uYW1lL25tMTEyMDE2OS9tZWRpYXZpZXdlci9ybTc4MjQ4NTI0OS8/cmVmXz1ubV9vdl9waFwiLFxyXG4gIHByb2ZpbGVOYW1lU2VsZWN0b3I6IFwiLnByb2ZpbGVfX25hbWVcIixcclxuICBwcm9maWxlRGVzY3JpcHRpb25TZWxlY3RvcjogXCIucHJvZmlsZV9fZGVzY3JpcHRpb25cIixcclxuICBwcm9maWxlQXZhdGFyU2VsZWN0b3I6IFwiLnByb2ZpbGVfX2F2YXRhclwiXHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCByb3V0ZURhdGEgPSB7XHJcbiAgZ2V0VXNlckluZm86IHttZXRob2Q6ICdHRVQnLCByb3V0ZTogJy91c2Vycy9tZSd9LFxyXG4gIHVwZGF0ZVVzZXJQcm9maWxlOiB7bWV0aG9kOiAnUEFUQ0gnLCByb3V0ZTogJy91c2Vycy9tZSd9LFxyXG4gIHVwZGF0ZVVzZXJBdmF0YXI6IHttZXRob2Q6ICdQQVRDSCcsIHJvdXRlOiAnL3VzZXJzL21lL2F2YXRhcid9LFxyXG4gIGdldENhcmRzOiB7bWV0aG9kOiAnR0VUJywgcm91dGU6ICcvY2FyZHMnfSxcclxuICBjcmVhdGVDYXJkOiB7bWV0aG9kOiAnUE9TVCcsIHJvdXRlOiAnL2NhcmRzJ30sXHJcbiAgZGVsZXRlQ2FyZEJ5SWQ6IHttZXRob2Q6ICdERUxFVEUnLCByb3V0ZTogJy9jYXJkcy8nfSxcclxuICBsaWtlQ2FyZFVwZGF0ZVJvdXRlOiB7bWV0aG9kOiAnUFVUJywgcm91dGU6ICcvY2FyZHMvOmNhcmRJZC9saWtlcyd9LFxyXG4gIGRpc2xpa2VDYXJkVXBkYXRlUm91dGU6IHttZXRob2Q6ICdERUxFVEUnLCByb3V0ZTogJy9jYXJkcy86Y2FyZElkL2xpa2VzJ30sXHJcbiAgXHJcbiAgbGlrZUNhcmRSZXBsYWNlS2V5OiBcIjpjYXJkSWRcIixcclxufSIsImltcG9ydCB7IGNhcmRTZWxlY3RvcnMgfSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzLmpzXCI7XHJcbmltcG9ydCB7IGNhcmRTZXR0aW5ncyB9IGZyb20gXCIuLi91dGlscy9jb25zdGFudHMuanNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmRFbGVtZW50IHtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcih7IG5hbWUsIGxpbmssIGlzTGlrZWQsIGlkLCBpbWFnZUNsaWNrTWFuYWdlciwgb25EZWxldGVBUElNYW5hZ2VyLCBvbkxpa2VBUElNYW5hZ2VyLCBkZWxldGVDb25maXJtYXRpb25NYW5hZ2VyIH0gKSB7XHJcbiAgICAgICAgdGhpcy5pZCA9IGlkO1xyXG4gICAgICAgIHRoaXMuX2NhcmRUZW1wbGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY2FyZFNlbGVjdG9ycy50ZW1wbGF0ZSk7XHJcbiAgICAgICAgdGhpcy5fY2FyZEVsZW1lbnQgPSB0aGlzLl9jYXJkVGVtcGxhdGUuY29udGVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRcIikuY2xvbmVOb2RlKHRydWUpO1xyXG4gICAgICAgIHRoaXMuX2NhcmRJbWFnZSA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoY2FyZFNlbGVjdG9ycy5pbWFnZSk7IFxyXG4gICAgICAgIHRoaXMuX2xpa2VCdXR0b24gPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKGNhcmRTZWxlY3RvcnMubGlrZUJ1dHRvbik7XHJcbiAgICAgICAgdGhpcy5fZGVsZXRlQnV0dG9uID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihjYXJkU2VsZWN0b3JzLmRlbGV0ZUJ1dHRvbik7XHJcbiAgICAgICAgdGhpcy5fdGl0bGVFbGVtZW50ID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihjYXJkU2VsZWN0b3JzLmNhcmRUaXRsZSk7XHJcblxyXG4gICAgICAgIHRoaXMuX2NhcmRVbmxpa2VkSW1hZ2UgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKGNhcmRTZWxlY3RvcnMudW5saWtlZEltYWdlKTtcclxuICAgICAgICB0aGlzLl9jYXJkTGlrZWRJbWFnZSA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoY2FyZFNlbGVjdG9ycy5saWtlZEltYWdlKTtcclxuICAgICAgICBcclxuICAgICAgICB0aGlzLl9vbkRlbGV0ZUFQSU1hbmFnZXIgPSBvbkRlbGV0ZUFQSU1hbmFnZXI7XHJcblxyXG4gICAgICAgIHRoaXMuX29uTGlrZUFQSU1hbmFnZXIgPSBvbkxpa2VBUElNYW5hZ2VyO1xyXG4gICAgICAgIHRoaXMuZGVsZXRlQ29uZmlybWF0aW9uTWFuYWdlciA9IGRlbGV0ZUNvbmZpcm1hdGlvbk1hbmFnZXI7ICAgICAgICBcclxuICAgICAgICB0aGlzLl9pbWFnZUNsaWNrTWFuYWdlciA9IGltYWdlQ2xpY2tNYW5hZ2VyO1xyXG4gICAgICAgIHRoaXMuc2V0VGl0bGUobmFtZSk7XHJcbiAgICAgICAgdGhpcy5zZXRDYXJkSW1hZ2UobGluayk7XHJcbiAgICAgICAgdGhpcy5zZXRDYXJkSW1hZ2VBbHQobmFtZSk7XHJcbiAgICAgICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgICAgICB0aGlzLl9zZXRMaWtlKGlzTGlrZWQpO1xyXG4gICAgICAgIFxyXG4gICAgfVxyXG5cclxuICAgIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgICAgICB0aGlzLl9jYXJkSW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCgpID0+IHRoaXMub25JbWFnZUNsaWNrKCkpO1xyXG4gICAgICAgIHRoaXMuX2xpa2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCgpID0+IHRoaXMub25MaWtlQ2xpY2soKSk7XHJcbiAgICAgICAgdGhpcy5fZGVsZXRlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywoKSA9PiB0aGlzLl9vbkRlbGV0ZUNsaWNrKCkpO1xyXG4gICAgfVxyXG5cclxuICAgIHNldFRpdGxlKHRpdGxlKSB7XHJcbiAgICAgICAgaWYodHlwZW9mIHRpdGxlID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICB0aGlzLnRpdGxlVGV4dCA9IHRpdGxlO1xyXG4gICAgICAgICAgICB0aGlzLl90aXRsZUVsZW1lbnQudGV4dENvbnRlbnQgPSB0aGlzLnRpdGxlVGV4dDtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgTmV3IGNhcmQgdGl0bGUgaXMgbm90IGEgc3RyaW5nLiBTZXR0aW5nIHRvIGRlZmF1bHQuYCk7XHJcbiAgICAgICAgICAgIHRoaXMudGl0bGVUZXh0ID0gY2FyZFNldHRpbmdzLmRlZmF1bHRUaXRsZTtcclxuICAgICAgICAgICAgdGhpcy5fdGl0bGVFbGVtZW50LnRleHRDb250ZW50ID0gdGhpcy50aXRsZVRleHQ7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHNldENhcmRJbWFnZShpbWFnZUxpbmspIHtcclxuICAgICAgICB0aGlzLmltYWdlTGluayA9IGltYWdlTGluaztcclxuICAgICAgICAvL2hvdyBjYW4gSSBtYWtlIHN1cmUgdGhlIGltYWdlIGlzIGxvYWRlZCBiZWZvcmUgd2Ugc2V0QXR0cmlidXRlP1xyXG4gICAgICAgIC8vZmVlbHMgbm90IGluIHNjb3BlIGF0bSBidXQgSSByZWFsbHksIHJlYWxseSB3YW50IHRvIGZpeCBpdC5cclxuICAgICAgICB0aGlzLl9jYXJkSW1hZ2Uuc2V0QXR0cmlidXRlKCdzcmMnLCB0aGlzLmltYWdlTGluayk7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0Q2FyZEltYWdlQWx0KGFsdFRleHQpIHtcclxuICAgICAgICB0aGlzLmltYWdlQWx0VGV4dCA9IGFsdFRleHQgPyBhbHRUZXh0IDogdGhpcy50aXRsZVRleHQ7IFxyXG4gICAgICAgIHRoaXMuX2NhcmRJbWFnZS5zZXRBdHRyaWJ1dGUoJ2FsdCcsIHRoaXMuaW1hZ2VBbHRUZXh0KTtcclxuICAgIH1cclxuXHJcbiAgICBfc2V0TGlrZShib29sKSB7XHJcbiAgICAgICAgYm9vbCA/IHRoaXMuYWN0aXZhdGVMaWtlQnV0dG9uKCkgOiB0aGlzLmRlYWN0aXZhdGVMaWtlQnV0dG9uKCk7XHJcbiAgICB9XHJcblxyXG4gICAgb25MaWtlQ2xpY2soKSB7XHJcbiAgICAgICAgaWYodGhpcy5pc0xpa2VBY3RpdmUoKSkge1xyXG4gICAgICAgICAgICB0aGlzLl9vbkxpa2VBUElNYW5hZ2VyKHRoaXMuaWQsIGZhbHNlKVxyXG4gICAgICAgICAgICAudGhlbigocmVzdWx0KSA9PiB7IGlmIChyZXN1bHQpIHRoaXMuZGVhY3RpdmF0ZUxpa2VCdXR0b24oKSB9KVxyXG4gICAgICAgIH0gIFxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLl9vbkxpa2VBUElNYW5hZ2VyKHRoaXMuaWQsIHRydWUpXHJcbiAgICAgICAgICAgIC50aGVuKChyZXN1bHQpID0+IHsgaWYgKHJlc3VsdCkgdGhpcy5hY3RpdmF0ZUxpa2VCdXR0b24oKSB9KVxyXG4gICAgICAgIH0gXHJcbiAgICB9XHJcblxyXG4gICAgaXNMaWtlQWN0aXZlKCkge1xyXG4gICAgICAgIC8vdGhpcyBsb2dpYyBpbXBsZW1lbnRlZCBiZWZvcmUgQVBJIHdhcyBpbXBsZW1lbnRlZC5cclxuICAgICAgICAvL3Nob3VsZCB0aGUgc2VydmVyIGJlIHRoZSBhdXRob3JpdHk/IG9yIHRoZSBicm93c2VyP1xyXG4gICAgICAgIHJldHVybiAhdGhpcy5fY2FyZExpa2VkSW1hZ2UuY2xhc3NMaXN0LmNvbnRhaW5zKCdjYXJkX19saWtlZC1pbWFnZV9faW5hY3RpdmUnKTtcclxuICAgIH1cclxuXHJcbiAgICBhY3RpdmF0ZUxpa2VCdXR0b24oKSB7IFxyXG4gICAgICAgICAgICB0aGlzLl9jYXJkTGlrZWRJbWFnZS5jbGFzc0xpc3QucmVtb3ZlKCdjYXJkX19saWtlZC1pbWFnZV9faW5hY3RpdmUnKTtcclxuICAgICAgICAgICAgdGhpcy5fY2FyZFVubGlrZWRJbWFnZS5jbGFzc0xpc3QuYWRkKCdjYXJkX191bmxpa2VkLWltYWdlX19pbmFjdGl2ZScpO1xyXG4gICAgfVxyXG5cclxuICAgIGRlYWN0aXZhdGVMaWtlQnV0dG9uKCkge1xyXG4gICAgICAgIHRoaXMuX2NhcmRMaWtlZEltYWdlLmNsYXNzTGlzdC5hZGQoJ2NhcmRfX2xpa2VkLWltYWdlX19pbmFjdGl2ZScpO1xyXG4gICAgICAgIHRoaXMuX2NhcmRVbmxpa2VkSW1hZ2UuY2xhc3NMaXN0LnJlbW92ZSgnY2FyZF9fdW5saWtlZC1pbWFnZV9faW5hY3RpdmUnKTtcclxuICAgIH1cclxuXHJcbiAgICByZW1vdmUoKSB7XHJcbiAgICAgICAgdGhpcy5fY2FyZEVsZW1lbnQucmVtb3ZlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgX29uRGVsZXRlQ2xpY2soKSB7XHJcbiAgICAgICAgdGhpcy5fb25EZWxldGVBUElNYW5hZ2VyKHRoaXMuZGVsZXRlQ29uZmlybWF0aW9uTWFuYWdlciwgdGhpcy5pZClcclxuICAgICAgICAudGhlbihyZXN1bHQgPT4ge2lmKHJlc3VsdCkgdGhpcy5yZW1vdmUoKTt9KVxyXG4gICAgfVxyXG5cclxuICAgIG9uSW1hZ2VDbGljaygpIHtcclxuICAgICAgICB0aGlzLl9pbWFnZUNsaWNrTWFuYWdlcigpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFZpZXcoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NhcmRFbGVtZW50O1xyXG4gICAgfVxyXG5cclxufVxyXG4iLCJpbXBvcnQgeyBtb2RhbFNlbGVjdG9ycyB9IGZyb20gXCIuLi91dGlscy9jb25zdGFudHMuanNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE1vZGFsIHtcclxuICAgIGNvbnN0cnVjdG9yKCB7IG1vZGFsU2VsZWN0b3IgfSApIHtcclxuICAgICAgICB0aGlzLl9tb2RhbFNlbGVjdG9yID0gbW9kYWxTZWxlY3RvcjtcclxuICAgICAgICB0aGlzLl9tb2RhbEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG1vZGFsU2VsZWN0b3IpO1xyXG4gICAgICAgIHRoaXMuX2hhbmRsZUVzY2FwZUNsb3NlID0gdGhpcy5faGFuZGxlRXNjYXBlQ2xvc2UuYmluZCh0aGlzKTsgXHJcbiAgICAgICAgdGhpcy5fY2xvc2VCdXR0b24gPSB0aGlzLl9tb2RhbEVsZW1lbnQucXVlcnlTZWxlY3Rvcihtb2RhbFNlbGVjdG9ycy5tb2RhbENsb3NlQnV0dG9uKTtcclxuXHJcbiAgICAgICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIH1cclxuXHJcbiAgICBvcGVuKCkge1xyXG4gICAgICAgIHRoaXMuX21vZGFsRWxlbWVudC5jbGFzc0xpc3QuYWRkKG1vZGFsU2VsZWN0b3JzLm9wZW5Nb2RhbENsYXNzKTtcclxuICAgICAgICB0aGlzLl9zZXRFc2NhcGVMaXN0ZW5lcih0cnVlKTtcclxuICAgIH1cclxuXHJcbiAgICBjbG9zZSgpIHtcclxuICAgICAgICB0aGlzLl9tb2RhbEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShtb2RhbFNlbGVjdG9ycy5vcGVuTW9kYWxDbGFzcyk7XHJcbiAgICAgICAgdGhpcy5fc2V0RXNjYXBlTGlzdGVuZXIoZmFsc2UpO1xyXG4gICAgfVxyXG5cclxuICAgIF9oYW5kbGVFc2NhcGVDbG9zZShldnQpIHtcclxuICAgICAgICBpZihldnQua2V5ID09PSAnRXNjYXBlJykge1xyXG4gICAgICAgICAgICB0aGlzLmNsb3NlKCk7IFxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgX3NldEVzY2FwZUxpc3RlbmVyKGJvb2wpIHtcclxuICAgICAgICBib29sID8gZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsdGhpcy5faGFuZGxlRXNjYXBlQ2xvc2UpIDogZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsdGhpcy5faGFuZGxlRXNjYXBlQ2xvc2UpO1xyXG4gICAgfVxyXG5cclxuICAgIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgICAgICB0aGlzLl9jbG9zZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuY2xvc2UoKSk7XHJcbiAgICAgICAgdGhpcy5fbW9kYWxFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywoZXZ0KSA9PiB0aGlzLl9oYW5kbGVNb2RhbE92ZXJsYXlDbGljayhldnQpKTtcclxuICAgICAgICBcclxuICAgIH1cclxuXHJcbiAgICBfaGFuZGxlTW9kYWxPdmVybGF5Q2xpY2soZXZ0KSB7XHJcbiAgICAgICAgaWYoZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMobW9kYWxTZWxlY3RvcnMubW9kYWxFbGVtZW50Q2xhc3MpKSB0aGlzLmNsb3NlKCk7XHJcbiAgICB9XHJcblxyXG59IiwiaW1wb3J0IE1vZGFsIGZyb20gXCIuL01vZGFsLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNb2RhbFdpdGhGb3JtIGV4dGVuZHMgTW9kYWwge1xyXG4gICAgY29uc3RydWN0b3IoeyBtb2RhbFNlbGVjdG9yLCBvblN1Ym1pdENhbGxiYWNrIH0gKSB7XHJcbiAgICAgICAgc3VwZXIoeyBtb2RhbFNlbGVjdG9yIH0pO1xyXG5cclxuICAgICAgICAvL25vdGU6IG9uU3VibWl0Q2FsbGJhY2sgbXVzdCBhbHdheXMgcmV0dXJuIGEgcHJvbWlzZS5cclxuICAgICAgICB0aGlzLl9vblN1Ym1pdENhbGxiYWNrID0gb25TdWJtaXRDYWxsYmFjaztcclxuICAgICAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSB0aGlzLl9tb2RhbEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fc3VibWl0LWJ1dHRvblwiKTtcclxuICAgICAgICB0aGlzLl9pbnB1dEZpZWxkcyA9IHRoaXMuX21vZGFsRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcubW9kYWxfX2lucHV0Jyk7XHJcbiAgICAgICAgdGhpcy5fZm9ybSA9IHRoaXMuX21vZGFsRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtXCIpO1xyXG4gICAgICAgIHRoaXMuX2N1cnJlbnRQcm9maWxlTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19uYW1lJyk7XHJcbiAgICAgICAgdGhpcy5fY3VycmVudFByb2ZpbGVEZXNjcmlwdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19kZXNjcmlwdGlvbicpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldEZvcm1FbGVtZW50KCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9mb3JtO1xyXG4gICAgfVxyXG5cclxuICAgIF9yZXNldElucHV0cygpIHtcclxuICAgICAgICB0aGlzLl9pbnB1dEZpZWxkcy5mb3JFYWNoKChmaWVsZCkgPT4ge1xyXG4gICAgICAgICAgICBmaWVsZC52YWx1ZSA9IFwiXCI7XHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICAgICAgc3VwZXIuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICAgICAgdGhpcy5fbW9kYWxFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4gdGhpcy5fb25TdWJtaXQoZXZ0KSk7XHJcbiAgICB9XHJcblxyXG4gICAgX2dldElucHV0VmFsdWVzKCkge1xyXG4gICAgICAgIGNvbnN0IGlucHV0VmFsdWVzID0ge307IFxyXG4gICAgICAgIHRoaXMuX2lucHV0RmllbGRzLmZvckVhY2goKGZpZWxkKSA9PiB7XHJcbiAgICAgICAgICAgIGlucHV0VmFsdWVzW2ZpZWxkLm5hbWVdID0gZmllbGQudmFsdWU7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXR1cm4gaW5wdXRWYWx1ZXM7XHJcbiAgICB9XHJcblxyXG4gICAgX29uU3VibWl0KGV2dCkge1xyXG4gICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIHRoaXMuX3NldFN1Ym1pdFRvU3VibWl0dGluZygpO1xyXG4gICAgICAgIHRoaXMuX29uU3VibWl0Q2FsbGJhY2sodGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSlcclxuICAgICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuX3Jlc2V0SW5wdXRzKCk7XHJcbiAgICAgICAgICAgIHRoaXMuX3NldFN1Ym1pdFRvU3VibWl0KCk7XHJcbiAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgIC5jYXRjaCgoKSA9PntcclxuICAgICAgICAgICAgdGhpcy5fc2V0U3VibWl0VG9TdWJtaXQoKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgIFxyXG4gICAgfVxyXG4gICAgXHJcbiAgICBfc2V0U3VibWl0VG9TdWJtaXR0aW5nKCkge1xyXG4gICAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCA9IFwiU3VibWl0dGluZy4uLlwiO1xyXG4gICAgfVxyXG5cclxuICAgIF9zZXRTdWJtaXRUb1N1Ym1pdCgpIHtcclxuICAgICAgICB0aGlzLl9zdWJtaXRCdXR0b24udGV4dENvbnRlbnQgPSBcIlN1Ym1pdFwiO1xyXG4gICAgfVxyXG5cclxuICAgIHNldERlZmF1bHRJbnB1dHMoZGVmYXVsdHNPYmplY3QpIHtcclxuICAgICAgICB0aGlzLl9pbnB1dEZpZWxkcy5mb3JFYWNoKChmaWVsZCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoZGVmYXVsdHNPYmplY3RbZmllbGQubmFtZV0pIGZpZWxkLnZhbHVlID0gZGVmYXVsdHNPYmplY3RbZmllbGQubmFtZV07XHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICBzZXRQbGFjZWhvbGRlcklucHV0cyhkZWZhdWx0c09iamVjdCkge1xyXG4gICAgICAgIHRoaXMuX2lucHV0RmllbGRzLmZvckVhY2goKGZpZWxkKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChkZWZhdWx0c09iamVjdFtmaWVsZC5uYW1lXSkgZmllbGQuc2V0QXR0cmlidXRlKCdwbGFjZWhvbGRlcicsIGRlZmF1bHRzT2JqZWN0W2ZpZWxkLm5hbWVdKTtcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxufSIsIlxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcclxuICBjb25zdHJ1Y3RvcihzZXR0aW5ncywgZm9ybUVsZW1lbnQpIHtcclxuICAgICAgdGhpcy5fc2V0dGluZ3MgPSBzZXR0aW5ncztcclxuICAgICAgdGhpcy5fZm9ybUVsZW1lbnQgPSBmb3JtRWxlbWVudDtcclxuICAgICAgdGhpcy5fc2V0Rm9ybUlucHV0RWxlbWVudHMoKTtcclxuICAgICAgdGhpcy5fc2V0Rm9ybUJ1dHRvbnMoKTtcclxuXHJcbiAgfVxyXG5cclxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xyXG4gICAgICB0aGlzLl9mb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcclxuICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgfSk7XHJcbiAgICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgfVxyXG5cclxuICByZXNldFZhbGlkYXRpb24oKSB7XHJcbiAgICAgIHRoaXMuX2Rpc2FibGVCdXR0b24oKTtcclxuICAgICAgdGhpcy5fY2xlYXJGb3JtSW5wdXRFbGVtZW50cygpO1xyXG4gIH1cclxuXHJcbiAgX3Nob3dJbnB1dEVycm9yID0gKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9nZXRFcnJvckVsZW1lbnQoaW5wdXRFbGVtZW50KTtcclxuICAgICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fc2V0dGluZ3MuaW5wdXRFcnJvckNsYXNzKTtcclxuICAgICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gaW5wdXRFbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlO1xyXG4gICAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9zZXR0aW5ncy5lcnJvckNsYXNzKTtcclxuICAgIH07XHJcblxyXG4gIF9oaWRlSW5wdXRFcnJvciA9IChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZ2V0RXJyb3JFbGVtZW50KGlucHV0RWxlbWVudCk7XHJcbiAgICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX3NldHRpbmdzLmlucHV0RXJyb3JDbGFzcyk7XHJcbiAgICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX3NldHRpbmdzLmVycm9yQ2xhc3MpO1xyXG4gICAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBcIlwiO1xyXG4gICAgfTtcclxuXHJcbiAgICBfY2hlY2tGaWVsZFZhbGlkaXR5ID0gKGlucHV0RWxlbWVudCkgPT4gIHtcclxuICAgICAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcclxuICAgICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihcclxuICAgICAgICAgIGlucHV0RWxlbWVudCxcclxuICAgICAgICAgIGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZSxcclxuICAgICAgICApO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gIF9nZXRFcnJvckVsZW1lbnQoaW5wdXRFbGVtZW50KSB7XHJcbiAgICByZXR1cm4gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgIyR7aW5wdXRFbGVtZW50LmlkfS1pbnB1dC1lcnJvcmApO1xyXG4gIH1cclxuXHJcbiAgX2NoZWNrSW52YWxpZElucHV0KCkge1xyXG4gICAgICByZXR1cm4gdGhpcy5fZm9ybUlucHV0RWxlbWVudHMuZXZlcnkoKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICAgIGlmKGlucHV0RWxlbWVudC52YWx1ZS5sZW5ndGggPT09IDApIHtyZXR1cm4gZmFsc2V9O1xyXG4gICAgICAgICAgcmV0dXJuIGlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZDsgICAgICAgICBcclxuICAgICAgfSk7XHJcbiAgfVxyXG5cclxuICBfc2V0Rm9ybUlucHV0RWxlbWVudHMoKSB7XHJcbiAgICAgIHRoaXMuX2Zvcm1JbnB1dEVsZW1lbnRzID0gQXJyYXkuZnJvbShcclxuICAgICAgICAgIHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5fc2V0dGluZ3MuaW5wdXRTZWxlY3RvciksXHJcbiAgICAgICk7XHJcbiAgfVxyXG5cclxuICBfY2xlYXJGb3JtSW5wdXRFbGVtZW50cygpIHtcclxuICAgICAgdGhpcy5fZm9ybUlucHV0RWxlbWVudHMuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgICAgICBpbnB1dEVsZW1lbnQudmFsdWUgPSBcIlwiO1xyXG4gICAgICB9KTtcclxuICB9XHJcblxyXG4gIF9zZXRGb3JtQnV0dG9ucygpIHtcclxuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgICAgICB0aGlzLl9zZXR0aW5ncy5zdWJtaXRCdXR0b25TZWxlY3RvcixcclxuICAgICAgICApO1xyXG4gIH1cclxuXHJcbiAgX3RvZ2dsZVN1Ym1pdEJ1dHRvbigpIHtcclxuICAgICAgdGhpcy5fY2hlY2tJbnZhbGlkSW5wdXQoKSA/IHRoaXMuX2VuYWJsZUJ1dHRvbigpIDogdGhpcy5fZGlzYWJsZUJ1dHRvbigpO1xyXG4gIH1cclxuXHJcbiAgX2Rpc2FibGVCdXR0b24oKSB7XHJcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9zZXR0aW5ncy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IHRydWU7XHJcbiAgfVxyXG5cclxuICBfZW5hYmxlQnV0dG9uKCkge1xyXG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fc2V0dGluZ3MuaW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSBmYWxzZTtcclxuICB9XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHsgICBcclxuICAgICAgdGhpcy5fdG9nZ2xlU3VibWl0QnV0dG9uKCk7XHJcbiAgICBcclxuICAgICAgdGhpcy5fZm9ybUlucHV0RWxlbWVudHMuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XHJcbiAgICAgICAgICB0aGlzLl9jaGVja0ZpZWxkVmFsaWRpdHkoaW5wdXRFbGVtZW50KTtcclxuICAgICAgICAgIHRoaXMuX3RvZ2dsZVN1Ym1pdEJ1dHRvbigpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9KTtcclxuICAgIH07XHJcbn1cclxuXHJcblxyXG4vLyBleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBlbmFibGVWYWxpZGF0aW9uKHNldHRpbmdzKSB7XHJcbi8vICAgY29uc3QgZm9ybXNBcnJheSA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChzZXR0aW5ncy5mb3JtU2VsZWN0b3IpKTtcclxuLy8gICBjb25zdCBpbnB1dEZpZWxkcyA9IGdldElucHV0RmllbGRzRnJvbUZvcm1zKGZvcm1zQXJyYXkpO1xyXG4vLyAgIHNldEFsbEZpZWxkVmFsaWRhdGlvbkxpc3RlbmVycyhpbnB1dEZpZWxkcyk7XHJcbi8vIH07XHJcblxyXG4vLyBmdW5jdGlvbiBvbkZpZWxkSW5wdXQoZXZlbnQpIHtcclxuLy8gICB2YWxpZGF0aW9uRGVidWcoZXZlbnQsIGFyZ3VtZW50cy5jYWxsZWUubmFtZSk7XHJcbi8vICAgY29uc3QgaW5wdXRWYWxpZGl0eSA9IGNoZWNrSW5wdXRWYWxpZGl0eShldmVudCk7XHJcbi8vICAgY29uc3QgaW5wdXRGaWVsZCA9IGV2ZW50LnRhcmdldDtcclxuLy8gICBjb25zdCBzdWJtaXRCdXR0b24gPSBnZXRTdWJtaXRCdXR0b25Gcm9tSW5wdXRGaWVsZChpbnB1dEZpZWxkKTtcclxuLy8gICBjb25zdCBpbnB1dEZvcm0gPSBpbnB1dEZpZWxkLmNsb3Nlc3QoJ2Zvcm0nKTtcclxuLy8gICBjaGVja0ZpZWxkSW5wdXRFcnJvcnMoaW5wdXRGaWVsZCwgaW5wdXRWYWxpZGl0eSk7IFxyXG4vLyAgIHN1Ym1pdEJ1dHRvblN0YXRlSGFuZGxlcihzdWJtaXRCdXR0b24sIGNoZWNrRm9ybUlucHV0RmllbGRWYWxpZGl0eShpbnB1dEZvcm0pKTtcclxuLy8gfVxyXG5cclxuLy8gZnVuY3Rpb24gcmVzZXRNb2RhbEZvcm0obW9kYWwpIHtcclxuLy8gICBjb25zdCBpbnB1dEZpZWxkcyA9IGdldEZvcm1JbnB1dEZpZWxkc0FycmF5KG1vZGFsLnF1ZXJ5U2VsZWN0b3Ioc2V0dGluZ3MuZm9ybVNlbGVjdG9yKSk7XHJcbi8vICAgaW5wdXRGaWVsZHMuZm9yRWFjaChpbnB1dEZpZWxkID0+IHJlc2V0SW5wdXRGaWVsZChpbnB1dEZpZWxkKSk7XHJcbi8vICAgZGlzYWJsZVN1Ym1pdEJ1dHRvbihtb2RhbC5xdWVyeVNlbGVjdG9yKHNldHRpbmdzLnN1Ym1pdEJ1dHRvblNlbGVjdG9yKSk7XHJcbi8vIH1cclxuXHJcbi8vIGZ1bmN0aW9uIHJlc2V0SW5wdXRGaWVsZChpbnB1dEZpZWxkKSB7XHJcbi8vICAgaW5wdXRGaWVsZC50ZXh0Q29udGVudCA9IFwiXCI7XHJcbi8vICAgZGVhY3RpdmF0ZVZhbGlkYXRpb25FcnJvcihpbnB1dEZpZWxkKTtcclxuLy8gfVxyXG5cclxuLy8gZnVuY3Rpb24gY2hlY2tGb3JtRmllbGRJbnB1dEVycm9ycyhmb3JtKSB7XHJcbi8vICAgZ2V0Rm9ybUlucHV0RmllbGRzQXJyYXkoZm9ybSkuZm9yRWFjaChmaWVsZCA9PiBjaGVja0ZpZWxkSW5wdXRFcnJvcnMoZmllbGQpKTtcclxuLy8gfVxyXG5cclxuLy8gZnVuY3Rpb24gY2hlY2tGaWVsZElucHV0RXJyb3JzKGlucHV0RmllbGQsIGlucHV0VmFsaWRpdHkpIHtcclxuLy8gICBpbnB1dFZhbGlkaXR5ID8gZGVhY3RpdmF0ZVZhbGlkYXRpb25FcnJvcihpbnB1dEZpZWxkKSA6IGFjdGl2YXRlVmFsaWRhdGlvbkVycm9yKGlucHV0RmllbGQpO1xyXG4vLyB9XHJcblxyXG4vLyBmdW5jdGlvbiBzdWJtaXRCdXR0b25TdGF0ZUhhbmRsZXIoc3VibWl0QnV0dG9uLCBzdGF0ZUJvb2wpIHtcclxuLy8gICBzdGF0ZUJvb2wgPyBlbmFibGVTdWJtaXRCdXR0b24oc3VibWl0QnV0dG9uKSA6IGRpc2FibGVTdWJtaXRCdXR0b24oc3VibWl0QnV0dG9uKTsgXHJcbi8vIH1cclxuXHJcbi8vIGZ1bmN0aW9uIHVwZGF0ZVN1Ym1pdEJ1dHRvbkZyb21Gb3JtVmFsaWRpdHkoZm9ybSkge1xyXG4vLyAgIC8vIHZhbGlkYXRpb25EZWJ1Zyhmb3JtLCBhcmd1bWVudHMuY2FsbGVlLm5hbWUpO1xyXG4vLyAgIGNvbnNvbGUubG9nKGNoZWNrRm9ybUlucHV0RmllbGRWYWxpZGl0eShmb3JtKSk7XHJcbi8vICAgc3VibWl0QnV0dG9uU3RhdGVIYW5kbGVyKGdldFN1Ym1pdEJ1dHRvbkZyb21Gb3JtKGZvcm0pLCBjaGVja0Zvcm1JbnB1dEZpZWxkVmFsaWRpdHkoZm9ybSkpO1xyXG4vLyB9XHJcblxyXG4vLyBmdW5jdGlvbiBjaGVja0Zvcm1JbnB1dEZpZWxkVmFsaWRpdHkoZm9ybSkge1xyXG4vLyAgIGNvbnN0IGlucHV0RmllbGRBcnJheSA9IGdldEZvcm1JbnB1dEZpZWxkc0FycmF5KGZvcm0pO1xyXG4vLyAgIC8vIHZhbGlkYXRpb25EZWJ1ZyhjaGVja0lucHV0RmllbGRWYWxpZGl0eShpbnB1dEZpZWxkQXJyYXkpICYmIGNoZWNrSW5wdXRGaWVsZHNGaWxsZWQoaW5wdXRGaWVsZEFycmF5KSwgYXJndW1lbnRzLmNhbGxlZS5uYW1lKTtcclxuLy8gICBpZighY2hlY2tJbnB1dEZpZWxkc0ZpbGxlZCkge1xyXG4vLyAgICAgcmV0dXJuIGZhbHNlO1xyXG4vLyAgIH1cclxuLy8gICByZXR1cm4gY2hlY2tJbnB1dEZpZWxkVmFsaWRpdHkoaW5wdXRGaWVsZEFycmF5KTtcclxuLy8gfVxyXG5cclxuLy8gZnVuY3Rpb24gY2hlY2tJbnB1dEZpZWxkVmFsaWRpdHkoaW5wdXRGaWVsZEFycmF5KSB7XHJcbi8vICAgcmV0dXJuIGlucHV0RmllbGRBcnJheS5ldmVyeSgoaW5wdXRGaWVsZCkgPT4ge1xyXG4vLyAgICAgcmV0dXJuIGlucHV0RmllbGQudmFsaWRpdHkudmFsaWQ7XHJcbi8vICAgfSk7XHJcbi8vIH1cclxuXHJcbi8vIGZ1bmN0aW9uIGNoZWNrSW5wdXRGaWVsZHNGaWxsZWQoaW5wdXRGaWVsZEFycmF5KSB7XHJcbi8vICAgcmV0dXJuIGlucHV0RmllbGRBcnJheS5ldmVyeSgoaW5wdXRGaWVsZCkgPT4ge1xyXG4vLyAgICAgY29uc29sZS5sb2coaW5wdXRGaWVsZC52YWx1ZSk7XHJcbi8vICAgICByZXR1cm4gISFpbnB1dEZpZWxkLnZhbHVlO1xyXG4vLyAgIH0pO1xyXG4vLyB9XHJcblxyXG4vLyBmdW5jdGlvbiBnZXRTdWJtaXRCdXR0b25Gcm9tRm9ybShmb3JtKSB7XHJcbi8vICAgcmV0dXJuIGZvcm1bc2V0dGluZ3Muc3VibWl0QnV0dG9uTmFtZV07XHJcbi8vIH1cclxuXHJcbi8vIGZ1bmN0aW9uIGdldFN1Ym1pdEJ1dHRvbkZyb21JbnB1dEZpZWxkKGlucHV0RmllbGQpIHtcclxuLy8gICB2YWxpZGF0aW9uRGVidWcoaW5wdXRGaWVsZC5jbG9zZXN0KHNldHRpbmdzLmZvcm1TZWxlY3RvcikuaWQsIGFyZ3VtZW50cy5jYWxsZWUubmFtZSk7XHJcbi8vICAgcmV0dXJuIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYC4ke2lucHV0RmllbGQuY2xvc2VzdChzZXR0aW5ncy5mb3JtU2VsZWN0b3IpLmlkfS1zdWJtaXQtYnV0dG9uYCk7XHJcbi8vIH1cclxuXHJcbi8vIGZ1bmN0aW9uIGVuYWJsZVN1Ym1pdEJ1dHRvbihzdWJtaXRCdXR0b24pIHtcclxuLy8gICBjb25zb2xlLmxvZyhzdWJtaXRCdXR0b24pO1xyXG4vLyAgIHN1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKHNldHRpbmdzLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4vLyAgIHN1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xyXG4vLyB9XHJcblxyXG4vLyBmdW5jdGlvbiBkaXNhYmxlU3VibWl0QnV0dG9uKHN1Ym1pdEJ1dHRvbikge1xyXG4vLyAgIHN1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QuYWRkKHNldHRpbmdzLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4vLyAgIHN1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IHRydWU7XHJcbi8vIH1cclxuXHJcbi8vIGZ1bmN0aW9uIGNoZWNrSW5wdXRWYWxpZGl0eShldmVudCkge1xyXG4vLyAgIHZhbGlkYXRpb25EZWJ1ZyhgJHtldmVudC50YXJnZXQudmFsaWRpdHkudmFsaWR9YCwgYXJndW1lbnRzLmNhbGxlZS5uYW1lKTtcclxuLy8gICByZXR1cm4gZXZlbnQudGFyZ2V0LnZhbGlkaXR5LnZhbGlkO1xyXG4vLyB9XHJcblxyXG4vLyBmdW5jdGlvbiBhY3RpdmF0ZVZhbGlkYXRpb25FcnJvcihpbnB1dEZpZWxkKSB7XHJcbi8vICAgY29uc3QgZXJyb3JFbGVtZW50ID0gZ2V0VmFsaWRhdGlvbkVycm9yRWxlbWVudChpbnB1dEZpZWxkKTtcclxuLy8gICBjb25zdCBlcnJvclZhbGlkYXRpb25NZXNzYWdlID0gZ2V0VmFsaWRhdGlvbkVycm9yTWVzc2FnZShpbnB1dEZpZWxkKTtcclxuICBcclxuLy8gICBhY3RpdmF0ZUVycm9yRmllbGRTdHlsZShpbnB1dEZpZWxkKTtcclxuLy8gICBzZXRFcnJvckVsZW1lbnRNZXNzYWdlKGVycm9yRWxlbWVudCwgZXJyb3JWYWxpZGF0aW9uTWVzc2FnZSk7XHJcbi8vICAgc2hvd0Vycm9yRWxlbWVudE1lc3NhZ2UoZXJyb3JFbGVtZW50KTtcclxuLy8gfVxyXG5cclxuLy8gZnVuY3Rpb24gZGVhY3RpdmF0ZVZhbGlkYXRpb25FcnJvcihpbnB1dEZpZWxkKSB7XHJcbi8vICAgLy92YWxpZGF0aW9uRGVidWcoYCR7ZXZlbnR9YCwgYXJndW1lbnRzLmNhbGxlZS5uYW1lKTtcclxuLy8gICBjb25zdCBlcnJvckVsZW1lbnQgPSBnZXRWYWxpZGF0aW9uRXJyb3JFbGVtZW50KGlucHV0RmllbGQpO1xyXG5cclxuLy8gICBkZWFjdGl2YXRlRXJyb3JGaWVsZFN0eWxlKGlucHV0RmllbGQpO1xyXG4vLyAgIHNldEVycm9yRWxlbWVudE1lc3NhZ2UoZXJyb3JFbGVtZW50LCBcIlwiKTtcclxuLy8gICBoaWRlRXJyb3JFbGVtZW50TWVzc2FnZShlcnJvckVsZW1lbnQpO1xyXG4vLyB9XHJcblxyXG4vLyBmdW5jdGlvbiBhY3RpdmF0ZUVycm9yRmllbGRTdHlsZShpbnB1dEZpZWxkKSB7XHJcbi8vICAgaW5wdXRGaWVsZC5jbGFzc0xpc3QuYWRkKHNldHRpbmdzLmlucHV0RXJyb3JTdHlsZSk7XHJcbi8vIH1cclxuXHJcbi8vIGZ1bmN0aW9uIGRlYWN0aXZhdGVFcnJvckZpZWxkU3R5bGUoaW5wdXRGaWVsZCkge1xyXG4vLyAgIGlucHV0RmllbGQuY2xhc3NMaXN0LnJlbW92ZShzZXR0aW5ncy5pbnB1dEVycm9yU3R5bGUpO1xyXG4vLyB9XHJcblxyXG4vLyBmdW5jdGlvbiBzaG93RXJyb3JFbGVtZW50TWVzc2FnZShlcnJvckVsZW1lbnQpIHtcclxuLy8gICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZChzZXR0aW5ncy5lcnJvckNsYXNzKTtcclxuLy8gfVxyXG5cclxuLy8gZnVuY3Rpb24gaGlkZUVycm9yRWxlbWVudE1lc3NhZ2UoZXJyb3JFbGVtZW50KSB7XHJcbi8vICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoc2V0dGluZ3MuZXJyb3JDbGFzcyk7XHJcbi8vIH1cclxuXHJcbi8vIGZ1bmN0aW9uIHNldEVycm9yRWxlbWVudE1lc3NhZ2UoZXJyb3JFbGVtZW50LCBtZXNzYWdlKSB7XHJcbi8vICAgcmV0dXJuIGVycm9yRWxlbWVudCAmJiBtZXNzYWdlID8gZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gbWVzc2FnZSA6IGZhbHNlO1xyXG4vLyB9XHJcblxyXG4vLyBmdW5jdGlvbiBnZXRWYWxpZGF0aW9uRXJyb3JFbGVtZW50KGlucHV0RmllbGQpIHtcclxuLy8gICByZXR1cm4gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgLiR7aW5wdXRGaWVsZC5pZH0taW5wdXQtZXJyb3JgKTtcclxuLy8gfVxyXG5cclxuLy8gZnVuY3Rpb24gZ2V0VmFsaWRhdGlvbkVycm9yTWVzc2FnZShpbnB1dEZpZWxkKSB7XHJcbi8vICAgLy92YWxpZGF0aW9uRGVidWcoYGdldFZhbGlkYXRpb25FcnJvcjogJHtldmVudC50YXJnZXQudmFsaWRhdGlvbk1lc3NhZ2V9YCwgYXJndW1lbnRzLmNhbGxlZS5uYW1lKTtcclxuLy8gICByZXR1cm4gaW5wdXRGaWVsZC52YWxpZGF0aW9uTWVzc2FnZSA/IGlucHV0RmllbGQudmFsaWRhdGlvbk1lc3NhZ2UgOiBcIlVua25vd24gdmFsaWRhdGlvbiBlcnJvclwiO1xyXG4vLyB9XHJcblxyXG4vLyBmdW5jdGlvbiBzZXRBbGxGaWVsZFZhbGlkYXRpb25MaXN0ZW5lcnMoaW5wdXRGaWVsZHMpIHtcclxuLy8gICBpbnB1dEZpZWxkcy5mb3JFYWNoKGZpZWxkID0+IHNldEZpZWxkVmFsaWRhdGlvbkxpc3RlbmVycyhmaWVsZCkpO1xyXG4vLyB9XHJcblxyXG4vLyBmdW5jdGlvbiBzZXRGaWVsZFZhbGlkYXRpb25MaXN0ZW5lcnMoaW5wdXRGaWVsZCkge1xyXG4vLyAgICAgaW5wdXRGaWVsZC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsb25GaWVsZElucHV0KTtcclxuLy8gICAgIGlucHV0RmllbGQuYWRkRXZlbnRMaXN0ZW5lcigncGFzdGUnLG9uRmllbGRJbnB1dCk7XHJcbi8vIH1cclxuXHJcbi8vIGZ1bmN0aW9uIGdldElucHV0RmllbGRzRnJvbUZvcm1zKGZvcm1zQXJyYXkpIHtcclxuLy8gICBsZXQgaW5wdXRGaWVsZHNBcnJheSA9IFtdO1xyXG4vLyAgIGZvcm1zQXJyYXkuZm9yRWFjaCgoZm9ybSkgPT4gZ2V0Rm9ybUlucHV0RmllbGRzQXJyYXkoZm9ybSlcclxuLy8gICAgIC5mb3JFYWNoKGlucHV0RmllbGQgPT4gaW5wdXRGaWVsZHNBcnJheS5wdXNoKGlucHV0RmllbGQpKSk7XHJcbi8vICAgcmV0dXJuIGlucHV0RmllbGRzQXJyYXk7XHJcbi8vIH1cclxuXHJcbi8vIGZ1bmN0aW9uIGdldEZvcm1JbnB1dEZpZWxkc0FycmF5KGZvcm1FbGVtZW50KSB7XHJcbi8vICAgcmV0dXJuIEFycmF5LmZyb20oZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChzZXR0aW5ncy5pbnB1dFNlbGVjdG9yKSk7XHJcbi8vIH1cclxuXHJcbi8vIGZ1bmN0aW9uIHZhbGlkYXRpb25EZWJ1Zyhsb2dNZXNzYWdlLCBjYWxsZWRGdW5jID0gXCJ1bmxhYmVsZWQgZnVuY3Rpb25cIikge1xyXG4vLyAgIGlmKHNldHRpbmdzLmRlYnVnZ2luZykge1xyXG4vLyAgICAgaWYgKHR5cGVvZiBsb2dNZXNzYWdlID09PSAnb2JqZWN0JyB8fCBBcnJheS5pc0FycmF5KGxvZ01lc3NhZ2UpKSB7XHJcbi8vICAgICAgIGNvbnNvbGUubG9nKGA9PT1kZWJ1ZyBsb2c6ICR7Y2FsbGVkRnVuY309PT1gKTtcclxuLy8gICAgICAgY29uc29sZS5sb2cobG9nTWVzc2FnZSk7XHJcbi8vICAgICB9IGVsc2Uge1xyXG4vLyAgICAgICBjb25zb2xlLmxvZyhgZGVidWcgbG9nOiAke2NhbGxlZEZ1bmN9IDo6ICR7bG9nTWVzc2FnZX1gKTtcclxuLy8gICB9XHJcbi8vIH1cclxuLy8gfVxyXG5cclxuXHJcblxyXG5cclxuLypcclxuaHR0cHM6Ly90cmlwbGV0ZW4uY29tL3RyYWluZXIvd2ViL2xlc3Nvbi83ODc3ZmFlZi1hMDU0LTQ2ZDQtYmNkNS1hNDYwMTM3NjIxZWYvdGFzay9lMTI3ZmM4Yy0zNjk1LTQ5NzUtYWVlNi05NDA1MWQwZmViZTkvXHJcblxyXG5BbmQgYXQgbGFzdCwgd2UgYXJlIHJlYWR5IHRvIGxldCB5b3UgaW4gb24gYSBsaXR0bGUgc2VjcmV0LiBGb3JtIGZpZWxkcyBoYXZlIGFub3RoZXIgdmFsaWRhdGlvbiBhdHRyaWJ1dGUgY2FsbGVkIHBhdHRlcm4uIFRoaXMgYXR0cmlidXRlIGFsbG93cyB5b3UgdG8gcHV0LyBhIHJlZ3VsYXIgZXhwcmVzc2lvbiBkaXJlY3RseSBpbnRvIGEgZm9ybSBmaWVsZC5cclxuPGlucHV0IHR5cGU9XCJ0ZXh0XCIgcGF0dGVybj1cIl5bYS16QS1aXSskXCI+XHJcblxyXG5jb25zdCBzaG93SW5wdXRFcnJvciA9IChmb3JtRWxlbWVudCwgaW5wdXRFbGVtZW50LCBlcnJvck1lc3NhZ2UpID0+IHtcclxuICBjb25zdCBlcnJvckVsZW1lbnQgPSBmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XHJcbiAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJmb3JtX19pbnB1dF90eXBlX2Vycm9yXCIpO1xyXG4gIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGVycm9yTWVzc2FnZTtcclxuICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImZvcm1fX2lucHV0LWVycm9yX2FjdGl2ZVwiKTtcclxufTtcclxuXHJcbmNvbnN0IGhpZGVJbnB1dEVycm9yID0gKGZvcm1FbGVtZW50LCBpbnB1dEVsZW1lbnQpID0+IHtcclxuICBjb25zdCBlcnJvckVsZW1lbnQgPSBmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XHJcbiAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJmb3JtX19pbnB1dF90eXBlX2Vycm9yXCIpO1xyXG4gIGVycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwiZm9ybV9faW5wdXQtZXJyb3JfYWN0aXZlXCIpO1xyXG4gIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IFwiXCI7XHJcbn07XHJcblxyXG5jb25zdCBjaGVja0lucHV0VmFsaWRpdHkgPSAoZm9ybUVsZW1lbnQsIGlucHV0RWxlbWVudCkgPT4ge1xyXG4gIGlmICghaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKSB7XHJcbiAgICBzaG93SW5wdXRFcnJvcihmb3JtRWxlbWVudCwgaW5wdXRFbGVtZW50LCBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2UpO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBoaWRlSW5wdXRFcnJvcihmb3JtRWxlbWVudCwgaW5wdXRFbGVtZW50KTtcclxuICB9XHJcbn07XHJcblxyXG5jb25zdCBoYXNJbnZhbGlkSW5wdXQgPSAoaW5wdXRMaXN0KSA9PiB7XHJcbiAgcmV0dXJuIGlucHV0TGlzdC5zb21lKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgIHJldHVybiAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkO1xyXG4gIH0pO1xyXG59O1xyXG5cclxuY29uc3QgdG9nZ2xlQnV0dG9uU3RhdGUgPSAoaW5wdXRMaXN0LCBidXR0b25FbGVtZW50KSA9PiB7XHJcbiAgY29uc29sZS5sb2coaGFzSW52YWxpZElucHV0KGlucHV0TGlzdCkpO1xyXG4gIGlmIChoYXNJbnZhbGlkSW5wdXQoaW5wdXRMaXN0KSkge1xyXG4gICAgYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiYnV0dG9uX2luYWN0aXZlXCIpO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBidXR0b25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJidXR0b25faW5hY3RpdmVcIik7XHJcbiAgfVxyXG59O1xyXG5cclxuY29uc3Qgc2V0RXZlbnRMaXN0ZW5lcnMgPSAoZm9ybUVsZW1lbnQpID0+IHtcclxuICBjb25zdCBpbnB1dExpc3QgPSBBcnJheS5mcm9tKGZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuZm9ybV9faW5wdXRcIikpO1xyXG4gIGNvbnN0IGJ1dHRvbkVsZW1lbnQgPSBmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1fX3N1Ym1pdFwiKTtcclxuXHJcbiAgdG9nZ2xlQnV0dG9uU3RhdGUoaW5wdXRMaXN0LCBidXR0b25FbGVtZW50KTtcclxuXHJcbiAgaW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgIGNoZWNrSW5wdXRWYWxpZGl0eShmb3JtRWxlbWVudCwgaW5wdXRFbGVtZW50KTtcclxuICAgICAgdG9nZ2xlQnV0dG9uU3RhdGUoaW5wdXRMaXN0LCBidXR0b25FbGVtZW50KTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG59O1xyXG5cclxuY29uc3QgZW5hYmxlVmFsaWRhdGlvbiA9ICgpID0+IHtcclxuICBjb25zdCBmb3JtTGlzdCA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5mb3JtXCIpKTtcclxuICBmb3JtTGlzdC5mb3JFYWNoKChmb3JtRWxlbWVudCkgPT4ge1xyXG4gICAgZm9ybUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCBmdW5jdGlvbiAoZXZ0KSB7XHJcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgY29uc3QgZmllbGRzZXRMaXN0ID0gQXJyYXkuZnJvbShmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmZvcm1fX3NldFwiKSk7XHJcblxyXG4gICAgZmllbGRzZXRMaXN0LmZvckVhY2goKGZpZWxkc2V0KSA9PiB7XHJcbiAgICAgIHNldEV2ZW50TGlzdGVuZXJzKGZpZWxkc2V0KTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG59O1xyXG5cclxuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5cclxuPCFkb2N0eXBlIGh0bWw+XHJcbjxodG1sIGxhbmc9XCJlblwiPlxyXG48aGVhZD5cclxuICA8bWV0YSBjaGFyc2V0PVwiVVRGLThcIj5cclxuICA8bWV0YSBuYW1lPVwidmlld3BvcnRcIlxyXG4gICAgICAgIGNvbnRlbnQ9XCJ3aWR0aD1kZXZpY2Utd2lkdGgsIHVzZXItc2NhbGFibGU9bm8sIGluaXRpYWwtc2NhbGU9MS4wLCBtYXhpbXVtLXNjYWxlPTEuMCwgbWluaW11bS1zY2FsZT0xLjBcIj5cclxuICA8bWV0YSBodHRwLWVxdWl2PVwiWC1VQS1Db21wYXRpYmxlXCIgY29udGVudD1cImllPWVkZ2VcIj5cclxuICA8dGl0bGU+RmVlZGJhY2sgRm9ybTwvdGl0bGU+XHJcbiAgPGxpbmsgcmVsPVwic3R5bGVzaGVldFwiIGhyZWY9XCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3dlYi1jb2RlL21vdmVkX25vcm1hbGl6ZS5jc3NcIj5cclxuICA8bGluayByZWw9XCJzdHlsZXNoZWV0XCIgaHJlZj1cImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vd2ViLWNvZGUvZm9ybS12YWxpZGF0aW9uL2xlc3Nvbi02L21vdmVkX2luZGV4LmNzc1wiPlxyXG48L2hlYWQ+XHJcblxyXG48Ym9keSBjbGFzcz1cInBhZ2VcIj5cclxuPGRpdiBjbGFzcz1cInBhZ2VfX2NvbnRlbnRcIj5cclxuICA8bWFpbiBjbGFzcz1cInBhZ2VfX3NlY3Rpb24gY29udGVudFwiPlxyXG4gICAgPGgxIGNsYXNzPVwiY29udGVudF9fdGl0bGVcIj5cclxuICAgICAgRmVlZGJhY2sgRm9ybVxyXG4gICAgPC9oMT5cclxuICAgIDxwIGNsYXNzPVwiY29udGVudF9fc3VidGl0bGVcIj5cclxuICAgICAgRmlsbCBpbiB0aGUgcmVxdWlyZWQgZmllbGRzXHJcbiAgICA8L3A+XHJcbiAgICA8Zm9ybSBjbGFzcz1cImZvcm1cIiBub3ZhbGlkYXRlPlxyXG4gICAgICA8ZmllbGRzZXQgY2xhc3M9XCJmb3JtX19zZXRcIj5cclxuICAgICAgICA8bGFiZWwgY2xhc3M9XCJmb3JtX19maWVsZFwiPlxyXG4gICAgICAgICAgPGlucHV0IHR5cGU9XCJlbWFpbFwiIGNsYXNzPVwiZm9ybV9faW5wdXRcIiBpZD1cImVtYWlsLWlucHV0XCIgcmVxdWlyZWQgbWlubGVuZ3RoPVwiN1wiPlxyXG4gICAgICAgICAgPHNwYW4gY2xhc3M9XCJmb3JtX19wbGFjZWhvbGRlciBlbWFpbC1pbnB1dC1wbGFjZWhvbGRlclwiPlxyXG4gICAgICAgICAgICBFbWFpbDpcclxuICAgICAgICAgIDwvc3Bhbj5cclxuICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZm9ybV9faW5wdXQtZXJyb3IgZW1haWwtaW5wdXQtZXJyb3JcIj48L3NwYW4+XHJcbiAgICAgICAgPC9sYWJlbD5cclxuICAgICAgICA8bGFiZWwgY2xhc3M9XCJmb3JtX19maWVsZFwiPlxyXG4gICAgICAgICAgPGlucHV0IHR5cGU9XCJwYXNzd29yZFwiIGNsYXNzPVwiZm9ybV9faW5wdXRcIiBpZD1cInBhc3N3b3JkLWlucHV0XCIgcmVxdWlyZWQgbWlubGVuZ3RoPVwiN1wiPlxyXG4gICAgICAgICAgPHNwYW4gY2xhc3M9XCJmb3JtX19wbGFjZWhvbGRlciBwYXNzd29yZC1pbnB1dC1wbGFjZWhvbGRlclwiPlxyXG4gICAgICAgICAgICBQYXNzd29yZDpcclxuICAgICAgICAgIDwvc3Bhbj5cclxuICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZm9ybV9faW5wdXQtZXJyb3IgcGFzc3dvcmQtaW5wdXQtZXJyb3JcIj48L3NwYW4+XHJcbiAgICAgICAgPC9sYWJlbD5cclxuICAgICAgICA8bGFiZWwgY2xhc3M9XCJmb3JtX19maWVsZCBmb3JtX19maWVsZF90eXBlX3Jvd1wiPlxyXG4gICAgICAgICAgPGlucHV0IGNsYXNzPVwiZm9ybV9fY2hlY2tib3ggZm9ybV9faW5wdXRcIiBpZD1cImNoZWNrYm94LWlucHV0XCIgdHlwZT1cImNoZWNrYm94XCIgY2hlY2tlZCByZXF1aXJlZD5cclxuICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZm9ybV9fY2hlY2tib3gtaXRlbVwiPjwvc3Bhbj5cclxuICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZm9ybV9fdGV4dFwiPkNvbnNlbnQgdG8gdGhlIHByb2Nlc3Npbmcgb2YgcGVyc29uYWwgZGF0YTwvc3Bhbj5cclxuICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZm9ybV9faW5wdXQtZXJyb3IgY2hlY2tib3gtaW5wdXQtZXJyb3JcIj48L3NwYW4+XHJcbiAgICAgICAgICA8c3BhbiBjbGFzcz1cImZvcm1fX3BsYWNlaG9sZGVyIGNoZWNrYm94LWlucHV0LXBsYWNlaG9sZGVyXCI+PC9zcGFuPlxyXG4gICAgICAgIDwvbGFiZWw+XHJcbiAgICAgICAgPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJmb3JtX19zdWJtaXQgZm9ybV9fYnV0dG9uIGJ1dHRvblwiPlxyXG4gICAgICAgICAgTmV4dFxyXG4gICAgICAgIDwvYnV0dG9uPlxyXG4gICAgICA8L2ZpZWxkc2V0PlxyXG4gICAgICA8ZmllbGRzZXQgY2xhc3M9XCJmb3JtX19zZXRcIj5cclxuICAgICAgICA8YnV0dG9uIGNsYXNzPVwidGV4dC1idXR0b24gZm9ybV9fcHJldmlvdXNcIj4mbGFycjsgQmFjazwvYnV0dG9uPlxyXG4gICAgICAgIDxsYWJlbCBjbGFzcz1cImZvcm1fX2ZpZWxkXCI+XHJcbiAgICAgICAgICA8aW5wdXQgdHlwZT1cInRleHRcIiBjbGFzcz1cImZvcm1fX2lucHV0XCIgaWQ9XCJuYW1lLWlucHV0XCIgcmVxdWlyZWQgbWlubGVuZ3RoPVwiMlwiPlxyXG4gICAgICAgICAgPHNwYW4gY2xhc3M9XCJmb3JtX19wbGFjZWhvbGRlciBuYW1lLWlucHV0LXBsYWNlaG9sZGVyXCI+XHJcbiAgICAgICAgICAgIFdoYXQgaXMgeW91ciBuYW1lPz9cclxuICAgICAgICAgIDwvc3Bhbj5cclxuICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZm9ybV9faW5wdXQtZXJyb3IgbmFtZS1pbnB1dC1lcnJvclwiPjwvc3Bhbj5cclxuICAgICAgICA8L2xhYmVsPlxyXG4gICAgICAgIDxsYWJlbCBjbGFzcz1cImZvcm1fX2ZpZWxkXCI+XHJcbiAgICAgICAgICA8aW5wdXQgdHlwZT1cInRleHRcIiBjbGFzcz1cImZvcm1fX2lucHV0XCIgaWQ9XCJoYXBwaW5lc3MtaW5wdXRcIiByZXF1aXJlZCBtaW5sZW5ndGg9XCI0XCI+XHJcbiAgICAgICAgICA8c3BhbiBjbGFzcz1cImZvcm1fX3BsYWNlaG9sZGVyIGhhcHBpbmVzcy1pbnB1dC1wbGFjZWhvbGRlclwiPlxyXG4gICAgICAgICAgICBIb3cgYXJlIHlvdSBmZWVsaW5nPz9cclxuICAgICAgICAgIDwvc3Bhbj5cclxuICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZm9ybV9faW5wdXQtZXJyb3IgaGFwcGluZXNzLWlucHV0LWVycm9yXCI+PC9zcGFuPlxyXG4gICAgICAgIDwvbGFiZWw+XHJcbiAgICAgICAgPGxhYmVsIGNsYXNzPVwiZm9ybV9fZmllbGRcIj5cclxuICAgICAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIGNsYXNzPVwiZm9ybV9faW5wdXRcIiBpZD1cImphdmFzY3JpcHQtcmF0aW5nLWlucHV0XCIgcmVxdWlyZWQgbWlubGVuZ3RoPVwiNVwiPlxyXG4gICAgICAgICAgPHNwYW4gY2xhc3M9XCJmb3JtX19wbGFjZWhvbGRlciBqYXZhc2NyaXB0LXJhdGluZy1pbnB1dC1wbGFjZWhvbGRlclwiPlxyXG4gICAgICAgICAgICBJcyBKYXZhU2NyaXB0IHRoYXQgaGFyZD8/XHJcbiAgICAgICAgICA8L3NwYW4+XHJcbiAgICAgICAgICA8c3BhbiBjbGFzcz1cImZvcm1fX2lucHV0LWVycm9yIGphdmFzY3JpcHQtcmF0aW5nLWlucHV0LWVycm9yXCI+PC9zcGFuPlxyXG4gICAgICAgIDwvbGFiZWw+XHJcbiAgICAgICAgPGxhYmVsIGNsYXNzPVwiZm9ybV9fZmllbGRcIj5cclxuICAgICAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIGNsYXNzPVwiZm9ybV9faW5wdXRcIiBpZD1cInN1Z2dlc3Rpb24taW5wdXRcIiByZXF1aXJlZCBtaW5sZW5ndGg9XCI1XCI+XHJcbiAgICAgICAgICA8c3BhbiBjbGFzcz1cImZvcm1fX3BsYWNlaG9sZGVyIHN1Z2dlc3Rpb24taW5wdXQtcGxhY2Vob2xkZXJcIj5cclxuICAgICAgICAgICAgSG93IG1hbnkgaW50ZXJlc3RpbmcgcXVlc3Rpb25zIGNhbiBvbmUgbWFrZSB1cD8/XHJcbiAgICAgICAgICA8L3NwYW4+XHJcbiAgICAgICAgICA8c3BhbiBjbGFzcz1cImZvcm1fX2lucHV0LWVycm9yIHN1Z2dlc3Rpb24taW5wdXQtZXJyb3JcIj48L3NwYW4+XHJcbiAgICAgICAgPC9sYWJlbD5cclxuICAgICAgICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImZvcm1fX3N1Ym1pdCBmb3JtX19idXR0b24gYnV0dG9uXCI+XHJcbiAgICAgICAgICBOZXh0XHJcbiAgICAgICAgPC9idXR0b24+XHJcbiAgICAgIDwvZmllbGRzZXQ+XHJcbiAgICAgIDxmaWVsZHNldCBjbGFzcz1cImZvcm1fX3NldFwiPlxyXG4gICAgICAgIDxidXR0b24gY2xhc3M9XCJ0ZXh0LWJ1dHRvbiBmb3JtX19wcmV2aW91c1wiPiZsYXJyOyBCYWNrPC9idXR0b24+XHJcbiAgICAgICAgPHAgY2xhc3M9XCJmb3JtX19wYXJhZ3JhcGhcIj5cclxuICAgICAgICAgIFN1Y2Nlc3NmdWxseSBzdWJtaXR0ZWQhXHJcbiAgICAgICAgPC9wPlxyXG4gICAgICAgIDxidXR0b24gdHlwZT1cInN1Ym1pdFwiIGNsYXNzPVwiZm9ybV9fc3VibWl0IGJ1dHRvblwiPlxyXG4gICAgICAgICAgVGhhdCdzIGFsbCwgZm9sa3MhXHJcbiAgICAgICAgPC9idXR0b24+XHJcbiAgICAgIDwvZmllbGRzZXQ+XHJcbiAgICA8L2Zvcm0+XHJcbiAgPC9tYWluPlxyXG48L2Rpdj5cclxuPHNjcmlwdCBzcmM9XCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3dlYi1jb2RlL2Zvcm0tdmFsaWRhdGlvbi9sZXNzb24tNi9tb3ZlZF9pbmRleC5qc1wiPjwvc2NyaXB0PlxyXG48c2NyaXB0IHNyYz1cInNjcmlwdC5qc1wiPjwvc2NyaXB0PlxyXG48L2JvZHk+XHJcbjwvaHRtbD5cclxuXHJcblxyXG4qLyIsImltcG9ydCB7IHZhbGlkYXRpb25TZXR0aW5ncywgbW9kYWxTZWxlY3RvcnMsIG5ld1Bvc3RNb2RhbFBsYWNlaG9sZGVycywgcm91dGVEYXRhIH0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xyXG5pbXBvcnQgQ2FyZEVsZW1lbnQgZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FyZEVsZW1lbnQuanNcIjtcclxuaW1wb3J0IFwiLi9pbmRleC5jc3NcIjtcclxuaW1wb3J0IE1vZGFsV2l0aEZvcm0gZnJvbSBcIi4uL2NvbXBvbmVudHMvTW9kYWxXaXRoRm9ybS5qc1wiO1xyXG5pbXBvcnQgTW9kYWxQcmV2aWV3SW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvTW9kYWxQcmV2aWV3SW1hZ2UuanNcIjtcclxuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvU2VjdGlvbi5qc1wiO1xyXG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vc2NyaXB0cy92YWxpZGF0aW9uLmpzXCI7XHJcbmltcG9ydCBBcGkgZnJvbSBcIi4uL2NvbXBvbmVudHMvQXBpLmpzXCI7XHJcbmltcG9ydCBVc2VyUHJvZmlsZSBmcm9tIFwiLi4vY29tcG9uZW50cy9Vc2VyUHJvZmlsZS5qc1wiO1xyXG5pbXBvcnQgTW9kYWxDb25maXJtIGZyb20gXCIuLi9jb21wb25lbnRzL01vZGFsQ29uZmlybS5qc1wiXHJcblxyXG5jb25zdCBkYkFwaSA9IG5ldyBBcGkoe1xyXG4gICAgYmFzZVVybDogXCJodHRwczovL2Fyb3VuZC1hcGkuZW4udHJpcGxldGVuLXNlcnZpY2VzLmNvbS92MVwiLFxyXG4gICAgaGVhZGVyczoge1xyXG4gICAgICBhdXRob3JpemF0aW9uOiBcIjBiYTM0ODZjLWIxMTctNDE5Ni1iNzQxLWJlOGVkYTNlMTk3ZFwiLFxyXG4gICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIlxyXG4gICAgfVxyXG4gIH0pO1xyXG5cclxuY29uc3QgY2FyZFNlY3Rpb24gPSBuZXcgU2VjdGlvbih7IFxyXG4gICAgY29udGFpbmVyU2VsZWN0b3I6ICcuY2FyZHNfX2xpc3QnLFxyXG4gICAgcmVuZGVyZXI6IChjYXJkKSA9PiB7XHJcbiAgICAgIGNvbnN0IG5ld0NhcmQgPSBtYWtlTmV3Q2FyZChjYXJkKTtcclxuICAgICAgY2FyZFNlY3Rpb24uYWRkSXRlbShuZXdDYXJkKTsgXHJcbiAgICB9LCBcclxuICAgIGluaXRpYWxpemU6IChyb3V0ZSkgPT4ge1xyXG4gICAgICAgIGRiQXBpLmdldEJhdGNoRGF0YShyb3V0ZSlcclxuICAgICAgICAudGhlbigoZGF0YSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY2FyZFNlY3Rpb24uc2V0SXRlbXMoZGF0YSk7XHJcbiAgICAgICAgICAgICAgICBjYXJkU2VjdGlvbi5yZW5kZXJJdGVtcygpO1xyXG4gICAgICAgICAgICAgfSk7XHJcbiAgICB9XHJcbn0pO1xyXG5cclxuY2FyZFNlY3Rpb24uaW5pdGlhbGl6ZShyb3V0ZURhdGEuZ2V0Q2FyZHMpO1xyXG4gIFxyXG5cclxuY29uc3QgdXNlclByb2ZpbGUgPSBuZXcgVXNlclByb2ZpbGUoe2luaXRpYWxpemU6ICgpID0+IHtcclxuICAgIGRiQXBpLnJlcXVlc3Qocm91dGVEYXRhLmdldFVzZXJJbmZvKVxyXG4gICAgLnRoZW4oKGRhdGEpID0+IHtcclxuICAgICAgICAgICAgdXNlclByb2ZpbGUuc2V0UHJvZmlsZURhdGEoe3VzZXJOYW1lOiBkYXRhLm5hbWUsIHByb2ZpbGVEZXNjcmlwdGlvbjogZGF0YS5hYm91dCwgaW1hZ2VVcmw6IGRhdGEuYXZhdGFyfSk7XHJcbiAgICAgICAgICAgIGVkaXRQcm9maWxlRm9ybS5zZXREZWZhdWx0SW5wdXRzKHVzZXJQcm9maWxlLmdldFVzZXJQcm9maWxlKCkpO1xyXG4gICAgICAgIH0pXHJcbiAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoYEZhaWxlZCB0byBnZXQgdXNlciBkYXRhOiAke2Vycn1gKTtcclxuICAgIH0pO1xyXG4gICAgfVxyXG59KTtcclxuXHJcbnVzZXJQcm9maWxlLmluaXRpYWxpemUoKTtcclxuXHJcbmNvbnN0IGVkaXRBdmF0YXJGb3JtID0gbmV3IE1vZGFsV2l0aEZvcm0oe21vZGFsU2VsZWN0b3I6IG1vZGFsU2VsZWN0b3JzLmVkaXRBdmF0YXJTZWxlY3RvcixcclxuICAgIG9uU3VibWl0Q2FsbGJhY2s6IChpbnB1dFZhbHVlcykgPT4ge1xyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PnsgXHJcbiAgICAgICAgICAgIGRiQXBpLnJlcXVlc3Qocm91dGVEYXRhLnVwZGF0ZVVzZXJBdmF0YXIsIHsgYXZhdGFyOiBpbnB1dFZhbHVlc1snYXZhdGFyLWxpbmsnXSB9KVxyXG4gICAgICAgICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB1c2VyUHJvZmlsZS5zZXRVc2VySW1hZ2UoaW5wdXRWYWx1ZXNbJ2F2YXRhci1saW5rJ10pO1xyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuY2F0Y2goKCkgPT4gcmVqZWN0KCkpO1xyXG4gICAgICAgIH0pIFxyXG4gICAgfVxyXG59KVxyXG5cclxuY29uc3QgZWRpdEF2YXRhckZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcih2YWxpZGF0aW9uU2V0dGluZ3MsIGVkaXRBdmF0YXJGb3JtLmdldEZvcm1FbGVtZW50KCkpO1xyXG5lZGl0QXZhdGFyRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcbiBcclxuY29uc3QgZWRpdFByb2ZpbGVGb3JtID0gbmV3IE1vZGFsV2l0aEZvcm0oeyBtb2RhbFNlbGVjdG9yOiBtb2RhbFNlbGVjdG9ycy5lZGl0UHJvZmlsZU1vZGFsLFxyXG4gICAgb25TdWJtaXRDYWxsYmFjazogKGlucHV0VmFsdWVzKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICAgICAgZGJBcGkucmVxdWVzdChyb3V0ZURhdGEudXBkYXRlVXNlclByb2ZpbGUsIHsgbmFtZTogaW5wdXRWYWx1ZXNbJ3Byb2ZpbGUtbmFtZSddLCBhYm91dDogaW5wdXRWYWx1ZXNbJ3Byb2ZpbGUtZGVzY3JpcHRpb24nXX0pXHJcbiAgICAgICAgICAgICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJQcm9maWxlLnNldFVzZXJOYW1lKGlucHV0VmFsdWVzWydwcm9maWxlLW5hbWUnXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJQcm9maWxlLnNldFVzZXJEZXNjcmlwdGlvbihpbnB1dFZhbHVlc1sncHJvZmlsZS1kZXNjcmlwdGlvbiddKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWRpdFByb2ZpbGVGb3JtLnNldERlZmF1bHRJbnB1dHModXNlclByb2ZpbGUuZ2V0VXNlclByb2ZpbGUoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYEZhaWxlZCB0byBlZGl0IHByb2ZpbGU6ICR7ZXJyfWApO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlamVjdCgpO1xyXG4gICAgICAgICAgICAgICAgfSk7ICAgIFxyXG4gICAgICAgICAgICB9KTsgIFxyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuY29uc3QgZWRpdFByb2ZpbGVGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IodmFsaWRhdGlvblNldHRpbmdzLCBlZGl0UHJvZmlsZUZvcm0uZ2V0Rm9ybUVsZW1lbnQoKSk7XHJcbmVkaXRQcm9maWxlRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcblxyXG5jb25zdCBuZXdQb3N0Rm9ybSA9IG5ldyBNb2RhbFdpdGhGb3JtKHsgbW9kYWxTZWxlY3RvcjogJyNwb3N0LW1vZGFsJywgXHJcbiAgICBvblN1Ym1pdENhbGxiYWNrOiAoaW5wdXRWYWx1ZXMpID0+IHtcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBuZXdQb3N0VGl0bGUgPSBpbnB1dFZhbHVlc1sncG9zdC1jYXB0aW9uJ107XHJcbiAgICAgICAgICAgIGNvbnN0IG5ld1Bvc3RJbWFnZUxpbmsgPSBpbnB1dFZhbHVlc1sncG9zdC1pbWFnZS1saW5rJ107XHJcbiAgICAgICAgICAgIGRiQXBpLnJlcXVlc3Qocm91dGVEYXRhLmNyZWF0ZUNhcmQsIHsgbmFtZTogbmV3UG9zdFRpdGxlLCBsaW5rOiBuZXdQb3N0SW1hZ2VMaW5rIH0pXHJcbiAgICAgICAgICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3Q2FyZCA9IG1ha2VOZXdDYXJkKHtuYW1lOiBuZXdQb3N0VGl0bGUsIGltYWdlTGluazogbmV3UG9zdEltYWdlTGluayB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXJkU2VjdGlvbi5hZGRJdGVtKG5ld0NhcmQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCk7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgRmFpbGVkIHRvIGNyZWF0ZSBuZXcgcG9zdDogJHtlcnJ9YCk7XHJcbiAgICAgICAgICAgICAgICByZWplY3QoKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn0pO1xyXG5cclxubmV3UG9zdEZvcm0uc2V0UGxhY2Vob2xkZXJJbnB1dHMobmV3UG9zdE1vZGFsUGxhY2Vob2xkZXJzKTtcclxuXHJcbmNvbnN0IG5ld1Bvc3RGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IodmFsaWRhdGlvblNldHRpbmdzLCBuZXdQb3N0Rm9ybS5nZXRGb3JtRWxlbWVudCgpKTtcclxubmV3UG9zdEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5cclxuY29uc3QgcHJldmlld0ltYWdlTW9kYWwgPSBuZXcgTW9kYWxQcmV2aWV3SW1hZ2Uoe21vZGFsU2VsZWN0b3I6ICcjcHJldmlldy1tb2RhbCd9KTtcclxuXHJcbnNldFBhZ2VMaXN0ZW5lcnMoKTtcclxuXHJcbmZ1bmN0aW9uIHNldFBhZ2VMaXN0ZW5lcnMoKSB7XHJcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fZWRpdC1idXR0b24nKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsb25FZGl0UHJvZmlsZUNsaWNrKTtcclxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19hZGQtYnV0dG9uJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLG9uTmV3UG9zdENsaWNrKTtcclxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19lZGl0LWF2YXRhci1idXR0b24nKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsb25FZGl0QXZhdGFyQ2xpY2spO1xyXG59XHJcblxyXG5mdW5jdGlvbiBvbkVkaXRBdmF0YXJDbGljaygpIHtcclxuICAgIGNvbnNvbGUubG9nKFwiZWRpdCBhdmF0YXIgY2xpY2tlZFwiKTtcclxuICAgIGVkaXRBdmF0YXJGb3JtLm9wZW4oKTtcclxufVxyXG5cclxuZnVuY3Rpb24gb25FZGl0UHJvZmlsZUNsaWNrKCkge1xyXG4gICAgZWRpdFByb2ZpbGVGb3JtLm9wZW4oKTtcclxufVxyXG5cclxuZnVuY3Rpb24gb25OZXdQb3N0Q2xpY2soKSB7IFxyXG4gICAgbmV3UG9zdEZvcm0ub3BlbigpO1xyXG59XHJcbmNvbnN0IHVzZXJDb25maXJtRGVsZXRlTW9kYWwgPSBuZXcgTW9kYWxDb25maXJtKHtcclxuICAgIG1vZGFsU2VsZWN0b3I6IG1vZGFsU2VsZWN0b3JzLmNvbmZpcm1Nb2RhbFNlbGVjdG9yLCBcclxuICAgIGNvbmZpcm1UZXh0OiBcIkRlbGV0ZVwiLCBcclxuICAgIGF3YWl0aW5nQ29uZmlybVRleHQ6IFwiRGVsZXRpbmcuLi5cIixcclxufSk7XHJcblxyXG5mdW5jdGlvbiBtYWtlTmV3Q2FyZCh7IG5hbWUsIGxpbmssIGlzTGlrZWQsIF9pZCB9KSB7XHJcbiAgICBsZXQgbmV3Q2FyZDtcclxuICAgIFxyXG4gICAgY29uc3QgaW1hZ2VDbGlja01hbmFnZXIgPSAoKSA9PiB7XHJcbiAgICAgICAgcHJldmlld0ltYWdlTW9kYWwucG9wdWxhdGVQcmV2aWV3KHsgaW1hZ2VVcmw6IG5ld0NhcmQuaW1hZ2VMaW5rLCBpbWFnZUFsdDogbmV3Q2FyZC5pbWFnZUFsdFRleHQsIHRpdGxlVGV4dDogbmV3Q2FyZC50aXRsZVRleHQgfSk7XHJcbiAgICAgICAgcHJldmlld0ltYWdlTW9kYWwub3BlbigpO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IG9uRGVsZXRlQVBJTWFuYWdlciA9IChkZWxldGVDb25maXJtYXRpb25NYW5hZ2VyLCBpZCkgPT4ge1xyXG4gICAgICAgIC8vbXkgZ29hbCB3aXRoIHRoZXNlIHdhcyB0byBkZWNvdXBsZSB0aGUgYXBpIGxvZ2ljIGZyb20gdGhlIGxvZ2ljIHRoYXQgZWRpdHMgdGhlIGNhcmRzLlxyXG4gICAgICAgIC8vdGhlc2UgdGhlb3JldGljYWxseSByZXR1cm4gdHJ1ZSBvbmx5IGlmIHRoZSBhcGkgY2FsbCBpcyBzdWNjZXNzZnVsXHJcbiAgICAgICAgLy9vbmNlIHN1Y2Nlc3NmdWwsIHRoZSBjbGFzcyB0YWtlcyBjYXJlIG9mIHRoZSByZXN0XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+e1xyXG4gICAgICAgICAgICBkZWxldGVDb25maXJtYXRpb25NYW5hZ2VyLmF3YWl0VXNlckNob2ljZSgpXHJcbiAgICAgICAgICAgIC50aGVuKGNob2ljZSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoY2hvaWNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGJBcGkucmVxdWVzdERlbGV0ZShpZClcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlQ29uZmlybWF0aW9uTWFuYWdlci5zZXRUb0NvbmZpcm0oKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZUNvbmZpcm1hdGlvbk1hbmFnZXIuY2xvc2UoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUodHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGVDb25maXJtYXRpb25NYW5hZ2VyLnNldFRvQ29uZmlybSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgQ2FyZCBkZWxldGUgcmVxdWVzdCBmYWlsZWQgJHtlcnJ9YCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWplY3QoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgfSBcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBvbkxpa2VBUElNYW5hZ2VyID0gKGlkLCBib29sKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICAgICAgICAgIGRiQXBpLnJlcXVlc3RMaWtlVXBkYXRlKGlkLCBib29sKVxyXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSh0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYENhcmQgbGlrZSByZXF1ZXN0IGZhaWxlZCAke2Vycn1gKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiBcclxuICAgIFxyXG4gICAgbmV3Q2FyZCA9IG5ldyBDYXJkRWxlbWVudCh7bmFtZTogbmFtZSwgbGluazogbGluaywgaXNMaWtlZDogaXNMaWtlZCwgaWQ6IF9pZCwgZGVsZXRlQ29uZmlybWF0aW9uTWFuYWdlcjogdXNlckNvbmZpcm1EZWxldGVNb2RhbCxcclxuICAgICAgICBpbWFnZUNsaWNrTWFuYWdlcjogaW1hZ2VDbGlja01hbmFnZXIsXHJcbiAgICAgICAgb25EZWxldGVBUElNYW5hZ2VyOiBvbkRlbGV0ZUFQSU1hbmFnZXIsXHJcbiAgICAgICAgb25MaWtlQVBJTWFuYWdlcjogb25MaWtlQVBJTWFuYWdlcixcclxuICAgIH0pO1xyXG5cclxuICAgIHJldHVybiBuZXdDYXJkLmdldFZpZXcoKTtcclxufSIsImltcG9ydCB7IHJvdXRlRGF0YSBhcyByb3V0ZXMgfSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzXCI7XHJcbmNvbnN0IGRlYnVnID0gZmFsc2U7XHJcbi8vIGlmKGRlYnVnKSBjb25zb2xlLmxvZyhgYCk7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBBcGkge1xyXG4gICAgY29uc3RydWN0b3IoeyBiYXNlVXJsLCBoZWFkZXJzIH0pIHtcclxuICAgICAgICB0aGlzLl9iYXNlVXJsID0gYmFzZVVybDtcclxuICAgICAgICB0aGlzLl9hdXRob3JpemF0aW9uID0gaGVhZGVycy5hdXRob3JpemF0aW9uO1xyXG4gICAgICAgIHRoaXMuX2NvbnRlbnRUeXBlID0gaGVhZGVyc1tcIkNvbnRlbnQtVHlwZVwiXTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgX2J1aWxkUmVxdWVzdChyb3V0ZURhdGEsIGJvZHkgPSB1bmRlZmluZWQpIHtcclxuICAgICAgICBjb25zdCB1cmwgPSB0aGlzLl9iYXNlVXJsICsgcm91dGVEYXRhLnJvdXRlO1xyXG4gICAgICAgIGNvbnN0IGluZm8gPSB7XHJcbiAgICAgICAgICAgIG1ldGhvZDogcm91dGVEYXRhLm1ldGhvZCxcclxuICAgICAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgICAgICAgYXV0aG9yaXphdGlvbjogdGhpcy5fYXV0aG9yaXphdGlvbixcclxuICAgICAgICAgICAgICAgIFwiQ29udGVudC1UeXBlXCI6IHRoaXMuX2NvbnRlbnRUeXBlLFxyXG4gICAgICAgICAgICB9LCBcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmKGJvZHkpIGluZm8uYm9keSA9IEpTT04uc3RyaW5naWZ5KGJvZHkpO1xyXG4gICAgICAgIGlmKGRlYnVnKSBjb25zb2xlLmxvZyhgY2FsbCBpbmZvOmApO1xyXG4gICAgICAgIGlmKGRlYnVnKSBjb25zb2xlLmxvZyhpbmZvKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHt1cmw6IHVybCwgaW5mbzogaW5mb307XHJcbiAgICB9XHJcblxyXG4gICAgcmVxdWVzdChyb3V0ZURhdGEsIGJvZHkpIHtcclxuICAgICAgICBjb25zdCByZXF1ZXN0SW5mbyA9IHRoaXMuX2J1aWxkUmVxdWVzdChyb3V0ZURhdGEsIGJvZHkpO1xyXG4gICAgICAgIHJldHVybiBmZXRjaChyZXF1ZXN0SW5mby51cmwsIHJlcXVlc3RJbmZvLmluZm8pXHJcbiAgICAgICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICAgICAgICBpZiAocmVzLm9rKSB7XHJcbiAgICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xyXG4gICAgICAgIH0gXHJcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBBUEkgcmVxdWVzdCBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTsgLy8gbG9nIHRoZSBlcnJvciB0byB0aGUgY29uc29sZVxyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgcmVxdWVzdERlbGV0ZShjYXJkSWQpIHtcclxuICAgICAgICByZXR1cm4gZmV0Y2godGhpcy5fYmFzZVVybCArIHJvdXRlcy5kZWxldGVDYXJkQnlJZC5yb3V0ZSArIGNhcmRJZCwge1xyXG4gICAgICAgICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXHJcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICAgICAgIGF1dGhvcml6YXRpb246IFwiMGJhMzQ4NmMtYjExNy00MTk2LWI3NDEtYmU4ZWRhM2UxOTdkXCIsXHJcbiAgICAgICAgICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIlxyXG4gICAgICAgICAgICB9fVxyXG4gICAgICAgICkudGhlbigocmVzKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChyZXMub2spIHtcclxuICAgICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XHJcbiAgICAgICAgfSBcclxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnIpOyAvLyBsb2cgdGhlIGVycm9yIHRvIHRoZSBjb25zb2xlXHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICByZXF1ZXN0TGlrZVVwZGF0ZSggY2FyZElkLCBsaWtlU3RhdHVzICkge1xyXG4gICAgICAgIFxyXG4gICAgICAgIGxldCB1cmwgPSBcIlwiO1xyXG4gICAgICAgIGxldCBtZXRob2QgPSBcIlwiO1xyXG4gICAgICAgIGlmIChsaWtlU3RhdHVzKSB7XHJcbiAgICAgICAgICAgIHVybCA9IHRoaXMuX2Jhc2VVcmwgKyByb3V0ZXMubGlrZUNhcmRVcGRhdGVSb3V0ZS5yb3V0ZTtcclxuICAgICAgICAgICAgbWV0aG9kID0gcm91dGVzLmxpa2VDYXJkVXBkYXRlUm91dGUubWV0aG9kOyAgICBcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB1cmwgPSB0aGlzLl9iYXNlVXJsICsgcm91dGVzLmRpc2xpa2VDYXJkVXBkYXRlUm91dGUucm91dGU7XHJcbiAgICAgICAgICAgIG1ldGhvZCA9IHJvdXRlcy5kaXNsaWtlQ2FyZFVwZGF0ZVJvdXRlLm1ldGhvZDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHVybCA9IHVybC5yZXBsYWNlKHJvdXRlcy5saWtlQ2FyZFJlcGxhY2VLZXksIGNhcmRJZCk7XHJcbiAgICAgICAgcmV0dXJuIGZldGNoKHVybCwge1xyXG4gICAgICAgICAgICBtZXRob2Q6IG1ldGhvZCxcclxuICAgICAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgICAgICAgYXV0aG9yaXphdGlvbjogXCIwYmEzNDg2Yy1iMTE3LTQxOTYtYjc0MS1iZThlZGEzZTE5N2RcIixcclxuICAgICAgICAgICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiXHJcbiAgICAgICAgICAgIH19XHJcbiAgICAgICAgKS50aGVuKChyZXMpID0+IHtcclxuICAgICAgICAgICAgaWYgKHJlcy5vaykge1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcclxuICAgICAgICB9IFxyXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycik7IC8vIGxvZyB0aGUgZXJyb3IgdG8gdGhlIGNvbnNvbGVcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIGdldEJhdGNoRGF0YShyb3V0ZSkge1xyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnJlcXVlc3Qocm91dGUpXHJcbiAgICAgICAgICAgIC50aGVuKChkYXRhKSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXNvbHZlKFByb21pc2UuYWxsKGRhdGEpKVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgZ2V0SW5pdGlhbFVzZXJEYXRhKCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnJlcXVlc3Qocm91dGVzLmdldFVzZXJJbmZvKVxyXG4gICAgICAgICAgICAudGhlbigoZGF0YSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZShQcm9taXNlLmFsbChkYXRhKSlcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG59XHJcbiAgICAvLyBwYXJzZUNhcmRzKGRhdGEpIHtcclxuICAgIC8vICAgICByZXR1cm4gUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAvLyAgICAgICAgIGRhdGEuZm9yRWFjaCgpXHJcbiAgICAvLyAgICAgfSk7XHJcbiAgICAvLyB9XHJcbiAgICAvLyBDYXJkcyBzaG91bGQgYmUgcmVuZGVyZWQgYWZ0ZXIgdGhlIHVzZXIgaW5mb3JtYXRpb24gaXMgcmVjZWl2ZWQgZnJvbSB0aGUgc2VydmVyLiBcclxuICAgIC8vINChcmVhdGUgYSBmdW5jdGlvbiBpbiBBcGkuanMgYW5kIHJldHVybiB0aGUgUHJvbWlzZS5hbGwoKSBtZXRob2QuIFxyXG4gICAgLy8gUGFzcyB0aGUgYXJyYXkgb2YgZnVuY3Rpb24gY2FsbHMgZm9yIGdldHRpbmcgdXNlciBpbmZvcm1hdGlvbiBhbmQgdGhlIGxpc3Qgb2YgY2FyZHMgdG8gUHJvbWlzZS5hbGwoKSBhcyBhIHBhcmFtZXRlci4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcclxuICAgIGNvbnN0cnVjdG9yKHsgcmVuZGVyZXIsIGNvbnRhaW5lclNlbGVjdG9yLCBpbml0aWFsaXplIH0pIHtcclxuICAgICAgICB0aGlzLl9pdGVtcyA9IFwiXCI7XHJcbiAgICAgICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcclxuICAgICAgICB0aGlzLl9jb250YWluZXJTZWxlY3RvciA9IGNvbnRhaW5lclNlbGVjdG9yO1xyXG4gICAgICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fY29udGFpbmVyU2VsZWN0b3IpO1xyXG4gICAgICAgIHRoaXMuaW5pdGlhbGl6ZSA9IGluaXRpYWxpemU7XHJcbiAgICB9XHJcblxyXG4gICAgcmVuZGVySXRlbXMoKSB7XHJcbiAgICAgICAgaWYodGhpcy5faXRlbXMpIHtcclxuICAgICAgICB0aGlzLl9pdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuX3JlbmRlcmVyKGl0ZW0pO1xyXG4gICAgICAgIH0pOyBcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGBObyBpdGVtcyB0byByZW5kZXIgaW4gU2VjdGlvbi5gKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc2V0SXRlbXMoaXRlbXMpIHtcclxuICAgICAgICB0aGlzLl9pdGVtcyA9IGl0ZW1zO1xyXG4gICAgICAgIHJldHVybiAodGhpcy5faXRlbXMpO1xyXG4gICAgfVxyXG5cclxuICAgICBhZGRJdGVtKGVsZW1lbnQpIHtcclxuICAgICAgICB0aGlzLl9pdGVtcy5wdXNoKGVsZW1lbnQpO1xyXG4gICAgICAgIHRoaXMuX2NvbnRhaW5lci5hcHBlbmQoZWxlbWVudCk7XHJcbiAgICB9XHJcblxyXG4gICAgX2NsZWFyKCkge1xyXG4gICAgICAgIHRoaXMuX2l0ZW1zLmludGVybmFsSFRNTCA9IFwiXCJcclxuICAgIH1cclxuXHJcbn0iLCJpbXBvcnQgeyB1c2VyUHJvZmlsZVNldHRpbmdzIH0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiOyBcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJQcm9maWxlIHtcclxuICAgIGNvbnN0cnVjdG9yKHsgdXNlck5hbWUgPSB1c2VyUHJvZmlsZVNldHRpbmdzLmRlZmF1bHRVc2VybmFtZSwgcHJvZmlsZURlc2NyaXB0aW9uID0gdXNlclByb2ZpbGVTZXR0aW5ncy5kZWZhdWx0RGVzY3JpcHRpb24sIGltYWdlVXJsID0gdXNlclByb2ZpbGVTZXR0aW5ncy5kZWZhdWx0UHJvZmlsZUltYWdlLCBpbml0aWFsaXplIH0gPSB7fSkge1xyXG4gICAgICAgIHRoaXMuX3VzZXJOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih1c2VyUHJvZmlsZVNldHRpbmdzLnByb2ZpbGVOYW1lU2VsZWN0b3IpO1xyXG4gICAgICAgIHRoaXMuX3VzZXJQcm9maWxlRGVzY3JpcHRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHVzZXJQcm9maWxlU2V0dGluZ3MucHJvZmlsZURlc2NyaXB0aW9uU2VsZWN0b3IpO1xyXG4gICAgICAgIHRoaXMuX3VzZXJQcm9maWxlQXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih1c2VyUHJvZmlsZVNldHRpbmdzLnByb2ZpbGVBdmF0YXJTZWxlY3Rvcik7XHJcbiAgICAgICAgdGhpcy5zZXRVc2VyTmFtZSh1c2VyTmFtZSk7XHJcbiAgICAgICAgdGhpcy5zZXRVc2VyRGVzY3JpcHRpb24ocHJvZmlsZURlc2NyaXB0aW9uKTtcclxuICAgICAgICB0aGlzLnNldFVzZXJJbWFnZShpbWFnZVVybCk7XHJcbiAgICAgICAgdGhpcy5pbml0aWFsaXplID0gaW5pdGlhbGl6ZTtcclxuICAgIH1cclxuXHJcbiAgICBzZXRVc2VyTmFtZSh1c2VyTmFtZSA9IHVzZXJQcm9maWxlU2V0dGluZ3MuZGVmYXVsdFVzZXJuYW1lKSB7XHJcbiAgICAgICAgdGhpcy5fdXNlck5hbWUudGV4dENvbnRlbnQgPSB1c2VyTmFtZTtcclxuICAgIH1cclxuXHJcbiAgICBzZXRVc2VyRGVzY3JpcHRpb24ocHJvZmlsZURlc2NyaXB0aW9uID0gdXNlclByb2ZpbGVTZXR0aW5ncy5kZWZhdWx0RGVzY3JpcHRpb24pIHtcclxuICAgICAgICB0aGlzLl91c2VyUHJvZmlsZURlc2NyaXB0aW9uLnRleHRDb250ZW50ID0gcHJvZmlsZURlc2NyaXB0aW9uO1xyXG4gICAgfVxyXG5cclxuICAgIHNldFVzZXJJbWFnZShpbWFnZVVybCA9IHVzZXJQcm9maWxlU2V0dGluZ3MuZGVmYXVsdFByb2ZpbGVJbWFnZSkge1xyXG4gICAgICAgIHRoaXMuX3VzZXJQcm9maWxlQXZhdGFyLnNldEF0dHJpYnV0ZSgnc3JjJyxpbWFnZVVybCk7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0UHJvZmlsZURhdGEoe3VzZXJOYW1lID0gdXNlclByb2ZpbGVTZXR0aW5ncy5kZWZhdWx0VXNlcm5hbWUsIHByb2ZpbGVEZXNjcmlwdGlvbiA9IHVzZXJQcm9maWxlU2V0dGluZ3MuZGVmYXVsdERlc2NyaXB0aW9uLCBpbWFnZVVybCA9IHVzZXJQcm9maWxlU2V0dGluZ3MuZGVmYXVsdFByb2ZpbGVJbWFnZX0gPSB7fSkge1xyXG4gICAgICAgIHRoaXMuc2V0VXNlck5hbWUodXNlck5hbWUpO1xyXG4gICAgICAgIHRoaXMuc2V0VXNlckRlc2NyaXB0aW9uKHByb2ZpbGVEZXNjcmlwdGlvbik7XHJcbiAgICAgICAgdGhpcy5zZXRVc2VySW1hZ2UoaW1hZ2VVcmwpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFVzZXJQcm9maWxlKCkge1xyXG4gICAgICAgIHJldHVybiB7XCJwcm9maWxlLW5hbWVcIjogdGhpcy5fdXNlck5hbWUudGV4dENvbnRlbnQsIFwicHJvZmlsZS1kZXNjcmlwdGlvblwiOiB0aGlzLl91c2VyUHJvZmlsZURlc2NyaXB0aW9uLnRleHRDb250ZW50IH0gXHJcbiAgICB9XHJcbiAgICBcclxufSIsImltcG9ydCBNb2RhbCBmcm9tICcuL01vZGFsLmpzJztcclxuaW1wb3J0IHsgbW9kYWxTZWxlY3RvcnMgfSBmcm9tICcuLi91dGlscy9jb25zdGFudHMuanMnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTW9kYWxQcmV2aWV3SW1hZ2UgZXh0ZW5kcyBNb2RhbCB7XHJcbiAgICBjb25zdHJ1Y3Rvcih7IG1vZGFsU2VsZWN0b3IgfSkge1xyXG4gICAgICAgIHN1cGVyKHsgbW9kYWxTZWxlY3RvciB9KSBcclxuICAgICAgICB0aGlzLl9wcmV2aWV3SW1hZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG1vZGFsU2VsZWN0b3JzLnByZXZpZXdNb2RhbEltYWdlKTtcclxuICAgICAgICB0aGlzLl9wcmV2aWV3VGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG1vZGFsU2VsZWN0b3JzLnByZXZpZXdNb2RhbFRpdGxlKTtcclxuICAgICAgICB0aGlzLl9wcmV2aWV3VGl0bGVUZXh0ID0gJyc7XHJcbiAgICB9XHJcblxyXG4gICAgcG9wdWxhdGVQcmV2aWV3KHsgaW1hZ2VVcmwsIGltYWdlQWx0LCB0aXRsZVRleHQgfSkge1xyXG4gICAgICAgIHRoaXMuX3NldFByZXZpZXdUaXRsZSh0aXRsZVRleHQpO1xyXG4gICAgICAgIHRoaXMuX3NldFByZXZpZXdJbWFnZShpbWFnZVVybCk7XHJcbiAgICAgICAgdGhpcy5fc2V0UHJldmlld0ltYWdlQWx0KGltYWdlQWx0KTtcclxuICAgIH1cclxuXHJcbiAgICBfc2V0UHJldmlld0ltYWdlKGltYWdlVXJsKSB7XHJcbiAgICAgICAgdGhpcy5pbWFnZVVybCA9IGltYWdlVXJsO1xyXG4gICAgICAgIHRoaXMuX3ByZXZpZXdJbWFnZS5zZXRBdHRyaWJ1dGUoJ3NyYycsIGltYWdlVXJsKTtcclxuICAgIH1cclxuXHJcbiAgICBfc2V0UHJldmlld1RpdGxlKHRpdGxlU3RyaW5nKSB7XHJcbiAgICAgICAgdGhpcy5fcHJldmlld1RpdGxlVGV4dCA9IHRpdGxlU3RyaW5nO1xyXG4gICAgICAgIHRoaXMuX3ByZXZpZXdUaXRsZS50ZXh0Q29udGVudCA9IHRoaXMuX3ByZXZpZXdUaXRsZVRleHQ7XHJcbiAgICB9XHJcblxyXG4gICAgX3NldFByZXZpZXdJbWFnZUFsdChpbWFnZUFsdCkge1xyXG4gICAgICAgIGltYWdlQWx0ID8gXHJcbiAgICAgICAgdGhpcy5fcHJldmlld0ltYWdlLnNldEF0dHJpYnV0ZSgnYWx0JyxpbWFnZUFsdCkgOiBcclxuICAgICAgICB0aGlzLl9wcmV2aWV3SW1hZ2Uuc2V0QXR0cmlidXRlKCdhbHQnLHRoaXMuX3ByZXZpZXdUaXRsZVRleHQpO1xyXG4gICAgfVxyXG5cclxuICAgIGNsZWFyKCkge1xyXG4gICAgICAgIHRoaXMuc2V0UHJldmlld0ltYWdlKHtpbWFnZVVybDogJycsIGltYWdlQWx0OiAnJ30pO1xyXG4gICAgICAgIHRoaXMuc2V0UHJldmlld1RpdGxlKCcnKTtcclxuICAgIH1cclxufSIsImltcG9ydCBNb2RhbCBmcm9tIFwiLi9Nb2RhbC5qc1wiXHJcbmltcG9ydCB7IG1vZGFsU2VsZWN0b3JzIH0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xyXG5cclxuLy9JIGJ1aWx0IHRoaXMgYXBwcm9hY2ggYmVmb3JlIHJlYWRpbmcgdGhyb3VnaCB0aGUgcmVjb21tZW5kZWQgd2F5IGluIHRoZSBwcm9qZWN0IGJyaWVmLlxyXG4vL0kgd2FudGVkIGEgcmV1c2FibGUgY29uZmlybS9jYW5jZWwgbW9kYWwgbG9naWMgdGhhdCB3b3VsZFxyXG4vL3JldHVybiB0aGUgdXNlcidzIGlucHV0IGluc2lkZSBhbnkgb3RoZXIgbG9naWMgaW4gaW5kZXguanMuIFxyXG4gXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE1vZGFsQ29uZmlybSBleHRlbmRzIE1vZGFsIHtcclxuICAgIGNvbnN0cnVjdG9yKHsgbW9kYWxTZWxlY3RvciwgY29uZmlybVRleHQgPSBcIkNvbmZpcm1cIiwgYXdhaXRpbmdDb25maXJtVGV4dCA9IFwiQ29uZmlybWluZy4uLlwiLCBjYW5jZWxUZXh0ID0gXCJDYW5jZWxcIiB9ID17fSlcclxuICAgIHtcclxuICAgICAgICBzdXBlcih7IG1vZGFsU2VsZWN0b3IgfSlcclxuICAgICAgICBjb25zb2xlLmxvZyh0aGlzLl9tb2RhbEVsZW1lbnQpO1xyXG4gICAgICAgIHRoaXMuX2NvbmZpcm1UZXh0ID0gY29uZmlybVRleHQ7XHJcbiAgICAgICAgdGhpcy5fYXdhaXRpbmdDb25maXJtVGV4dCA9IGF3YWl0aW5nQ29uZmlybVRleHQ7XHJcbiAgICAgICAgdGhpcy5fY2FuY2VsVGV4dCA9IGNhbmNlbFRleHQ7XHJcbiAgICAgICAgdGhpcy5fbW9kYWxDb25maXJtQnV0dG9uID0gdGhpcy5fbW9kYWxFbGVtZW50LnF1ZXJ5U2VsZWN0b3IobW9kYWxTZWxlY3RvcnMubW9kYWxDb25maXJtQnV0dG9uU2VsZWN0b3IpO1xyXG4gICAgICAgIHRoaXMuX21vZGFsQ2FuY2VsQnV0dG9uID0gdGhpcy5fbW9kYWxFbGVtZW50LnF1ZXJ5U2VsZWN0b3IobW9kYWxTZWxlY3RvcnMubW9kYWxDYW5jZWxCdXR0b25TZWxlY3Rvcik7XHJcbiAgICAgICAgdGhpcy5hd2FpdFVzZXJDaG9pY2UgPSB0aGlzLmF3YWl0VXNlckNob2ljZS5iaW5kKHRoaXMpO1xyXG5cclxuICAgICAgICB0aGlzLl9zZXRDb25maXJtVGV4dCh0aGlzLl9jb25maXJtVGV4dCk7XHJcbiAgICAgICAgdGhpcy5fc2V0Q2FuY2VsVGV4dCh0aGlzLl9jYW5jZWxUZXh0KTtcclxuICAgIH1cclxuXHJcbiAgICBfc2V0Q29uZmlybVRleHQodGV4dCkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKHRoaXMuX21vZGFsQ2luZm9ybUJ1dHRvbik7XHJcbiAgICAgICAgdGhpcy5fbW9kYWxDb25maXJtQnV0dG9uLnRleHRDb250ZW50ID0gdGV4dDtcclxuICAgIH1cclxuXHJcbiAgICBfc2V0Q2FuY2VsVGV4dCh0ZXh0KSB7XHJcbiAgICAgICAgdGhpcy5fbW9kYWxDYW5jZWxCdXR0b24udGV4dENvbnRlbnQgPSB0ZXh0O1xyXG4gICAgfVxyXG5cclxuICAgIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgICAgfVxyXG5cclxuICAgIF9vbkNhbmNlbENsaWNrKCkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFwib24gY2FuY2VsIGNsaWNrZWRcIik7XHJcbiAgICAgICAgdGhpcy5fbW9kYWxFbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5oYW5kbGVyKTtcclxuICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIF9vbkNvbmZpcm1DbGljaygpIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhcIm9uIGNvbmZpcm0gY2xpY2tlZFwiKTtcclxuICAgICAgICB0aGlzLl9tb2RhbEVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLmhhbmRsZXIpO1xyXG4gICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICBfc2V0VG9Db25maXJtaW5nKCkge1xyXG4gICAgICAgIHRoaXMuX21vZGFsQ29uZmlybUJ1dHRvbi50ZXh0Q29udGVudCA9IHRoaXMuX2F3YWl0aW5nQ29uZmlybVRleHQ7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0VG9Db25maXJtKCkge1xyXG4gICAgICAgIHRoaXMuX21vZGFsQ29uZmlybUJ1dHRvbi50ZXh0Q29udGVudCA9IHRoaXMuX2NvbmZpcm1UZXh0XHJcbiAgICB9XHJcblxyXG4gICAgYXdhaXRVc2VyQ2hvaWNlKCkge1xyXG4gICAgICAgIHRoaXMub3BlbigpO1xyXG4gICAgICAgIGNvbnN0IG1vZGFsID0gdGhpcztcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XHJcbiAgICAgICAgICAgIG1vZGFsLl9tb2RhbEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiBjbGlja0hhbmRsZXIoZXZ0KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJtb2RhbF9fYnV0dG9uLWNvbmZpcm1cIikpIHtcclxuICAgICAgICAgICAgICAgICAgICBtb2RhbC5fc2V0VG9Db25maXJtaW5nKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgbW9kYWwuX21vZGFsRWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIGNsaWNrSGFuZGxlcik7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSh0cnVlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcIm1vZGFsX19idXR0b24tY2FuY2VsXCIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbW9kYWwuX21vZGFsRWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIGNsaWNrSGFuZGxlcik7XHJcbiAgICAgICAgICAgICAgICAgICAgbW9kYWwuY2xvc2UoKTtcclxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKGZhbHNlKTtcclxuICAgICAgICAgICAgICAgIH0gIFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIFxyXG59Il0sIm5hbWVzIjpbInZhbGlkYXRpb25TZXR0aW5ncyIsImZvcm1TZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJpbnB1dEVycm9yU3R5bGUiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsInN1Ym1pdEJ1dHRvbk5hbWUiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsImRlYnVnZ2luZyIsIm1vZGFsU2VsZWN0b3JzIiwidXNlclByb2ZpbGVTZXR0aW5ncyIsImRlZmF1bHRVc2VybmFtZSIsImRlZmF1bHREZXNjcmlwdGlvbiIsImRlZmF1bHRQcm9maWxlSW1hZ2UiLCJwcm9maWxlTmFtZVNlbGVjdG9yIiwicHJvZmlsZURlc2NyaXB0aW9uU2VsZWN0b3IiLCJwcm9maWxlQXZhdGFyU2VsZWN0b3IiLCJyb3V0ZURhdGEiLCJtZXRob2QiLCJyb3V0ZSIsIkNhcmRFbGVtZW50IiwiY29uc3RydWN0b3IiLCJfcmVmIiwibmFtZSIsImxpbmsiLCJpc0xpa2VkIiwiaWQiLCJpbWFnZUNsaWNrTWFuYWdlciIsIm9uRGVsZXRlQVBJTWFuYWdlciIsIm9uTGlrZUFQSU1hbmFnZXIiLCJkZWxldGVDb25maXJtYXRpb25NYW5hZ2VyIiwidGhpcyIsIl9jYXJkVGVtcGxhdGUiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJfY2FyZEVsZW1lbnQiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiX2NhcmRJbWFnZSIsIl9saWtlQnV0dG9uIiwiX2RlbGV0ZUJ1dHRvbiIsIl90aXRsZUVsZW1lbnQiLCJfY2FyZFVubGlrZWRJbWFnZSIsIl9jYXJkTGlrZWRJbWFnZSIsIl9vbkRlbGV0ZUFQSU1hbmFnZXIiLCJfb25MaWtlQVBJTWFuYWdlciIsIl9pbWFnZUNsaWNrTWFuYWdlciIsInNldFRpdGxlIiwic2V0Q2FyZEltYWdlIiwic2V0Q2FyZEltYWdlQWx0IiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiX3NldExpa2UiLCJhZGRFdmVudExpc3RlbmVyIiwib25JbWFnZUNsaWNrIiwib25MaWtlQ2xpY2siLCJfb25EZWxldGVDbGljayIsInRpdGxlIiwidGl0bGVUZXh0IiwidGV4dENvbnRlbnQiLCJjb25zb2xlIiwibG9nIiwiaW1hZ2VMaW5rIiwic2V0QXR0cmlidXRlIiwiYWx0VGV4dCIsImltYWdlQWx0VGV4dCIsImJvb2wiLCJhY3RpdmF0ZUxpa2VCdXR0b24iLCJkZWFjdGl2YXRlTGlrZUJ1dHRvbiIsImlzTGlrZUFjdGl2ZSIsInRoZW4iLCJyZXN1bHQiLCJjbGFzc0xpc3QiLCJjb250YWlucyIsInJlbW92ZSIsImFkZCIsImdldFZpZXciLCJNb2RhbCIsIm1vZGFsU2VsZWN0b3IiLCJfbW9kYWxTZWxlY3RvciIsIl9tb2RhbEVsZW1lbnQiLCJfaGFuZGxlRXNjYXBlQ2xvc2UiLCJiaW5kIiwiX2Nsb3NlQnV0dG9uIiwib3BlbiIsIl9zZXRFc2NhcGVMaXN0ZW5lciIsImNsb3NlIiwiZXZ0Iiwia2V5IiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsIl9oYW5kbGVNb2RhbE92ZXJsYXlDbGljayIsInRhcmdldCIsIk1vZGFsV2l0aEZvcm0iLCJvblN1Ym1pdENhbGxiYWNrIiwic3VwZXIiLCJfb25TdWJtaXRDYWxsYmFjayIsIl9zdWJtaXRCdXR0b24iLCJfaW5wdXRGaWVsZHMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiX2Zvcm0iLCJfY3VycmVudFByb2ZpbGVOYW1lIiwiX2N1cnJlbnRQcm9maWxlRGVzY3JpcHRpb24iLCJnZXRGb3JtRWxlbWVudCIsIl9yZXNldElucHV0cyIsImZvckVhY2giLCJmaWVsZCIsInZhbHVlIiwiX29uU3VibWl0IiwiX2dldElucHV0VmFsdWVzIiwiaW5wdXRWYWx1ZXMiLCJwcmV2ZW50RGVmYXVsdCIsIl9zZXRTdWJtaXRUb1N1Ym1pdHRpbmciLCJfc2V0U3VibWl0VG9TdWJtaXQiLCJjYXRjaCIsInNldERlZmF1bHRJbnB1dHMiLCJkZWZhdWx0c09iamVjdCIsInNldFBsYWNlaG9sZGVySW5wdXRzIiwiRm9ybVZhbGlkYXRvciIsInNldHRpbmdzIiwiZm9ybUVsZW1lbnQiLCJfc2V0dGluZ3MiLCJfZm9ybUVsZW1lbnQiLCJfc2V0Rm9ybUlucHV0RWxlbWVudHMiLCJfc2V0Rm9ybUJ1dHRvbnMiLCJlbmFibGVWYWxpZGF0aW9uIiwicmVzZXRWYWxpZGF0aW9uIiwiX2Rpc2FibGVCdXR0b24iLCJfY2xlYXJGb3JtSW5wdXRFbGVtZW50cyIsIl9zaG93SW5wdXRFcnJvciIsImlucHV0RWxlbWVudCIsImVycm9yRWxlbWVudCIsIl9nZXRFcnJvckVsZW1lbnQiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsIl9oaWRlSW5wdXRFcnJvciIsIl9jaGVja0ZpZWxkVmFsaWRpdHkiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX2NoZWNrSW52YWxpZElucHV0IiwiX2Zvcm1JbnB1dEVsZW1lbnRzIiwiZXZlcnkiLCJsZW5ndGgiLCJBcnJheSIsImZyb20iLCJfYnV0dG9uRWxlbWVudCIsIl90b2dnbGVTdWJtaXRCdXR0b24iLCJfZW5hYmxlQnV0dG9uIiwiZGlzYWJsZWQiLCJkYkFwaSIsImJhc2VVcmwiLCJoZWFkZXJzIiwiX2Jhc2VVcmwiLCJfYXV0aG9yaXphdGlvbiIsImF1dGhvcml6YXRpb24iLCJfY29udGVudFR5cGUiLCJfYnVpbGRSZXF1ZXN0IiwiYm9keSIsImFyZ3VtZW50cyIsInVuZGVmaW5lZCIsInVybCIsImluZm8iLCJKU09OIiwic3RyaW5naWZ5IiwicmVxdWVzdCIsInJlcXVlc3RJbmZvIiwiZmV0Y2giLCJyZXMiLCJvayIsImpzb24iLCJQcm9taXNlIiwicmVqZWN0Iiwic3RhdHVzIiwiZXJyIiwiZXJyb3IiLCJyZXF1ZXN0RGVsZXRlIiwiY2FyZElkIiwicm91dGVzIiwicmVxdWVzdExpa2VVcGRhdGUiLCJsaWtlU3RhdHVzIiwicmVwbGFjZSIsImdldEJhdGNoRGF0YSIsInJlc29sdmUiLCJkYXRhIiwiYWxsIiwiZ2V0SW5pdGlhbFVzZXJEYXRhIiwiY2FyZFNlY3Rpb24iLCJyZW5kZXJlciIsImNvbnRhaW5lclNlbGVjdG9yIiwiaW5pdGlhbGl6ZSIsIl9pdGVtcyIsIl9yZW5kZXJlciIsIl9jb250YWluZXJTZWxlY3RvciIsIl9jb250YWluZXIiLCJyZW5kZXJJdGVtcyIsIml0ZW0iLCJzZXRJdGVtcyIsIml0ZW1zIiwiYWRkSXRlbSIsImVsZW1lbnQiLCJwdXNoIiwiYXBwZW5kIiwiX2NsZWFyIiwiaW50ZXJuYWxIVE1MIiwiY2FyZCIsIm5ld0NhcmQiLCJtYWtlTmV3Q2FyZCIsInVzZXJQcm9maWxlIiwidXNlck5hbWUiLCJwcm9maWxlRGVzY3JpcHRpb24iLCJpbWFnZVVybCIsIl91c2VyTmFtZSIsIl91c2VyUHJvZmlsZURlc2NyaXB0aW9uIiwiX3VzZXJQcm9maWxlQXZhdGFyIiwic2V0VXNlck5hbWUiLCJzZXRVc2VyRGVzY3JpcHRpb24iLCJzZXRVc2VySW1hZ2UiLCJzZXRQcm9maWxlRGF0YSIsImdldFVzZXJQcm9maWxlIiwiYWJvdXQiLCJhdmF0YXIiLCJlZGl0UHJvZmlsZUZvcm0iLCJlZGl0QXZhdGFyRm9ybSIsIm5ld1Bvc3RGb3JtIiwibmV3UG9zdFRpdGxlIiwibmV3UG9zdEltYWdlTGluayIsInByZXZpZXdJbWFnZU1vZGFsIiwiX3ByZXZpZXdJbWFnZSIsIl9wcmV2aWV3VGl0bGUiLCJfcHJldmlld1RpdGxlVGV4dCIsInBvcHVsYXRlUHJldmlldyIsIl9yZWYyIiwiaW1hZ2VBbHQiLCJfc2V0UHJldmlld1RpdGxlIiwiX3NldFByZXZpZXdJbWFnZSIsIl9zZXRQcmV2aWV3SW1hZ2VBbHQiLCJ0aXRsZVN0cmluZyIsImNsZWFyIiwic2V0UHJldmlld0ltYWdlIiwic2V0UHJldmlld1RpdGxlIiwidXNlckNvbmZpcm1EZWxldGVNb2RhbCIsImNvbmZpcm1UZXh0IiwiYXdhaXRpbmdDb25maXJtVGV4dCIsImNhbmNlbFRleHQiLCJfY29uZmlybVRleHQiLCJfYXdhaXRpbmdDb25maXJtVGV4dCIsIl9jYW5jZWxUZXh0IiwiX21vZGFsQ29uZmlybUJ1dHRvbiIsIl9tb2RhbENhbmNlbEJ1dHRvbiIsImF3YWl0VXNlckNob2ljZSIsIl9zZXRDb25maXJtVGV4dCIsIl9zZXRDYW5jZWxUZXh0IiwidGV4dCIsIl9tb2RhbENpbmZvcm1CdXR0b24iLCJfb25DYW5jZWxDbGljayIsImhhbmRsZXIiLCJfb25Db25maXJtQ2xpY2siLCJfc2V0VG9Db25maXJtaW5nIiwic2V0VG9Db25maXJtIiwibW9kYWwiLCJjbGlja0hhbmRsZXIiLCJfaWQiLCJjaG9pY2UiXSwic291cmNlUm9vdCI6IiJ9